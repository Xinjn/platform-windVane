(globalThis["webpackChunkwindvane"]=globalThis["webpackChunkwindvane"]||[]).push([[8298],{59104:(e,r,t)=>{e.exports=t(75425)},78289:e=>{e.exports={header:"_1pnNnm",actions:"_23Utz2",body:"_3euxaN"}},74484:e=>{e.exports={footerPage:"_3Cp3MJ"}},9548:(e,r,t)=>{"use strict";t.d(r,{Z:()=>O});t(15594);var n=t(50386),o=(t(57663),t(71577)),i=t(69417),a=t(20594),s=t(89356),l=t.n(s),u=t(67294),d=(t(13062),t(71230)),c=(t(89032),t(15746)),v=(t(14965),t(3436)),p=(t(43358),t(44477)),m=(t(47673),t(59193)),h=(t(9715),t(69733)),g=t(28834),y=t.n(g),f=t(59104),j=t.n(f),b=t(50047),x=t.n(b),S=t(30381),C=t.n(S),k=t(85893);function w(e){var r;const t={...e};return y()(r=l()({...t})).call(r,(e=>{var r;"string"===typeof t[e]&&(t[e]=j()(r=t[e]).call(r))})),t}const Z=(e,r)=>{var t;const n=h.Z.useForm(),o=(0,a.Z)(n,1),i=o[0];async function s(){const e=await i.validateFields();return w(e)}(0,u.useImperativeHandle)(r,(()=>({resetFrom:i.resetFields,getValues:s})));const l=(0,u.useCallback)((({renderCom:r,comProps:t={},label:n})=>{var o,i,a;if((0,u.isValidElement)(r))return r;switch(r){case"input":return(0,k.jsx)(m.Z,{placeholder:null!==(o=null===t||void 0===t?void 0:t.placeholder)&&void 0!==o?o:`\u8bf7\u8f93\u5165${n}`,onPressEnter:()=>e.onPressEnter&&e.onPressEnter()});case"passwordInput":return(0,k.jsx)(m.Z.Password,{placeholder:null!==(i=null===t||void 0===t?void 0:t.placeholder)&&void 0!==i?i:`\u8bf7\u8f93\u5165${n}`,onPressEnter:()=>e.onPressEnter&&e.onPressEnter()});case"select":return(0,k.jsx)(p.Z,{allowClear:!0,placeholder:`\u8bf7\u9009\u62e9${n}`,onChange:()=>e.onPressEnter&&e.onPressEnter(),...t,children:null===t||void 0===t||null===(a=t.options)||void 0===a?void 0:x()(a).call(a,(e=>(0,k.jsx)(p.Z.Option,{value:e.value,children:e.label},e.value)))});case"rangePicker":return(0,k.jsx)(v.Z.RangePicker,{showTime:!0,style:{width:"100%"},ranges:{"\u4eca\u5929":[C()().startOf("day"),C()().endOf("day")],"\u6628\u5929":[C()().startOf("day").subtract(1,"day"),C()().endOf("day").subtract(1,"day")],"\u672c\u5468":[C()().startOf("week"),C()().endOf("week")],"\u672c\u6708":[C()().startOf("month"),C()().endOf("month")]},...t});case"datePicker":return(0,k.jsx)(v.Z,{style:{width:"100%"},...t});default:return(0,k.jsx)(m.Z,{})}}),[e.onPressEnter]);return(0,k.jsx)(h.Z,{form:i,initialValues:e.initialValues,children:(0,k.jsx)(d.Z,{gutter:24,children:x()(t=e.items).call(t,(r=>{var t;return(0,k.jsx)(c.Z,{span:null!==(t=r.span)&&void 0!==t?t:8,children:(0,k.jsx)(h.Z.Item,{name:r.name,label:r.label,...e.formItemLayout,...r.itemProps,children:l(r)})},r.name)}))})})},P=(0,u.forwardRef)(Z);var z=t(78289),I=t.n(z),T=t(26052);const E={labelCol:{span:6},wrapperCol:{span:18}},N=(e,r)=>{var t;const s=e.formItem,d=void 0===s?[]:s,c=e.columns,v=e.rowKey,p=void 0===v?"key":v,m=e.initialValues,h=void 0===m?{}:m,g=e.plusAction,y=e.query,f=e.list,j=void 0===f?[]:f,b=e.total,x=void 0===b?0:b,S=e.loading,C=e.defaultPageSize,w=e.pageSizeOptions,Z=void 0===w?["10","20","50","100"]:w,z=e.notQueryWhilestart,N=(0,u.useRef)(null),O=void 0!==e.formRef?e.formRef:N,q=null!==C&&void 0!==C?C:Number(Z[0]),R={current:1,pageSize:q},H=(0,u.useState)(R),Q=(0,a.Z)(H,2),V=Q[0],M=Q[1],L=(0,u.useState)({}),$=(0,a.Z)(L,2),F=$[0],U=$[1],_=async(e,r)=>{try{var t;const n=await(null===(t=O.current)||void 0===t?void 0:t.getValues()),o=V.current,a=V.pageSize,s=r||F,u=(0,T.jt)({...n,current:o,pageSize:a,...e});M({current:u.current,pageSize:u.pageSize}),void 0!==s&&0!==l()(s).length&&void 0!==s.order&&(u.sorter=s);const d=u.current,c=u.pageSize,v=(u.sorter,(0,i.Z)(u,["current","pageSize","sorter"])),p={pagination:{current:d,pageSize:c},query:v};u.sorter&&(p.sort={type:u.sorter.order,key:u.sorter.field}),y(p),r&&U(r)}catch(n){console.error(n)}};function W(){var e;null===(e=O.current)||void 0===e||e.resetFrom(),_({current:1})}(0,u.useImperativeHandle)(r,(()=>({query:_}))),(0,u.useEffect)((()=>{!z&&_({...R,...h})}),[]);const A=(e,r)=>{r!==V.pageSize?_({current:1,pageSize:r}):_({current:e,pageSize:r})},B=(e,r,t)=>{const n=t.field,o=t.order;!n||n===(null!==F&&void 0!==F?F:{}).field&&o===(null!==F&&void 0!==F?F:{}).order||_({},{field:n,order:o})};return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:I().header,children:[(0,k.jsx)(P,{ref:O,items:d,initialValues:h,onPressEnter:_,formItemLayout:e.formItemLayout||E}),(0,k.jsxs)("div",{className:I().actions,children:[g||(0,k.jsx)("div",{}),d.length>0&&(0,k.jsxs)("div",{children:[(0,k.jsx)(o.Z,{onClick:W,style:{marginRight:"10px"},children:"\u91cd\u7f6e"},"reset"),(0,k.jsx)(o.Z,{onClick:()=>_({current:1}),type:"primary",children:"\u67e5\u8be2"},"query")]})]})]}),(0,k.jsx)("div",{className:I().body,children:null!==(t=e.children)&&void 0!==t?t:(0,k.jsx)(n.Z,{bordered:!0,size:"small",dataSource:j,columns:c,rowKey:p,pagination:{total:x,showTotal:e=>`\u5171${e}\u6761\u6570\u636e`,current:V.current,pageSize:V.pageSize,onChange:A,showSizeChanger:!0,pageSizeOptions:Z},loading:S,onChange:B})})]})},O=(0,u.forwardRef)(N)},59961:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>Z});t(20228);var n=t(11382),o=(t(14781),t(9366)),i=(t(13254),t(14277)),a=t(20594),s=t(50047),l=t.n(s),u=t(47648),d=t.n(u),c=t(67294),v=t(9548),p=t(59867),m=t(7084),h=t(11903),g=t(41591),y=t(96625),f=t(64074),j=t(74484),b=t.n(j),x=t(33909),S=t(85893);const C=10,k="common",w=e=>{var r,t;const s=(null===e||void 0===e||null===(r=e.location)||void 0===r||null===(t=r.query)||void 0===t?void 0:t.dramaId)||void 0,u={pagination:{pageSize:C,current:1},query:{subjectId:s,commentUserRank:k,checkStatus:void 0,rootId:0},sort:{key:"createTime",type:"desc"}},p=(0,c.useState)(u),m=(0,a.Z)(p,2),j=m[0],w=m[1],Z=(0,x.Hm)(j),P=Z.commontList,z=Z.pagination,I=Z.CommontCount,T=Z.isValidating,E=Z.mutate,N=Z.isHighQuality,O=(0,c.useRef)(),q=(0,c.useMemo)((()=>(null===P||void 0===P?void 0:l()(P).call(P,(e=>({subjectId:null===e||void 0===e?void 0:e.subjectId,subjectType:null===e||void 0===e?void 0:e.subjectType}))))||[]),[P]),R=(0,x.eL)(q),H=R.productionGroupDetail,Q=(R.detailLoading,(0,c.useCallback)((()=>{O.current.query()}),[])),V=(0,c.useMemo)((()=>[{name:"title",label:"\u4f5c\u54c1\u540d\u79f0",renderCom:(0,S.jsx)(h.Z,{onChange:Q,style:{width:"100%"}}),span:6},{name:"filmTitle",label:"\u7247\u5355\u540d\u79f0",renderCom:(0,S.jsx)(g.Z,{onChange:Q,style:{width:"100%"}}),span:6},{name:"checkStatus",span:6,label:"\u72b6\u6001",renderCom:"select",comProps:{options:y.jW}},{name:"isHighQuality",span:6,label:"\u4f18\u8d28\u72b6\u6001",renderCom:"select",comProps:{options:y.$o}},{name:"subjectType",span:6,label:"\u4e3b\u4f53\u7c7b\u578b",renderCom:"select",comProps:{options:y.tj}},{name:"sort",span:5,label:"\u6392\u5e8f\u5b57\u6bb5",renderCom:"select",comProps:{options:y.cS}}]),[Q]),M=(0,c.useCallback)((e=>{var r,t;const n=e.pagination,o=e.query;console.log(o),w({pagination:n,query:{subjectId:(null===o||void 0===o||null===(r=o.title)||void 0===r?void 0:r.value)||(null===o||void 0===o||null===(t=o.filmTitle)||void 0===t?void 0:t.value)||s,commentUserRank:k,checkStatus:null!==o&&void 0!==o&&o.checkStatus?Number(null===o||void 0===o?void 0:o.checkStatus):void 0,isHighQuality:null!==o&&void 0!==o&&o.isHighQuality?Number(null===o||void 0===o?void 0:o.isHighQuality):void 0,rootId:0,subjectType:(null===o||void 0===o?void 0:o.subjectType)||void 0},sort:{key:(null===o||void 0===o?void 0:d()(o))||"createTime",type:"desc"}})}),[s]),L=(0,c.useCallback)(((e,r)=>{w((t=>({...t,pagination:{current:e,pageSize:r}})))}),[]),$=(0,c.useMemo)((()=>!s),[s]);return(0,c.useEffect)((()=>{$&&V.pop()}),[V,$]),(0,S.jsx)("div",{children:(0,S.jsx)(v.Z,{notQueryWhilestart:!0,formItem:V,query:M,loading:T,ref:O,defaultPageSize:C,children:(0,S.jsxs)(n.Z,{tip:"\u52a0\u8f7d\u4e2d...",spinning:T,children:[null!==P&&void 0!==P&&P.length?null===P||void 0===P?void 0:l()(P).call(P,((e,r)=>(0,S.jsx)(f.Z,{showBlackBtn:!0,showProductionName:!0,common:e,refresh:E,productionGroupDetail:H,CommontCount:I,isHighQuality:N,hiddenAddPraise:$},r))):(0,S.jsx)(i.Z,{}),(0,S.jsx)("div",{className:b().footerPage,children:(0,S.jsx)(o.Z,{current:Number((null===z||void 0===z?void 0:z.current)||1),pageSize:Number((null===z||void 0===z?void 0:z.pageSize)||10),total:Number((null===z||void 0===z?void 0:z.total)||0),showTotal:e=>`\u603b\u8ba1 ${e} \u6761`,showQuickJumper:!0,onChange:L})})]})})})},Z=(0,p.IX)(w,[m.uU.SYSTEM,m.uU.COMMENT])},62774:(e,r,t)=>{var n=t(13348),o=String.prototype;e.exports=function(e){var r=e.trim;return"string"===typeof e||e===o||e instanceof String&&r===o.trim?n:r}},13348:(e,r,t)=>{t(57398);var n=t(35703);e.exports=n("String").trim},75425:(e,r,t)=>{var n=t(62774);e.exports=n},93093:(e,r,t)=>{var n=t(95981),o=t(73483),i="\u200b\x85\u180e";e.exports=function(e){return n((function(){return!!o[e]()||i[e]()!=i||o[e].name!==e}))}},57398:(e,r,t)=>{"use strict";var n=t(76887),o=t(74853).trim,i=t(93093);n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return o(this)}})}}]);
//# sourceMappingURL=p__CommontManage__PublicCommentManage.b12ca80b.async.js.map