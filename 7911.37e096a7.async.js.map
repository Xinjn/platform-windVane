{"version":3,"sources":["webpack://windvane/./node_modules/@babel/runtime-corejs3/core-js/instance/every.js","webpack://windvane/./node_modules/@babel/runtime-corejs3/core-js/instance/sort.js","webpack://windvane/./src/components/Countdown.tsx","webpack://windvane/./src/components/DataInputControl/index.tsx","webpack://windvane/./node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","webpack://windvane/./node_modules/@ant-design/icons/es/icons/UploadOutlined.js","webpack://windvane/./src/components/DataTempleteUpload/index.tsx","webpack://windvane/./src/components/ScoreNumberControl/index.tsx","webpack://windvane/./src/pages/DataManage/DataControl/services.ts","webpack://windvane/./src/components/DataTempleteUpload/templete.png","webpack://windvane/./node_modules/core-js-pure/es/array/virtual/every.js","webpack://windvane/./node_modules/core-js-pure/es/array/virtual/sort.js","webpack://windvane/./node_modules/core-js-pure/es/instance/every.js","webpack://windvane/./node_modules/core-js-pure/es/instance/sort.js","webpack://windvane/./node_modules/core-js-pure/features/instance/every.js","webpack://windvane/./node_modules/core-js-pure/features/instance/sort.js","webpack://windvane/./node_modules/core-js-pure/internals/array-sort.js","webpack://windvane/./node_modules/core-js-pure/internals/engine-ff-version.js","webpack://windvane/./node_modules/core-js-pure/internals/engine-is-ie-or-edge.js","webpack://windvane/./node_modules/core-js-pure/internals/engine-webkit-version.js","webpack://windvane/./node_modules/core-js-pure/modules/es.array.every.js","webpack://windvane/./node_modules/core-js-pure/modules/es.array.sort.js"],"names":["module","exports","TimeCountdown","formatExpireTime","date","milliSeconds","moment","isAfter","diff","hours","asHours","days","asDays","Countdown","time","overTimeText","fontSize","style","color","useMemo","Date","getTime","valueOf","value","valueStyle","FormItem","divideStyle","display","width","lineHeight","textAlign","timeFormStyle","marginBottom","DataInputControl","props","form","useState","submitLoading","setSubmitLoading","showAdjustGrade","setShowAdjustGrade","useGetAdjustGrade","dramaId","adjustGrade","mutate","useEffect","length","startGrade","endGrade","setFieldsValue","subjectId","updateTime","modifyHandle","validateFields","then","values","hour","minute","second","rest","sendParams","adjustTime","dealCommentReport","res","code","successHandle","catch","label","name","validateTrigger","rules","required","message","getFieldValue","validator","_","endTarget","Error","step","min","max","placeholder","startTarget","extra","adjustEndTime","onClick","resetFields","offset","type","loading","UploadOutlined","ref","AntdIcon","Object","assign","icon","displayName","noAction","subjectType","modalVisible","setModalVisible","uploadFile","setUploadFile","confirmUploadFile","setConfirmUploadFile","useGetAdjustComment","adjustComment","showUploadFile","setShowUploadFile","commentFileUrl","saveAndStartCommentAdjust","uploadTemplete","modalOkHandle","modalCancelHandle","uploadChange","file","status","response","success","position","zIndex","href","marginLeft","marginTop","title","visible","onOk","onCancel","showUploadList","accept","action","systemBasePath","data","domain","syncflag","onChange","placement","content","src","templte","namesList","getAverageScore","list","totalPerson","totalScore","item","i","finalScoreNum","score","toFixed","ScoreNumberControl","dramaInfo","scorelist","setScorelist","totalNum","setTotalNum","adjustAverageScore","setAdjustAverageScore","inputChange","index","newlist","averageScore","publicScoreDistribution","dramaScoreDistribution","JSON","parse","fiveStarCount","fourStarCount","threeStarCount","twoStarCount","oneStarCount","fourHalfStarCount","threeHalfStarCount","twoHalfStarCount","oneHalfStarCount","halfStarCount","scoreCount","total","count","key","a","b","scoreColumns","dataIndex","render","text","record","percent","showInfo","flex","margin","initialValue","e","resetHandle","newList","formValues","getFieldsValue","r","grades","console","log","sampleAdjustGrade","pagination","size","columns","dataSource","async","getGrowTrendList","requestBody","getPublicScoreTrendList","request","requestBasePath","method","body","requstParams","appId","APP_ID","entryVirtual","every","sort","ArrayPrototype","Array","prototype","it","own","parent","floor","Math","mergeSort","array","comparefn","middle","insertionSort","merge","slice","element","j","left","right","llength","rlength","lindex","rindex","result","push","userAgent","firefox","match","UA","test","webkit","$","$every","arrayMethodIsStrict","STRICT_METHOD","target","proto","forced","callbackfn","this","arguments","undefined","aFunction","toObject","toLength","fails","internalSort","FF","IE_OR_EDGE","V8","WEBKIT","nativeSort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STABLE_SORT","chr","String","fromCharCode","k","v","charAt","FORCED","getSortCompare","x","y","call","itemsLength","items","arrayLength"],"mappings":"0GAAAA,EAAOC,QAAU,EAAjB,Q,gBCAAD,EAAOC,QAAU,EAAjB,Q,mICKA,MAAmBC,EAAnB,cASaC,EAAoBC,IAC/B,MAAMC,EAAeC,IAAOF,GAAMG,QAAQD,OAAYA,aAAgBA,IAAOF,GAAMI,KAAKF,QAAaA,aAAgBA,MAASE,KAAKF,IAAOF,KAC1I,IAAIK,EAAQ,EAIZ,OAFAA,EAAQ,IAASJ,EAAaK,UAAY,IAEnC,CACLD,QACAE,KAAO,GAAG,IAASN,EAAaO,SAAW,cAIzCC,EAAuB,EAAGC,OAAMC,eAAe,qBAAOC,WAAW,OAAQC,QAAQ,CAAED,SAAU,OAAQE,MAAO,eAChH,SAAwBC,cAAQ,IACvBhB,EAAiBW,IACvB,CAACA,IAFIL,EAAR,EAAQA,MAAOE,EAAf,EAAeA,KAIf,OAAI,IAAIS,MAAOC,YAA8B,kBAATP,EAAoBA,EAAOR,IAAOQ,GAAMQ,YAAmB,iBAAML,MAAO,CAAEC,MAAO,WAAtB,SAAoCH,IAGjIN,GAAS,IACL,iBAAMQ,MAAQA,EAAd,SAAuBN,KAEvB,SAACT,EAAD,CAAeqB,MAAQT,EAAOU,WAAaP,KAKnD,K,wSClCA,MAAMQ,EAAW,SAwBXC,EAAmC,CACvCC,QAAS,eACTC,MAAO,OACPC,WAAY,OACZC,UAAW,UAGPC,EAAqC,CACzCJ,QAAS,eACTK,aAAc,KAGVC,EAA+BC,IACnC,QAAe,cAAf,eAAOC,EAAP,KACA,GAA0CC,eAAS,GAAnD,eAAOC,EAAP,KAAsBC,EAAtB,KACA,GAA8CF,eAAS,GAAvD,eAAOG,EAAP,KAAwBC,EAAxB,KACA,GAAgCC,QAAkBP,EAAMQ,SAAhDC,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,QAErBC,gBAAU,KACR,GAA8C,IAA1C,IAAYF,GAAe,IAAIG,OAAc,CAC/C,MAAQC,EAAyBJ,EAAzBI,WAAYC,EAAaL,EAAbK,SAEpBb,EAAKc,eAAe,CAClBF,aACAC,aAEFR,GAAmB,MAGpB,CAACN,EAAMQ,QAASC,EAAYO,UAAWP,EAAYQ,aAGtD,MAAMC,EAAe,KACnBjB,EAAKkB,iBACFC,MAAMC,IACLjB,GAAiB,GACjB,MAAQkB,EAAkCD,EAAlCC,KAAMC,EAA4BF,EAA5BE,OAAQC,EAAoBH,EAApBG,OAAWC,GAAjC,OAA0CJ,EAA1C,4BACMK,EAAa,IACdD,EACHT,UAAWhB,EAAMQ,QACjBmB,WAAa,GAAGL,KAAUC,KAAYC,MAIxCI,QAAkBF,GACfN,MAAMS,IACLzB,GAAiB,GACA,MAAbyB,EAAIC,OACN,kBAAgB,4BAChBpB,IACAV,EAAM+B,eAAiB/B,EAAM+B,oBAGhCC,OAAM,KACL5B,GAAiB,SAGtB4B,OAAM,KACL5B,GAAiB,OAIvB,OACE,UAAC,WAAD,YACE,eAAMH,KAAOA,EAAb,WACE,UAACV,EAAD,CAAU0C,MAAM,2BAAOlD,MAAO,CAAEe,aAAc,GAA9C,WACE,SAACP,EAAD,CAAUR,MAAO,CAAEU,QAAS,gBAC1ByC,KAAK,aACLC,gBAAgB,SAChBC,MAAQ,CACN,CAAEC,UAAU,EAAMC,QAAS,4BAC3B,EAAGC,oBAAH,CACEC,UAAUC,EAAQpD,GAChB,MAAMqD,EAAYH,EAAc,aAEhC,OAAIlD,GAASA,EAAQ,EACZ,WAAe,IAAIsD,MAAM,0CAE9BtD,GAASqD,EAAYrD,EAChB,WAAe,IAAIsD,MAAM,+CAG3B,kBAhBf,UAqBE,cAAaC,KAAO,GAClBC,IAAM,EACNC,IAAM,GACN/D,MAAO,CAAEW,MAAO,SAChBqD,YAAY,0BAIhB,iBAAMhE,MAAQS,EAAd,gBACA,SAACD,EAAD,CAAUR,MAAO,CAAEU,QAAS,gBAC1ByC,KAAK,WACLC,gBAAgB,SAChBC,MAAQ,CACN,CAAEC,UAAU,EAAMC,QAAS,4BAC3B,EAAGC,oBAAH,CACEC,UAAUC,EAAQpD,GAChB,MAAM2D,EAAcT,EAAc,eAElC,OAAIlD,GAASA,EAAQ,EACZ,WAAe,IAAIsD,MAAM,0CAE9BtD,GAAS2D,EAAc3D,EAClB,WAAe,IAAIsD,MAAM,+CAG3B,kBAhBf,UAqBE,cAAaC,KAAO,GAClBC,IAAM,EACNC,IAAM,GACN/D,MAAO,CAAEW,MAAO,SAChBqD,YAAY,6BAKlB,UAACxD,EAAD,CAAU0C,MAAM,2BACdgB,MAAQ5C,GAEJ,6DACE,iBAAMtB,MAAO,CAAEU,QAAS,gBAAxB,UACE,SAAC,IAAD,CAAWb,KAAO6B,EAAYyC,cAAgBrE,aAAa,qBAAME,MAAO,CAAEC,MAAO,sBAAuBS,QAAS,eAAgBX,SAAU,eAG/I,2BAASC,MAAO,CAAEe,aAAc,GARtC,WASE,SAACP,EAAD,CAAUR,MAAQc,EAChBqC,KAAK,OACLE,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,6BAFtC,UAIE,cAAaM,KAAO,EAAIC,IAAM,EAAI9D,MAAO,CAAEW,MAAO,SAAWqD,YAAY,oBAE3E,iBAAMhE,MAAQS,EAAd,gBACA,SAACD,EAAD,CAAUR,MAAQc,EAChBqC,KAAK,SACLE,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,6BAFtC,UAIE,cAAaM,KAAO,EAAIC,IAAM,EAAIC,IAAM,GAAK/D,MAAO,CAAEW,MAAO,SAAWqD,YAAY,oBAEtF,iBAAMhE,MAAQS,EAAd,gBACA,SAACD,EAAD,CAAUR,MAAQc,EAChBqC,KAAK,SACLE,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,6BAFtC,UAIE,cAAaM,KAAO,EAAIC,IAAM,EAAIC,IAAM,GAAK/D,MAAO,CAAEW,MAAO,SAAWqD,YAAY,oBAI1F,0BACE,wBACE,cAAQI,QAAU,KAChBlD,EAAKmD,eADP,6BAKF,cAAKC,OAAS,EAAd,UACE,cAAQC,KAAK,UAAUH,QAAUjC,EAAeqC,QAAUpD,EAA1D,+CAOV,K,gUC3MIqD,EAAiB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,gTAAoT,KAAQ,SAAU,MAAS,YAC3e,U,eCII,EAAiB,SAAwBxD,EAAOyD,GAClD,OAAoB,gBAAoBC,EAAA,EAAUC,OAAOC,OAAO,GAAI5D,EAAO,CACzEyD,IAAKA,EACLI,KAAM,MAIV,EAAeC,YAAc,iBAC7B,QAA4B,aAAiB,G,+ECO7C,MAAMvE,EAAW,SAwBXC,EAAmC,CACvCC,QAAS,eACTC,MAAO,OACPC,WAAY,OACZC,UAAW,UAGPC,EAAqC,CACzCJ,QAAS,eACTK,aAAc,KAGVC,EAA+BC,IACnC,QAAuDA,EAA/C+D,gBAAR,WAAuD/D,EAA7BgE,mBAA1B,MAAwC,UAAxC,EACA,EAAe,cAAf,eAAO/D,EAAP,KACA,GAAwCC,eAAS,GAAjD,eAAO+D,EAAP,KAAqBC,EAArB,KACA,GAAoChE,cAAmB,IAAvD,eAAOiE,EAAP,KAAmBC,EAAnB,KACA,GAAkDlE,cAAmB,IAArE,eAAOmE,EAAP,KAA0BC,EAA1B,KACA,GAA0CpE,eAAS,GAAnD,eAAOC,EAAP,KAAsBC,EAAtB,KACA,GAA8CF,eAAS,GAAvD,eAAOG,EAAP,KAAwBC,EAAxB,KACA,GAAkCiE,QAAoBvE,EAAMQ,QAASwD,GAA7DQ,EAAR,EAAQA,cAAe9D,GAAvB,EAAuBA,OACvB,IAA4CR,eAAS,GAArD,iBAAOuE,GAAP,MAAuBC,GAAvB,OAEA/D,gBAAU,KACwC,IAA5C,IAAY6D,GAAiB,IAAI5D,QACnCN,GAAmB,KAEpB,CAACN,EAAMQ,QAASgE,EAAcxD,UAAWwD,EAAcvD,aAE1D,MAAMC,GAAe,KACnBjB,EACGkB,iBACAC,MAAMC,IACLjB,GAAiB,GACjB,MAAQkB,EAAkCD,EAAlCC,KAAMC,EAA4BF,EAA5BE,OAAQC,EAAoBH,EAApBG,OAAWC,GAAjC,OAA0CJ,EAA1C,4BACMK,EAAa,CACjBV,UAAWhB,EAAMQ,QACjBmB,WAAa,GAAGL,KAAUC,KAAYC,IACtCmD,eAAgBlD,EAAKkD,eACrBX,aAAkB,OAALhE,QAAK,IAALA,OAAA,EAAAA,EAAOgE,cAAe,YAGrCY,QAA0BlD,GACvBN,MAAMS,IACLzB,GAAiB,GACA,MAAbyB,EAAIC,OACNQ,EAAA,gBAAgB,4BAChB5B,KACAV,EAAM+B,eAAiB/B,EAAM+B,oBAGhCC,OAAM,KACL5B,GAAiB,SAGtB4B,OAAM,KACL5B,GAAiB,OAIjByE,GAAiB,KACrBX,GAAgB,IAGZY,GAAgB,KACpBZ,GAAgB,GACZC,EAAWQ,iBACbD,IAAkB,GAClBJ,EAAqBH,GACrBlE,EAAKc,eAAe,CAClB4D,eAAgBR,EAAWQ,mBAK3BI,GAAoB,KAEpBV,EAAkBM,gBACpBP,EAAcC,GAEhBH,GAAgB,IAGZc,GAAe,EAAGC,WACtB,MAAQ/C,EAA2B+C,EAA3B/C,KAAMgD,EAAqBD,EAArBC,OAAQC,EAAaF,EAAbE,SAEtB,GAAe,cAAXD,EAAwB,CAC1B,QAA6CC,GAAY,GAAxCR,EAAjB,EAAQrC,QAAyB8C,EAAjC,EAAiCA,QAE7BA,EACFhB,EAAc,CACZlC,OACAyC,mBAGFrC,EAAA,aAAa,wEAKnB,OACE,UAAC,WAAD,YACE,eAAMrC,KAAOA,EAAb,WACE,UAACV,EAAD,CAAU0C,MAAM,2BACdgB,MACE5C,GACE,6DAEE,iBAAMtB,MAAO,CAAEU,QAAS,gBAAxB,UACE,SAACd,EAAA,EAAD,CAAWC,KAAO4F,EAActB,cAC9BrE,aAAa,qBACbE,MAAO,CACLC,MAAO,sBACPS,QAAS,eACTX,SAAU,eAMlB,2BAGJC,MAAO,CAAEe,aAAc,GApBzB,WAsBE,SAACP,EAAD,CAAUR,MAAQc,EAChBqC,KAAK,OACLE,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,6BAFtC,UAIE,cAAaM,KAAO,EAClBC,IAAM,EACN9D,MAAO,CAAEW,MAAO,SAChBqD,YAAY,oBAGhB,iBAAMhE,MAAQS,EAAd,gBACA,SAACD,EAAD,CAAUR,MAAQc,EAChBqC,KAAK,SACLE,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,6BAFtC,UAIE,cAAaM,KAAO,EAClBC,IAAM,EACNC,IAAM,GACN/D,MAAO,CAAEW,MAAO,SAChBqD,YAAY,oBAGhB,iBAAMhE,MAAQS,EAAd,gBACA,SAACD,EAAD,CAAUR,MAAQc,EAChBqC,KAAK,SACLE,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,6BAFtC,UAIE,cAAaM,KAAO,EAClBC,IAAM,EACNC,IAAM,GACN/D,MAAO,CAAEW,MAAO,SAChBqD,YAAY,iBAIlB,SAACxD,EAAD,CAAU0C,MAAM,2BAAhB,UACE,iBAAKlD,MAAO,CAAEU,QAAS,eAAgBE,WAAY,QAAnD,WACE,cAAQ2D,KAAK,OACXH,QAAU0B,GACV9F,MAAO,CACLsG,SAAU,WACVC,OAAQ,IAJZ,kDASCjB,EAAkBM,gBAAkBF,KACnC,cAAGc,KAAOlB,EAAkBM,eAC1B5F,MAAO,CACLU,QAAS,QACT4F,SAAU,WACVC,OAAQ,GACRE,WAAY,QALhB,SAQGnB,EAAkBnC,QAGvB,SAAC3C,EAAD,CAAU2C,KAAK,iBACbnD,MAAO,CAAE0G,UAAW,QAASD,WAAY,QACzCpD,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,mCAFtC,UAIE,cAAOvD,MAAO,CAAEU,QAAS,qBAMjC,eAAOiG,MAAM,2BACXhG,MAAQ,IACRiG,QAAU1B,EACV2B,KAAOd,GACPe,SAAWd,GAJb,WAME,iBAAKhG,MAAO,CAAEa,UAAW,UAAzB,4CAEE,cAAQkG,gBAAiB,EACvBC,OAAO,8FACPhH,MAAO,CAAEyG,WAAY,QACrBQ,OAAU,GAAGC,sCACb/D,KAAK,WACLgE,KAAM,CACJC,OAAQ,kBACRC,SAAU,GAEZC,SAAWrB,GATb,UAWE,cAAQ1B,KAAK,UAAUO,MAAO,SAAC,EAAD,IAA9B,wCAIDM,EAAWQ,iBACV,cAAGY,KAAOpB,EAAWQ,eACnB5F,MAAO,CAAE0G,UAAW,OAAQhG,QAAS,SADvC,SAGG0E,EAAWjC,WAIlB,iBAAKnD,MAAO,CAAEa,UAAW,SAAU6F,UAAW,QAA9C,2CAEE,cAASa,UAAU,SACjBC,SAAU,gBAAKC,IAAMC,IAAU1H,MAAO,CAAEW,MAAO,WADjD,UAGE,iBAAMX,MAAO,CAAEC,MAAO,UAAWwG,WAAY,QAA7C,0DAMLzB,GACC,cAAKhF,MAAO,CAACC,MAAO,OAApB,mGAEA,0BACE,wBACE,cAAQmE,QAAU,KAChBlD,EAAKmD,eADP,6BAOF,cAAKC,OAAS,EAAd,UACE,cAAQC,KAAK,UACXH,QAAUjC,GACVqC,QAAUpD,EAFZ,+CAaZ,K,8WCnSA,MAAMZ,EAAW,SAkBXmH,EAAY,CAChB,gBACA,eACA,mBACA,eACA,mBACA,iBACA,qBACA,gBACA,oBACA,iBAGIC,EAAmBC,IACvB,IAAIC,EAAc,EACdC,EAAa,EAMjB,OAJA,IAAAF,GAAI,KAAJA,GAAa,CAACG,EAAWC,KACvBH,GAAeE,EAAKE,cACpBH,GAAcC,EAAKE,cAAgBF,EAAKG,SAEtCL,EAAc,GACRC,EAAaD,GAAaM,QAAQ,GAGrC,KAGHC,EAAiCpH,IACrC,MAAQqH,EAAuCrH,EAAvCqH,UAAR,EAA+CrH,EAA5BgE,mBAAnB,MAAiC,UAAjC,EACA,EAAe,cAAf,eAAO/D,EAAP,KACA,GAAkCC,cAAqB,IAAvD,eAAOoH,EAAP,KAAkBC,EAAlB,KACA,GAA0CrH,eAAS,GAAnD,eAAOC,EAAP,KAAsBC,EAAtB,KACA,GAAgCF,cAAS,GAAzC,eAAOsH,EAAP,KAAiBC,EAAjB,KACA,GAAoDvH,cAAS,IAA7D,eAAOwH,EAAP,KAA2BC,EAA3B,KAGMC,EAAc,CAACvI,EAAewI,KAClC,MAAMC,EAAU,IAAIR,GAEpBQ,EAAQD,GAAO,iBAAmBC,EAAQD,GAAO,SAAWxI,EAC5D,MAAM0I,EAAepB,EAAgBmB,GAErCH,EAAsBI,GAEtBR,EAAaO,KAGfnH,gBAAU,KACRV,EAAKmD,cACL,QAA2CiE,GAAa,GAAxD,IAAQW,+BAAR,MAAkC,KAAlC,EACMC,EAAyBC,KAAKC,MAAMH,GAC1C,EAkBIC,EAjBFG,qBADF,MACkB,EADlB,IAkBIH,EAhBFI,qBAFF,MAEkB,EAFlB,IAkBIJ,EAfFK,sBAHF,MAGmB,EAHnB,IAkBIL,EAdFM,oBAJF,MAIiB,EAJjB,IAkBIN,EAbFO,oBALF,MAKiB,EALjB,IAkBIP,EAZFQ,yBANF,MAMsB,EANtB,IAkBIR,EAXFS,0BAPF,MAOuB,EAPvB,IAkBIT,EAVFU,wBARF,MAQqB,EARrB,IAkBIV,EATFW,wBATF,MASqB,EATrB,IAkBIX,EARFY,qBAVF,MAUkB,EAVlB,EAkBIZ,EAPFa,WASF,IAAIC,EAAQ,EACRnC,EAAO,CACT,CAAEoC,MAAOH,EAAeI,IAAK,GAAI/B,MAAO,GACxC,CAAE8B,MAAOR,EAAcS,IAAK,EAAG/B,MAAO,GACtC,CAAE8B,MAAOJ,EAAkBK,IAAK,EAAG/B,MAAO,GAC1C,CAAE8B,MAAOT,EAAcU,IAAK,EAAG/B,MAAO,GACtC,CAAE8B,MAAOL,EAAkBM,IAAK,EAAG/B,MAAO,GAC1C,CACE8B,MAAOV,EAEPW,IAAK,EACL/B,MAAO,GAET,CAAE8B,MAAON,EAAoBO,IAAK,EAAG/B,MAAO,GAC5C,CAAE8B,MAAOX,EAAeY,IAAK,EAAG/B,MAAO,GACvC,CAAE8B,MAAOP,EAAmBQ,IAAK,EAAG/B,MAAO,GAC3C,CAAE8B,MAAOZ,EAAea,IAAK,EAAG/B,MAAO,KAGzCN,EAAO,IAAAA,GAAI,KAAJA,GAAUG,IACR,IAAKA,EAAME,cAAeF,EAAKiC,UAGxCpC,EAAO,IAAAA,GAAI,KAAJA,GAAU,CAACsC,EAAGC,IAAMD,EAAEhC,MAAQiC,EAAEjC,QAEvC,IAAAN,GAAI,KAAJA,GAAcG,IACZgC,GAAShC,EAAKiC,SAGhB,MAAMjB,EAAepB,EAAgBC,GAErCe,EAAsBI,GACtBN,EAAYsB,GACZxB,EAAaX,KACZ,CAACS,EAAU7G,QAAS6G,EAAUW,0BAEjC,MAAMoB,EAAe,CACnB,CACE1D,MAAO,uCACP2D,UAAW,QACXJ,IAAK,QACLvJ,MAAO,MACP4J,OAAQ,CAACC,EAAe,EAAGC,EAAkB3B,KAC3C,iBAAK9I,MAAO,CAAEU,QAAS,QAAvB,WACE,iBAAMV,MAAO,CAAEU,QAAS,eAAgBC,MAAO,QAA/C,SACI,GAAG4H,EAAUO,GAAOX,uBAExB,cAAUuC,QAAUjC,EAAY+B,EAAO/B,EAAY,IAAM,EACvDkC,UAAW,EACX3K,MAAO,CAAE4K,KAAM,MAEjB,iBAAM5K,MAAO,CAAEU,QAAS,eAAgBC,MAAO,OAAQkK,OAAQ,UAA/D,SAEI,GAAGL,gBAKb,CACE7D,MAAO,2BACP2D,UAAW,QACXJ,IAAK,QACLK,OAAQ,CAACC,EAAcC,EAAkB3B,KACvC,SAACtI,EAAD,CAAU2C,KAAOwE,EAAUmB,GACzBgC,aAAe,EACf9K,MAAO,CAAEe,aAAc,GAFzB,UAIE,cAAa8C,KAAO,EAClBC,IAAM,EACNC,IAAM,IACNuD,SAAYyD,GAAclC,EAAYkC,EAAGjC,QAKjD,CACEnC,MAAO,eACP2D,UAAW,gBACXJ,IAAK,gBACLK,OAASC,GAAkB,GAAGA,YAI5BQ,EAAc,KAClB9J,EAAKmD,cACL,MAAM4G,EAAU,IAAA1C,GAAS,KAATA,GAAeP,IAAD,IACzBA,EACHE,cAAeF,EAAKiC,UAEhBjB,EAAepB,EAAgBqD,GAErCrC,EAAsBI,GACtBR,EAAayC,IAGT9I,EAAe,KAAM,QACzB,MAAM+I,EAAahK,EAAKiK,iBAExB,GAAI,UAAeD,IAAf,QAAkCE,IAAYA,EAAE,KAGlD,YAFA,eAAa,4EAIf,MAAMC,EAAS,UAAeH,IAAf,QACPE,GAAWA,EAAE,KAIrBE,QAAQC,IAAI,SAAUF,GAEtBhK,GAAiB,IACjBmK,QAAkB,CAChBH,SACApJ,UAAWqG,EAAU7G,QACrBwD,eACCiG,GACA7I,MAAMS,IACY,MAAbA,EAAIC,MACN,kBAAgB,4GAChB9B,EAAM+B,eAAiB/B,EAAM+B,gBAC7B3B,GAAiB,IAEjBA,GAAiB,MAGpB4B,OAAM,KACL5B,GAAiB,OAIvB,OACE,UAAC,WAAD,YACE,cAAMH,KAAOA,EAAb,UACE,cAAOuK,YAAa,EAClBC,KAAK,QACLC,QAAUtB,EACVuB,WAAarD,OAGjB,cAAKvI,MAAO,CAAE0G,UAAW,QAAzB,UACE,eAAK1G,MAAO,CAAED,SAAU,QAAxB,yEACa,KACX,iBAAMC,MAAO,CAAEC,MAAO,oBAAtB,SACG0I,IACK,IAJV,eAQF,eAAK3I,MAAO,CAAE0G,UAAW,QAAzB,WACE,wBACE,cAAQtC,QAAU4G,EAAlB,6BAEF,cAAK1G,OAAS,EAAd,UACE,cAAQC,KAAK,UAAUH,QAAUjC,EAAeqC,QAAUpD,EAA1D,+CASV,K,wHChQOyK,eAAeC,EAAiBC,GASrC,MAAM5E,EAAO,CACX,KAAQ,IACR,MAAS,IACT,QAAW,UACX,YAAe,GACf,KAAQ,CAAC,CACP,KAAQ,WACR,MAAS,IAEX,SAAW,EACX,IAAO,WAGT,OAAOA,EAIF0E,eAAeG,EAAwBD,GAC5C,aAAaE,QACV,GAAGC,qEACJ,CACEC,OAAQ,OACRC,KAAML,IAMLF,eAAehJ,EAAkBwJ,GACtC,aAAaJ,QAAS,GAAGC,kCAA+C,CACtEC,OAAQ,OACRC,KAAMC,IAKHR,eAAehG,EAA0BwG,GAC9C,aAAaJ,QAAS,GAAGC,yCAAsD,CAC7EC,OAAQ,OACRC,KAAM,IAAKC,EAAcC,MAAOC,QAK7BV,eAAeL,EACpBa,EAAwCnB,GAUxC,aAAae,QAAS,GAAGC,iCAA8C,CACrEC,OAAQ,OACRC,KAAMC,M,gBC7EVtN,EAAOC,QAAU,IAA0B,gC,gBCA3C,EAAQ,OACR,IAAIwN,EAAe,EAAQ,OAE3BzN,EAAOC,QAAUwN,EAAa,SAASC,O,eCHvC,EAAQ,MACR,IAAID,EAAe,EAAQ,OAE3BzN,EAAOC,QAAUwN,EAAa,SAASE,M,gBCHvC,IAAID,EAAQ,EAAQ,OAEhBE,EAAiBC,MAAMC,UAE3B9N,EAAOC,QAAU,SAAU8N,GACzB,IAAIC,EAAMD,EAAGL,MACb,OAAOK,IAAOH,GAAmBG,aAAcF,OAASG,IAAQJ,EAAeF,MAASA,EAAQM,I,gBCNlG,IAAIL,EAAO,EAAQ,MAEfC,EAAiBC,MAAMC,UAE3B9N,EAAOC,QAAU,SAAU8N,GACzB,IAAIC,EAAMD,EAAGJ,KACb,OAAOI,IAAOH,GAAmBG,aAAcF,OAASG,IAAQJ,EAAeD,KAAQA,EAAOK,I,gBCNhG,IAAIC,EAAS,EAAQ,OAErBjO,EAAOC,QAAUgO,G,gBCFjB,IAAIA,EAAS,EAAQ,OAErBjO,EAAOC,QAAUgO,G,UCDjB,IAAIC,EAAQC,KAAKD,MAEbE,EAAY,SAAUC,EAAOC,GAC/B,IAAIxL,EAASuL,EAAMvL,OACfyL,EAASL,EAAMpL,EAAS,GAC5B,OAAOA,EAAS,EAAI0L,EAAcH,EAAOC,GAAaG,EACpDL,EAAUC,EAAMK,MAAM,EAAGH,GAASD,GAClCF,EAAUC,EAAMK,MAAMH,GAASD,GAC/BA,IAIAE,EAAgB,SAAUH,EAAOC,GACnC,IAEIK,EAASC,EAFT9L,EAASuL,EAAMvL,OACfoG,EAAI,EAGR,MAAOA,EAAIpG,EAAQ,CACjB8L,EAAI1F,EACJyF,EAAUN,EAAMnF,GAChB,MAAO0F,GAAKN,EAAUD,EAAMO,EAAI,GAAID,GAAW,EAC7CN,EAAMO,GAAKP,IAAQO,GAEjBA,IAAM1F,MAAKmF,EAAMO,GAAKD,GAC1B,OAAON,GAGPI,EAAQ,SAAUI,EAAMC,EAAOR,GACjC,IAAIS,EAAUF,EAAK/L,OACfkM,EAAUF,EAAMhM,OAChBmM,EAAS,EACTC,EAAS,EACTC,EAAS,GAEb,MAAOF,EAASF,GAAWG,EAASF,EAC9BC,EAASF,GAAWG,EAASF,EAC/BG,EAAOC,KAAKd,EAAUO,EAAKI,GAASH,EAAMI,KAAY,EAAIL,EAAKI,KAAYH,EAAMI,MAEjFC,EAAOC,KAAKH,EAASF,EAAUF,EAAKI,KAAYH,EAAMI,MAExD,OAAOC,GAGXnP,EAAOC,QAAUmO,G,gBC5CjB,IAAIiB,EAAY,EAAQ,MAEpBC,EAAUD,EAAUE,MAAM,mBAE9BvP,EAAOC,UAAYqP,IAAYA,EAAQ,I,gBCJvC,IAAIE,EAAK,EAAQ,MAEjBxP,EAAOC,QAAU,eAAewP,KAAKD,I,gBCFrC,IAAIH,EAAY,EAAQ,MAEpBK,EAASL,EAAUE,MAAM,wBAE7BvP,EAAOC,UAAYyP,IAAWA,EAAO,I,6BCHrC,IAAIC,EAAI,EAAQ,OACZC,EAAS,cACTC,EAAsB,EAAQ,OAE9BC,EAAgBD,EAAoB,SAIxCF,EAAE,CAAEI,OAAQ,QAASC,OAAO,EAAMC,QAASH,GAAiB,CAC1DpC,MAAO,SAAewC,GACpB,OAAON,EAAOO,KAAMD,EAAYE,UAAUtN,OAAS,EAAIsN,UAAU,QAAKC,O,4BCV1E,IAAIV,EAAI,EAAQ,OACZW,EAAY,EAAQ,OACpBC,EAAW,EAAQ,OACnBC,EAAW,EAAQ,OACnBC,EAAQ,EAAQ,OAChBC,EAAe,EAAQ,OACvBb,EAAsB,EAAQ,OAC9Bc,EAAK,EAAQ,OACbC,EAAa,EAAQ,OACrBC,EAAK,EAAQ,OACbC,EAAS,EAAQ,OAEjBrB,EAAO,GACPsB,EAAatB,EAAK9B,KAGlBqD,EAAqBP,GAAM,WAC7BhB,EAAK9B,UAAK0C,MAGRY,EAAgBR,GAAM,WACxBhB,EAAK9B,KAAK,SAGRmC,EAAgBD,EAAoB,QAEpCqB,GAAeT,GAAM,WAEvB,GAAII,EAAI,OAAOA,EAAK,GACpB,KAAIF,GAAMA,EAAK,GAAf,CACA,GAAIC,EAAY,OAAO,EACvB,GAAIE,EAAQ,OAAOA,EAAS,IAE5B,IACI9M,EAAMmN,EAAK5P,EAAOwI,EADlBoF,EAAS,GAIb,IAAKnL,EAAO,GAAIA,EAAO,GAAIA,IAAQ,CAGjC,OAFAmN,EAAMC,OAAOC,aAAarN,GAElBA,GACN,KAAK,GAAI,KAAK,GAAI,KAAK,GAAI,KAAK,GAAIzC,EAAQ,EAAG,MAC/C,KAAK,GAAI,KAAK,GAAIA,EAAQ,EAAG,MAC7B,QAASA,EAAQ,EAGnB,IAAKwI,EAAQ,EAAGA,EAAQ,GAAIA,IAC1B0F,EAAKL,KAAK,CAAEkC,EAAGH,EAAMpH,EAAOwH,EAAGhQ,IAMnC,IAFAkO,EAAK9B,MAAK,SAAUvC,EAAGC,GAAK,OAAOA,EAAEkG,EAAInG,EAAEmG,KAEtCxH,EAAQ,EAAGA,EAAQ0F,EAAK3M,OAAQiH,IACnCoH,EAAM1B,EAAK1F,GAAOuH,EAAEE,OAAO,GACvBrC,EAAOqC,OAAOrC,EAAOrM,OAAS,KAAOqO,IAAKhC,GAAUgC,GAG1D,MAAkB,gBAAXhC,MAGLsC,EAAST,IAAuBC,IAAkBnB,IAAkBoB,EAEpEQ,EAAiB,SAAUpD,GAC7B,OAAO,SAAUqD,EAAGC,GAClB,YAAUvB,IAANuB,GAAyB,OACnBvB,IAANsB,EAAwB,OACVtB,IAAd/B,GAAiCA,EAAUqD,EAAGC,IAAM,EACjDR,OAAOO,GAAKP,OAAOQ,GAAK,GAAK,IAMxCjC,EAAE,CAAEI,OAAQ,QAASC,OAAO,EAAMC,OAAQwB,GAAU,CAClD9D,KAAM,SAAcW,QACA+B,IAAd/B,GAAyBgC,EAAUhC,GAEvC,IAAID,EAAQkC,EAASJ,MAErB,GAAIe,EAAa,YAAqBb,IAAd/B,EAA0ByC,EAAWc,KAAKxD,GAAS0C,EAAWc,KAAKxD,EAAOC,GAElG,IAEIwD,EAAa/H,EAFbgI,EAAQ,GACRC,EAAcxB,EAASnC,EAAMvL,QAGjC,IAAKiH,EAAQ,EAAGA,EAAQiI,EAAajI,IAC/BA,KAASsE,GAAO0D,EAAM3C,KAAKf,EAAMtE,IAGvCgI,EAAQrB,EAAaqB,EAAOL,EAAepD,IAC3CwD,EAAcC,EAAMjP,OACpBiH,EAAQ,EAER,MAAOA,EAAQ+H,EAAazD,EAAMtE,GAASgI,EAAMhI,KACjD,MAAOA,EAAQiI,SAAoB3D,EAAMtE,KAEzC,OAAOsE","file":"7911.37e096a7.async.js","sourcesContent":["module.exports = require(\"core-js-pure/features/instance/every\");","module.exports = require(\"core-js-pure/features/instance/sort\");","import React, { FC, useMemo } from 'react';\nimport { Statistic } from 'antd';\nimport moment from 'moment';\nimport { css } from '@emotion/core';\n\nconst { Countdown: TimeCountdown } = Statistic;\n\nexport interface Props {\n  time: number | string;\n  overTimeText?: string;\n  style?: React.CSSProperties;\n  fontSize?: number | string;\n}\n\nexport const formatExpireTime = (date: any) => {\n  const milliSeconds = moment(date).isAfter(moment()) ? moment.duration(moment(date).diff(moment())) : moment.duration(moment().diff(moment(date)));\n  let hours = 0;\n\n  hours = parseInt(milliSeconds.asHours() + '');\n\n  return {\n    hours,\n    days: `${ parseInt(milliSeconds.asDays() + '') }天`\n  };\n};\n\nconst Countdown: FC<Props> = ({ time, overTimeText = '已超时', fontSize = '14px', style = { fontSize: '14px', color: '#1890ff' } }: Props) => {\n  const { hours, days } = useMemo(() => {\n    return formatExpireTime(time);\n  }, [time]);\n\n  if (new Date().getTime() >= (typeof time === 'number' ? time : moment(time).valueOf())) return <span style={{ color: '#f81d22' }}>{overTimeText}</span>;\n\n  return (\n    hours >= 24\n      ? <span style={ style }>{days}</span>\n      : (\n        <TimeCountdown value={ time } valueStyle={ style } />\n      )\n  );\n};\n\nexport default Countdown;\n","import React, { FC, useState, useEffect } from 'react';\nimport { Form, InputNumber, Row, Col, Button, message } from 'antd';\nimport { UploadFile } from 'antd/lib/upload/interface';\nimport { dealCommentReport } from '../../pages/DataManage/DataControl/services';\nimport { useGetAdjustGrade } from '@/services/publicServices';\nimport Countdown from '@/components/Countdown';\n\n\nconst FormItem = Form.Item;\n\ninterface FileInfo {\n  name?: string;\n  commentFileUrl?: string;\n}\ninterface UploadFileType {\n  file: UploadFile;\n}\n\ninterface Props {\n  dramaId: string;\n  successHandle?: () => void;\n}\n\ninterface FormValue {\n  startGrade: number;\n  endGrade: number;\n  commentFileUrl?: string;\n  hour: number;\n  minute: number;\n  second: number;\n}\n\nconst divideStyle: React.CSSProperties = {\n  display: 'inline-block',\n  width: '24px',\n  lineHeight: '32px',\n  textAlign: 'center'\n};\n\nconst timeFormStyle: React.CSSProperties = {\n  display: 'inline-block',\n  marginBottom: '0'\n};\n\nconst DataInputControl: FC<Props> = (props: Props) => {\n  const [form] = Form.useForm();\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [showAdjustGrade, setShowAdjustGrade] = useState(false);\n  const { adjustGrade, mutate } = useGetAdjustGrade(props.dramaId);\n\n  useEffect(() => {\n    if (Object.keys(adjustGrade || {}).length !== 0) {\n      const { startGrade, endGrade } = adjustGrade;\n\n      form.setFieldsValue({\n        startGrade,\n        endGrade,\n      });\n      setShowAdjustGrade(true);\n    }\n    \n  }, [props.dramaId, adjustGrade.subjectId, adjustGrade.updateTime]);\n  \n\n  const modifyHandle = () => {\n    form.validateFields()\n      .then((values: FormValue) => {\n        setSubmitLoading(true);\n        const { hour, minute, second, ...rest } = values;\n        const sendParams = {\n          ...rest,\n          subjectId: props.dramaId,\n          adjustTime: `${ hour }-${ minute }-${ second }`\n        };\n        \n\n        dealCommentReport(sendParams)\n          .then((res: any) => {\n            setSubmitLoading(false);\n            if (res.code === 200) {\n              message.success('操作成功');\n              mutate();\n              props.successHandle && props.successHandle();\n            }\n          })\n          .catch(() => {\n            setSubmitLoading(false);\n          });\n      })\n      .catch(() => {\n        setSubmitLoading(false);\n      });\n  };\n  \n  return (\n    <React.Fragment>\n      <Form form={ form }>\n        <FormItem label=\"调控目标\" style={{ marginBottom: 0 }}>\n          <FormItem style={{ display: 'inline-block' }}\n            name=\"startGrade\"\n            validateTrigger=\"onBlur\"\n            rules={ [\n              { required: true, message: '该项必输' },\n              ({ getFieldValue }: any) => ({\n                validator(_: any, value: number) {\n                  const endTarget = getFieldValue('endTarget');\n\n                  if (value && value < 2) {\n                    return Promise.reject(new Error('分数不能低于2'));\n                  }\n                  if (value && endTarget < value) {\n                    return Promise.reject(new Error('不能大于结束分'));\n                  }\n\n                  return Promise.resolve();\n                },\n              })\n            ] }\n          >\n            <InputNumber step={ 0.1 }\n              min={ 0 }\n              max={ 10 }\n              style={{ width: '120px' }}\n              placeholder=\"起始分\"\n              // onChange={ () => form.validateFields(['endTarget']) }\n            />\n          </FormItem>\n          <span style={ divideStyle }>-</span>\n          <FormItem style={{ display: 'inline-block' }}\n            name=\"endGrade\"\n            validateTrigger=\"onBlur\"\n            rules={ [\n              { required: true, message: '该项必输' },\n              ({ getFieldValue }: any) => ({\n                validator(_: any, value: number) {\n                  const startTarget = getFieldValue('startTarget');\n                  \n                  if (value && value < 2) {\n                    return Promise.reject(new Error('分数不能低于2'));\n                  }\n                  if (value && startTarget > value) {\n                    return Promise.reject(new Error('不能小于起始分'));\n                  }\n\n                  return Promise.resolve();\n                },\n              })\n            ] }\n          >\n            <InputNumber step={ 0.1 }\n              min={ 0 }\n              max={ 10 }\n              style={{ width: '120px' }}\n              placeholder=\"结束分\"\n              // onChange={ () => form.validateFields(['startTarget']) }\n            />\n          </FormItem>\n        </FormItem>\n        <FormItem label=\"调控时间\"\n          extra={ showAdjustGrade\n            ? (\n              <div>剩余时间：\n                <span style={{ display: 'inline-block' }}>\n                  <Countdown time={ adjustGrade.adjustEndTime } overTimeText=\"已过期\" style={{ color: 'rgba(0, 0, 0, 0.45)', display: 'inline-block', fontSize: '14px' }} />\n                </span>\n              </div>)\n            : '剩余时间' } style={{ marginBottom: 0 }}>\n          <FormItem style={ timeFormStyle }\n            name=\"hour\"\n            rules={ [{ required: true, message: '该项必输' }] }\n          >\n            <InputNumber step={ 1 } min={ 0 } style={{ width: '120px' }} placeholder=\"小时\" />\n          </FormItem>\n          <span style={ divideStyle }>:</span>\n          <FormItem style={ timeFormStyle }\n            name=\"minute\"\n            rules={ [{ required: true, message: '该项必输' }] }\n          >\n            <InputNumber step={ 1 } min={ 0 } max={ 59 } style={{ width: '120px' }} placeholder=\"分钟\" />\n          </FormItem>\n          <span style={ divideStyle }>:</span>\n          <FormItem style={ timeFormStyle }\n            name=\"second\"\n            rules={ [{ required: true, message: '该项必输' }] }\n          >\n            <InputNumber step={ 1 } min={ 0 } max={ 59 } style={{ width: '120px' }} placeholder=\"秒\" />\n          </FormItem>\n        </FormItem>\n      </Form>\n      <Row>\n        <Col>\n          <Button onClick={ () => {\n            form.resetFields();\n          } }>重置\n          </Button>\n        </Col>\n        <Col offset={ 2 }>\n          <Button type=\"primary\" onClick={ modifyHandle } loading={ submitLoading }>确定修改</Button>\n        </Col>\n      </Row>\n    </React.Fragment>\n  );\n};\n\nexport default DataInputControl;\n","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UploadOutlined = function UploadOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: UploadOutlinedSvg\n  }));\n};\n\nUploadOutlined.displayName = 'UploadOutlined';\nexport default /*#__PURE__*/React.forwardRef(UploadOutlined);","import React, { FC, useState, useEffect } from 'react';\nimport {\n  Form,\n  Upload,\n  Modal,\n  InputNumber,\n  Row,\n  Col,\n  Button,\n  Popover,\n  message,\n  Input,\n} from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\nimport templte from './templete.png';\nimport systemBasePath from '@/services/login';\nimport { UploadFile } from 'antd/lib/upload/interface';\nimport { saveAndStartCommentAdjust } from '../../pages/DataManage/DataControl/services';\nimport { useGetAdjustComment } from '@/services/publicServices';\nimport Countdown from '@/components/Countdown';\n\nconst FormItem = Form.Item;\n\ninterface FileInfo {\n  name?: string;\n  commentFileUrl?: string;\n}\ninterface UploadFileType {\n  file: UploadFile;\n}\n\ninterface Props {\n  dramaId: string;\n  successHandle?: () => void;\n  subjectType?: string;\n}\n\ninterface FormValue {\n  endGrade: number;\n  commentFileUrl?: string;\n  hour: number;\n  minute: number;\n  second: number;\n}\n\nconst divideStyle: React.CSSProperties = {\n  display: 'inline-block',\n  width: '24px',\n  lineHeight: '32px',\n  textAlign: 'center',\n};\n\nconst timeFormStyle: React.CSSProperties = {\n  display: 'inline-block',\n  marginBottom: '0',\n};\n\nconst DataInputControl: FC<Props> = (props: Props) => {\n  const { noAction = false, subjectType = 'default', } = props;\n  const [form] = Form.useForm();\n  const [modalVisible, setModalVisible] = useState(false);\n  const [uploadFile, setUploadFile] = useState<FileInfo>({});\n  const [confirmUploadFile, setConfirmUploadFile] = useState<FileInfo>({});\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [showAdjustGrade, setShowAdjustGrade] = useState(false);\n  const { adjustComment, mutate } = useGetAdjustComment(props.dramaId, subjectType);\n  const [showUploadFile, setShowUploadFile] = useState(false);\n\n  useEffect(() => {\n    if (Object.keys(adjustComment || {}).length !== 0) {\n      setShowAdjustGrade(true);\n    }\n  }, [props.dramaId, adjustComment.subjectId, adjustComment.updateTime]);\n\n  const modifyHandle = () => {\n    form\n      .validateFields()\n      .then((values: FormValue) => {\n        setSubmitLoading(true);\n        const { hour, minute, second, ...rest } = values;\n        const sendParams = {\n          subjectId: props.dramaId,\n          adjustTime: `${ hour }-${ minute }-${ second }`,\n          commentFileUrl: rest.commentFileUrl,\n          subjectType: props?.subjectType || 'default',\n        };\n\n        saveAndStartCommentAdjust(sendParams)\n          .then((res: any) => {\n            setSubmitLoading(false);\n            if (res.code === 200) {\n              message.success('操作成功');\n              mutate();\n              props.successHandle && props.successHandle();\n            }\n          })\n          .catch(() => {\n            setSubmitLoading(false);\n          });\n      })\n      .catch(() => {\n        setSubmitLoading(false);\n      });\n  };\n\n  const uploadTemplete = () => {\n    setModalVisible(true);\n  };\n\n  const modalOkHandle = () => {\n    setModalVisible(false);\n    if (uploadFile.commentFileUrl) {\n      setShowUploadFile(true);\n      setConfirmUploadFile(uploadFile);\n      form.setFieldsValue({\n        commentFileUrl: uploadFile.commentFileUrl,\n      });\n    }\n  };\n\n  const modalCancelHandle = () => {\n    // 取消时，将uploadFile修改为之前的confirmUploadFile，表示上传本次操作不生效，避免下次打开弹窗仍然是上次不生效的文件\n    if (confirmUploadFile.commentFileUrl) {\n      setUploadFile(confirmUploadFile);\n    }\n    setModalVisible(false);\n  };\n\n  const uploadChange = ({ file }: UploadFileType) => {\n    const { name, status, response } = file;\n\n    if (status !== 'uploading') {\n      const { message: commentFileUrl, success } = response || {};\n\n      if (success) {\n        setUploadFile({\n          name,\n          commentFileUrl,\n        });\n      } else {\n        message.warn('上传失败，请重新上传！');\n      }\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <Form form={ form }>\n        <FormItem label=\"灌评时间\"\n          extra={\n            showAdjustGrade ? (\n              <div>\n                剩余时间：\n                <span style={{ display: 'inline-block' }}>\n                  <Countdown time={ adjustComment.adjustEndTime }\n                    overTimeText=\"已过期\"\n                    style={{\n                      color: 'rgba(0, 0, 0, 0.45)',\n                      display: 'inline-block',\n                      fontSize: '14px',\n                    }}\n                  />\n                </span>\n              </div>\n            ) : (\n              '剩余时间'\n            )\n          }\n          style={{ marginBottom: 0 }}\n        >\n          <FormItem style={ timeFormStyle }\n            name=\"hour\"\n            rules={ [{ required: true, message: '该项必输' }] }\n          >\n            <InputNumber step={ 1 }\n              min={ 0 }\n              style={{ width: '120px' }}\n              placeholder=\"小时\"\n            />\n          </FormItem>\n          <span style={ divideStyle }>:</span>\n          <FormItem style={ timeFormStyle }\n            name=\"minute\"\n            rules={ [{ required: true, message: '该项必输' }] }\n          >\n            <InputNumber step={ 1 }\n              min={ 0 }\n              max={ 59 }\n              style={{ width: '120px' }}\n              placeholder=\"分钟\"\n            />\n          </FormItem>\n          <span style={ divideStyle }>:</span>\n          <FormItem style={ timeFormStyle }\n            name=\"second\"\n            rules={ [{ required: true, message: '该项必输' }] }\n          >\n            <InputNumber step={ 1 }\n              min={ 0 }\n              max={ 59 }\n              style={{ width: '120px' }}\n              placeholder=\"秒\"\n            />\n          </FormItem>\n        </FormItem>\n        <FormItem label=\"评论模板\">\n          <div style={{ display: 'inline-block', lineHeight: '32px' }}>\n            <Button type=\"link\"\n              onClick={ uploadTemplete }\n              style={{\n                position: 'relative',\n                zIndex: 10,\n              }}\n            >\n              点击上传模板\n            </Button>\n            {confirmUploadFile.commentFileUrl && showUploadFile && (\n              <a href={ confirmUploadFile.commentFileUrl }\n                style={{\n                  display: 'block',\n                  position: 'relative',\n                  zIndex: 10,\n                  marginLeft: '20px',\n                }}\n              >\n                {confirmUploadFile.name}\n              </a>\n            )}\n            <FormItem name=\"commentFileUrl\"\n              style={{ marginTop: '-30px', marginLeft: '20px' }}\n              rules={ [{ required: true, message: '请上传文件' }] }\n            >\n              <Input style={{ display: 'none' }} />\n            </FormItem>\n          </div>\n        </FormItem>\n      </Form>\n\n      <Modal title=\"上传文件\"\n        width={ 400 }\n        visible={ modalVisible }\n        onOk={ modalOkHandle }\n        onCancel={ modalCancelHandle }\n      >\n        <div style={{ textAlign: 'center' }}>\n          添加内容：\n          <Upload showUploadList={ false }\n            accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\n            style={{ marginLeft: '20px' }}\n            action={ `${ systemBasePath }/Cmpp/runtime/upload!file.jhtml` }\n            name=\"filedata\"\n            data={{\n              domain: 'y0.ifengimg.com',\n              syncflag: 1,\n            }}\n            onChange={ uploadChange }\n          >\n            <Button type=\"primary\" icon={ <UploadOutlined /> }>\n              上传文件\n            </Button>\n          </Upload>\n          {uploadFile.commentFileUrl && (\n            <a href={ uploadFile.commentFileUrl }\n              style={{ marginTop: '20px', display: 'block' }}\n            >\n              {uploadFile.name}\n            </a>\n          )}\n        </div>\n        <div style={{ textAlign: 'center', marginTop: '20px' }}>\n          支持excel文件\n          <Popover placement=\"bottom\"\n            content={ <img src={ templte } style={{ width: '300px' }} /> }\n          >\n            <span style={{ color: '#008DFF', marginLeft: '30px' }}>\n              查看模板示例\n            </span>\n          </Popover>\n        </div>\n      </Modal>\n      {noAction ? (\n        <Row style={{color: 'red'}}>请先创建片单，在添加灌评哦！</Row>\n      ) : (\n        <Row>\n          <Col>\n            <Button onClick={ () => {\n              form.resetFields();\n            } }\n            >\n              重置\n            </Button>\n          </Col>\n          <Col offset={ 2 }>\n            <Button type=\"primary\"\n              onClick={ modifyHandle }\n              loading={ submitLoading }\n            >\n              确定修改\n            </Button>\n          </Col>\n        </Row>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default DataInputControl;\n","import React, { FC, useState, useEffect } from 'react';\nimport {\n  Form,\n  Table,\n  Progress,\n  InputNumber,\n  Row,\n  Col,\n  Button,\n  message,\n} from 'antd';\nimport { getDramaContentById } from '@/pages/ContentManage/HotManage/services';\nimport { ResponseData } from '@/types/types';\nimport { sampleAdjustGrade } from '@/pages/DataManage/DataControl/services';\n\nconst FormItem = Form.Item;\n\ninterface KeyValue {\n  [key: string]: any;\n}\ninterface Props {\n  dramaInfo: KeyValue;\n  successHandle?: () => void;\n  subjectType?: string;\n}\n\ninterface ListItem {\n  count: number;\n  finalScoreNum: number;\n  key: number;\n}\n\nconst starList = ['五星', '四星', '三星', '二星', '一星'];\nconst namesList = [\n  'halfStarCount',\n  'oneStarCount',\n  'oneHalfStarCount',\n  'twoStarCount',\n  'twoHalfStarCount',\n  'threeStarCount',\n  'threeHalfStarCount',\n  'fourStarCount',\n  'fourHalfStarCount',\n  'fiveStarCount',\n];\n\nconst getAverageScore = (list: any) => {\n  let totalPerson = 0;\n  let totalScore = 0;\n\n  list.forEach((item: any, i: number) => {\n    totalPerson += item.finalScoreNum;\n    totalScore += item.finalScoreNum * item.score;\n  });\n  if (totalPerson > 0) {\n    return (totalScore / totalPerson).toFixed(1);\n  }\n\n  return '0';\n};\n\nconst ScoreNumberControl: FC<Props> = (props: Props) => {\n  const { dramaInfo, subjectType = 'default' } = props;\n  const [form] = Form.useForm();\n  const [scorelist, setScorelist] = useState<ListItem[]>([]);\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [totalNum, setTotalNum] = useState(0);\n  const [adjustAverageScore, setAdjustAverageScore] = useState('');\n\n  // 输入框修改\n  const inputChange = (value: number, index: number) => {\n    const newlist = [...scorelist];\n\n    newlist[index]['finalScoreNum'] = newlist[index]['count'] + value;\n    const averageScore = getAverageScore(newlist);\n\n    setAdjustAverageScore(averageScore);\n\n    setScorelist(newlist);\n  };\n\n  useEffect(() => {\n    form.resetFields();\n    const { publicScoreDistribution = '{}' } = dramaInfo || {};\n    const dramaScoreDistribution = JSON.parse(publicScoreDistribution);\n    const {\n      fiveStarCount = 0,\n      fourStarCount = 0,\n      threeStarCount = 0,\n      twoStarCount = 0,\n      oneStarCount = 0,\n      fourHalfStarCount = 0,\n      threeHalfStarCount = 0,\n      twoHalfStarCount = 0,\n      oneHalfStarCount = 0,\n      halfStarCount = 0,\n      scoreCount = [\n        { score: 1, count: 0 },\n        { score: 3, count: 0 },\n        { score: 5, count: 0 },\n        { score: 7, count: 0 },\n        { score: 9, count: 0 },\n      ],\n    } = dramaScoreDistribution;\n\n    let total = 0;\n    let list = [\n      { count: halfStarCount, key: 10, score: 1 },\n      { count: oneStarCount, key: 9, score: 2 },\n      { count: oneHalfStarCount, key: 8, score: 3 },\n      { count: twoStarCount, key: 7, score: 4 },\n      { count: twoHalfStarCount, key: 6, score: 5 },\n      {\n        count: threeStarCount,\n\n        key: 5,\n        score: 6,\n      },\n      { count: threeHalfStarCount, key: 4, score: 7 },\n      { count: fourStarCount, key: 3, score: 8 },\n      { count: fourHalfStarCount, key: 2, score: 9 },\n      { count: fiveStarCount, key: 1, score: 10 },\n    ];\n\n    list = list.map((item) => {\n      return { ...item, finalScoreNum: item.count };\n    });\n\n    list = list.sort((a, b) => a.score - b.score);\n\n    list.forEach((item: ListItem) => {\n      total += item.count;\n    });\n\n    const averageScore = getAverageScore(list);\n\n    setAdjustAverageScore(averageScore);\n    setTotalNum(total);\n    setScorelist(list);\n  }, [dramaInfo.dramaId, dramaInfo.publicScoreDistribution]);\n\n  const scoreColumns = [\n    {\n      title: '当前评分人数',\n      dataIndex: 'count',\n      key: 'count',\n      width: '70%',\n      render: (text: number = 0, record: ListItem, index: number) => (\n        <div style={{ display: 'flex' }}>\n          <span style={{ display: 'inline-block', width: '60px' }}>\n            {`${ scorelist[index].score }分：`}\n          </span>\n          <Progress percent={ totalNum ? (text / totalNum) * 100 : 0 }\n            showInfo={ false }\n            style={{ flex: 1 }}\n          />\n          <span style={{ display: 'inline-block', width: '80px', margin: '0 20px' }}\n          >\n            {`${ text }人`}\n          </span>\n        </div>\n      ),\n    },\n    {\n      title: '增加人数',\n      dataIndex: 'input',\n      key: 'input',\n      render: (text: number, record: ListItem, index: number) => (\n        <FormItem name={ namesList[index] }\n          initialValue={ 0 }\n          style={{ marginBottom: 0 }}\n        >\n          <InputNumber step={ 1 }\n            min={ 0 }\n            max={ 20000 }\n            onChange={ (e: number) => inputChange(e, index) }\n          />\n        </FormItem>\n      ),\n    },\n    {\n      title: '预览',\n      dataIndex: 'finalScoreNum',\n      key: 'finalScoreNum',\n      render: (text: number) => `${ text }人`,\n    },\n  ];\n\n  const resetHandle = () => {\n    form.resetFields();\n    const newList = scorelist.map((item: ListItem) => ({\n      ...item,\n      finalScoreNum: item.count,\n    }));\n    const averageScore = getAverageScore(newList);\n\n    setAdjustAverageScore(averageScore);\n    setScorelist(newList);\n  };\n\n  const modifyHandle = () => {\n    const formValues = form.getFieldsValue();\n\n    if (Object.entries(formValues).every((r: any) => !r[1])) {\n      message.warn('请填写增加人数后再提交！');\n\n      return;\n    }\n    const grades = Object.entries(formValues)\n      .map((r: any) => r[1]);\n      // .reverse();\n\n    // 增加了评分\n    console.log('grades', grades);\n\n    setSubmitLoading(true);\n    sampleAdjustGrade({\n      grades,\n      subjectId: dramaInfo.dramaId,\n      subjectType,\n    }, formValues)\n      .then((res: ResponseData<any>) => {\n        if (res.code === 200) {\n          message.success('提交成功，该数据将在10分钟左右生效！');\n          props.successHandle && props.successHandle();\n          setSubmitLoading(false);\n        } else {\n          setSubmitLoading(false);\n        }\n      })\n      .catch(() => {\n        setSubmitLoading(false);\n      });\n  };\n\n  return (\n    <React.Fragment>\n      <Form form={ form }>\n        <Table pagination={ false }\n          size=\"small\"\n          columns={ scoreColumns }\n          dataSource={ scorelist }\n        />\n      </Form>\n      <Row style={{ marginTop: '20px' }}>\n        <Col style={{ fontSize: '14px' }}>\n          当前调整后评分预览：{' '}\n          <span style={{ color: 'rgb(248, 29, 34)' }}>\n            {adjustAverageScore}\n          </span>{' '}\n          分\n        </Col>\n      </Row>\n      <Row style={{ marginTop: '20px' }}>\n        <Col>\n          <Button onClick={ resetHandle }>重置</Button>\n        </Col>\n        <Col offset={ 2 }>\n          <Button type=\"primary\" onClick={ modifyHandle } loading={ submitLoading }>\n            确定修改\n          </Button>\n        </Col>\n      </Row>\n    </React.Fragment>\n  );\n};\n\nexport default ScoreNumberControl;\n","import request from '@/utils/request';\nimport { requestBasePath } from '@/services/login';\nimport { APP_ID } from '@/utils/constant.js';\n\ninterface AdjustGradeRequestParams {\n  grades: number[];\n  subjectId: string;\n  subjectType?: string;\n}\n\n// 获取指定作品评论增长趋势\nexport async function getGrowTrendList(requestBody: any) {\n  // return await request(\n  //   `${ requestBasePath }/wingvate/wind-vane-backend/statistics/comment/growth-trend/list`,\n  //   {\n  //     method: 'POST',\n  //     body: requestBody,\n  //   }\n  // );\n\n  const data = {\n    \"code\": 200,\n    \"level\": 200,\n    \"message\": \"success\",\n    \"description\": \"\",\n    \"data\": [{\n      \"time\": 2022070415,\n      \"count\": 1\n    }],\n    \"succeed\": true,\n    \"msg\": \"success\"\n  }\n\n  return data\n}\n\n// 获取指定作品评论增长趋势\nexport async function getPublicScoreTrendList(requestBody: any) {\n  return await request(\n    `${ requestBasePath }/wingvate/wind-vane-backend/statistics/public-score/trend/list`,\n    {\n      method: 'POST',\n      body: requestBody,\n    }\n  );\n}\n\n// 保存并启动刷分\nexport async function dealCommentReport(requstParams: any) {\n  return await request(`${ requestBasePath }/comment/saveAndStartAdjust`, {\n    method: 'POST',\n    body: requstParams,\n  });\n}\n\n// 保存并启动灌评论\nexport async function saveAndStartCommentAdjust(requstParams: any) {\n  return await request(`${ requestBasePath }/comment/saveAndStartCommentAdjust`, {\n    method: 'POST',\n    body: { ...requstParams, appId: APP_ID },\n  });\n}\n\n// 评分控制\nexport async function sampleAdjustGrade(\n  requstParams: AdjustGradeRequestParams, formValues\n) {\n  // const temp = await request(\n  //   `${ requestBasePath }/wind-vane-backend/drama/operate/public-score/init-value`,\n  //   {\n  //     method: 'POST',\n  //     body: formValues,\n  //   }\n  // );\n\n  return await request(`${ requestBasePath }/comment/sampleAdjustGrade`, {\n    method: 'POST',\n    body: requstParams,\n  });\n}\n","module.exports = __webpack_public_path__ + \"static/templete.92e9a642.png\";","require('../../../modules/es.array.every');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').every;\n","require('../../../modules/es.array.sort');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').sort;\n","var every = require('../array/virtual/every');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.every;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.every) ? every : own;\n};\n","var sort = require('../array/virtual/sort');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.sort;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.sort) ? sort : own;\n};\n","var parent = require('../../es/instance/every');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/sort');\n\nmodule.exports = parent;\n","// TODO: use something more complex like timsort?\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    mergeSort(array.slice(0, middle), comparefn),\n    mergeSort(array.slice(middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n  var result = [];\n\n  while (lindex < llength || rindex < rlength) {\n    if (lindex < llength && rindex < rlength) {\n      result.push(comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]);\n    } else {\n      result.push(lindex < llength ? left[lindex++] : right[rindex++]);\n    }\n  } return result;\n};\n\nmodule.exports = mergeSort;\n","var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","'use strict';\nvar $ = require('../internals/export');\nvar $every = require('../internals/array-iteration').every;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('every');\n\n// `Array.prototype.every` method\n// https://tc39.es/ecma262/#sec-array.prototype.every\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return String(x) > String(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aFunction(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort.call(array) : nativeSort.call(array, comparefn);\n\n    var items = [];\n    var arrayLength = toLength(array.length);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) items.push(array[index]);\n    }\n\n    items = internalSort(items, getSortCompare(comparefn));\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n"],"sourceRoot":""}