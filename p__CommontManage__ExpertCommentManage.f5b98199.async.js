(globalThis["webpackChunkwindvane"]=globalThis["webpackChunkwindvane"]||[]).push([[7747],{47648:(e,r,t)=>{e.exports=t(72858)},59104:(e,r,t)=>{e.exports=t(75425)},78289:e=>{e.exports={header:"_1pnNnm",actions:"_23Utz2",body:"_3euxaN"}},65075:e=>{e.exports={ExpertCommentManageWrap:"_-iGKPR",ExpertCommentHead:"_197oHg",ExpertCommentContent:"_2RSadl",borderBottom:"_4VNGE2",footerPage:"_dEjhJI"}},30138:(e,r,t)=>{"use strict";t.d(r,{Z:()=>v});t(13062);var n=t(71230),o=(t(89032),t(15746)),a=t(67294),i=t(8135),l=t.n(i),s=t(33909),d=t(18598),c=t(85893);const u=(e,r)=>{const t=e.productionId,i=e.btnRender,u=e.imgSpan,v=e.detailSpan,m=e.btnSpan,p=(0,s.OL)(t),h=p.productionDetail,f=(p.detailLoading,p.mutate),g=(0,a.useMemo)((()=>(null===h||void 0===h?void 0:h.coverImage)&&JSON.parse(null===h||void 0===h?void 0:h.coverImage)),[h]);return(0,a.useImperativeHandle)(r,(()=>({refreshDetail:f,productionDetail:h}))),(0,c.jsxs)(n.Z,{children:[(0,c.jsx)(o.Z,{span:null!==u&&void 0!==u?u:4,children:null!==g&&void 0!==g&&g.length?(0,c.jsx)("img",{className:l().productionImg,src:g[0]}):""}),(0,c.jsxs)(o.Z,{span:null!==v&&void 0!==v?v:7,className:l().productionInfo,children:[(0,c.jsx)("h3",{children:null===h||void 0===h?void 0:h.title}),(0,c.jsxs)("p",{style:{fontSize:16},children:["\u5927\u4f17\u8bc4\u5206\uff1a",(0,c.jsx)("strong",{children:Number(null===h||void 0===h?void 0:h.publicScore).toFixed(1)})]}),(0,c.jsxs)("p",{children:["\u4e13\u4e1a\u8bc4\u5206\uff1a",Number(null===h||void 0===h?void 0:h.performanceScore).toFixed(1)]}),(0,c.jsxs)("p",{children:["\u6570\u636e\u72b6\u6001\uff1a",(0,c.jsx)(d.f0,{subjectId:t})]})]}),(0,c.jsx)(o.Z,{span:null!==m&&void 0!==m?m:10,children:i&&i(null===h||void 0===h?void 0:h.performanceScore)})]})},v=(0,a.forwardRef)(u)},11903:(e,r,t)=>{"use strict";t.d(r,{Z:()=>y});t(13254);var n=t(14277),o=t(20594),a=(t(43358),t(44477)),i=t(54579),l=t.n(i),s=t(50047),d=t.n(s),c=t(42825),u=t.n(c),v=t(67294),m=t(34165),p=t(85893);const h=a.Z.Option;let f;function g(e,r){function t(){(0,m.B)({title:e,onlineStatus:"1"}).then((e=>{var t;const n=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.list)||[];r(n)}))}f&&(clearTimeout(f),f=null),f=l()(t,300)}const x=e=>{const r=e.value,t=e.onChange,i=e.width,l=(0,v.useState)([]),s=(0,o.Z)(l,2),c=s[0],m=s[1],f=e=>{e?g(e,(e=>m(e))):m([])},x=e=>{const r=e.value,n=JSON.parse(r),o=n.dramaId;t({...e,totalItem:r,value:o})};return(0,p.jsx)(a.Z,{showSearch:!0,labelInValue:!0,value:r,style:{width:i||"100%"},placeholder:"\u8f93\u5165\u540d\u79f0\u641c\u7d22\uff08\u6a21\u7cca\u641c\u7d22\uff09",defaultActiveFirstOption:!0,showArrow:!1,filterOption:!1,onSearch:f,onChange:x,notFoundContent:(0,p.jsx)(n.Z,{}),children:d()(c).call(c,(e=>(0,p.jsx)(h,{value:u()(e),children:e.title},e.dramaId)))})},y=x},34165:(e,r,t)=>{"use strict";t.d(r,{B:()=>a});var n=t(72709),o=t(17778);async function a(e){return await(0,n.ZP)(`${o.tW}/wingvate/wind-vane-backend/drama/query/queryDramaContentList`,{method:"POST",body:{query:e,sort:{type:"desc",key:"createTime"},pagination:{pageSize:100,current:1}}})}},9548:(e,r,t)=>{"use strict";t.d(r,{Z:()=>R});t(15594);var n=t(50386),o=(t(57663),t(71577)),a=t(69417),i=t(20594),l=t(89356),s=t.n(l),d=t(67294),c=(t(13062),t(71230)),u=(t(89032),t(15746)),v=(t(14965),t(3436)),m=(t(43358),t(44477)),p=(t(47673),t(59193)),h=(t(9715),t(69733)),f=t(28834),g=t.n(f),x=t(59104),y=t.n(x),j=t(50047),S=t.n(j),b=t(30381),Z=t.n(b),w=t(85893);function C(e){var r;const t={...e};return g()(r=s()({...t})).call(r,(e=>{var r;"string"===typeof t[e]&&(t[e]=y()(r=t[e]).call(r))})),t}const k=(e,r)=>{var t;const n=h.Z.useForm(),o=(0,i.Z)(n,1),a=o[0];async function l(){const e=await a.validateFields();return C(e)}(0,d.useImperativeHandle)(r,(()=>({resetFrom:a.resetFields,getValues:l})));const s=(0,d.useCallback)((({renderCom:r,comProps:t={},label:n})=>{var o,a,i;if((0,d.isValidElement)(r))return r;switch(r){case"input":return(0,w.jsx)(p.Z,{placeholder:null!==(o=null===t||void 0===t?void 0:t.placeholder)&&void 0!==o?o:`\u8bf7\u8f93\u5165${n}`,onPressEnter:()=>e.onPressEnter&&e.onPressEnter()});case"passwordInput":return(0,w.jsx)(p.Z.Password,{placeholder:null!==(a=null===t||void 0===t?void 0:t.placeholder)&&void 0!==a?a:`\u8bf7\u8f93\u5165${n}`,onPressEnter:()=>e.onPressEnter&&e.onPressEnter()});case"select":return(0,w.jsx)(m.Z,{allowClear:!0,placeholder:`\u8bf7\u9009\u62e9${n}`,onChange:()=>e.onPressEnter&&e.onPressEnter(),...t,children:null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:S()(i).call(i,(e=>(0,w.jsx)(m.Z.Option,{value:e.value,children:e.label},e.value)))});case"rangePicker":return(0,w.jsx)(v.Z.RangePicker,{showTime:!0,style:{width:"100%"},ranges:{"\u4eca\u5929":[Z()().startOf("day"),Z()().endOf("day")],"\u6628\u5929":[Z()().startOf("day").subtract(1,"day"),Z()().endOf("day").subtract(1,"day")],"\u672c\u5468":[Z()().startOf("week"),Z()().endOf("week")],"\u672c\u6708":[Z()().startOf("month"),Z()().endOf("month")]},...t});case"datePicker":return(0,w.jsx)(v.Z,{style:{width:"100%"},...t});default:return(0,w.jsx)(p.Z,{})}}),[e.onPressEnter]);return(0,w.jsx)(h.Z,{form:a,initialValues:e.initialValues,children:(0,w.jsx)(c.Z,{gutter:24,children:S()(t=e.items).call(t,(r=>{var t;return(0,w.jsx)(u.Z,{span:null!==(t=r.span)&&void 0!==t?t:8,children:(0,w.jsx)(h.Z.Item,{name:r.name,label:r.label,...e.formItemLayout,...r.itemProps,children:s(r)})},r.name)}))})})},I=(0,d.forwardRef)(k);var P=t(78289),z=t.n(P),E=t(26052);const N={labelCol:{span:6},wrapperCol:{span:18}},O=(e,r)=>{var t;const l=e.formItem,c=void 0===l?[]:l,u=e.columns,v=e.rowKey,m=void 0===v?"key":v,p=e.initialValues,h=void 0===p?{}:p,f=e.plusAction,g=e.query,x=e.list,y=void 0===x?[]:x,j=e.total,S=void 0===j?0:j,b=e.loading,Z=e.defaultPageSize,C=e.pageSizeOptions,k=void 0===C?["10","20","50","100"]:C,P=e.notQueryWhilestart,O=(0,d.useRef)(null),R=void 0!==e.formRef?e.formRef:O,q=null!==Z&&void 0!==Z?Z:Number(k[0]),F={current:1,pageSize:q},T=(0,d.useState)(F),A=(0,i.Z)(T,2),V=A[0],$=A[1],D=(0,d.useState)({}),H=(0,i.Z)(D,2),L=H[0],M=H[1],W=async(e,r)=>{try{var t;const n=await(null===(t=R.current)||void 0===t?void 0:t.getValues()),o=V.current,i=V.pageSize,l=r||L,d=(0,E.jt)({...n,current:o,pageSize:i,...e});$({current:d.current,pageSize:d.pageSize}),void 0!==l&&0!==s()(l).length&&void 0!==l.order&&(d.sorter=l);const c=d.current,u=d.pageSize,v=(d.sorter,(0,a.Z)(d,["current","pageSize","sorter"])),m={pagination:{current:c,pageSize:u},query:v};d.sorter&&(m.sort={type:d.sorter.order,key:d.sorter.field}),g(m),r&&M(r)}catch(n){console.error(n)}};function _(){var e;null===(e=R.current)||void 0===e||e.resetFrom(),W({current:1})}(0,d.useImperativeHandle)(r,(()=>({query:W}))),(0,d.useEffect)((()=>{!P&&W({...F,...h})}),[]);const U=(e,r)=>{r!==V.pageSize?W({current:1,pageSize:r}):W({current:e,pageSize:r})},G=(e,r,t)=>{const n=t.field,o=t.order;!n||n===(null!==L&&void 0!==L?L:{}).field&&o===(null!==L&&void 0!==L?L:{}).order||W({},{field:n,order:o})};return(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:z().header,children:[(0,w.jsx)(I,{ref:R,items:c,initialValues:h,onPressEnter:W,formItemLayout:e.formItemLayout||N}),(0,w.jsxs)("div",{className:z().actions,children:[f||(0,w.jsx)("div",{}),c.length>0&&(0,w.jsxs)("div",{children:[(0,w.jsx)(o.Z,{onClick:_,style:{marginRight:"10px"},children:"\u91cd\u7f6e"},"reset"),(0,w.jsx)(o.Z,{onClick:()=>W({current:1}),type:"primary",children:"\u67e5\u8be2"},"query")]})]})]}),(0,w.jsx)("div",{className:z().body,children:null!==(t=e.children)&&void 0!==t?t:(0,w.jsx)(n.Z,{bordered:!0,size:"small",dataSource:y,columns:u,rowKey:m,pagination:{total:S,showTotal:e=>`\u5171${e}\u6761\u6570\u636e`,current:V.current,pageSize:V.pageSize,onChange:U,showSizeChanger:!0,pageSizeOptions:k},loading:b,onChange:G})})]})},R=(0,d.forwardRef)(O)},24963:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>V});t(20228);var n=t(11382),o=(t(14781),t(9366)),a=(t(57663),t(71577)),i=(t(34792),t(78042)),l=t(20594),s=t(50047),d=t.n(s),c=t(47648),u=t.n(c),v=t(67294),m=t(2390),p=t(59867),h=t(7084),f=t(11903),g=t(64074),x=t(65075),y=t.n(x),j=t(30138),S=(t(71194),t(50146)),b=(t(77883),t(68470)),Z=(t(9715),t(69733)),w=t(85893);const C={labelCol:{span:8},wrapperCol:{span:16}},k=e=>{const r=Z.Z.useForm(),t=(0,l.Z)(r,1),n=t[0],o=e.visible,a=e.handleHidden,i=e.handleSubmit,s=n.validateFields,d=(n.getFieldsValue,(0,v.useCallback)((()=>{s().then((e=>{i(e)})).catch((e=>{console.log("formError",e)}))}),[s]));return(0,w.jsx)(S.Z,{title:"\u4e13\u4e1a\u8bc4\u5206\u5f55\u5165",visible:o,onOk:d,onCancel:a,children:(0,w.jsxs)(Z.Z,{...C,form:n,className:y().initCountWrap,children:[(0,w.jsx)(Z.Z.Item,{label:"\u5206\u6570",name:"performanceScore",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u6570!"}],children:(0,w.jsx)(b.Z,{precision:1,min:0,max:10,style:{width:200},placeholder:"\u8bf7\u8f93\u5165\u5206\u6570"})}),(0,w.jsx)(Z.Z.Item,{label:"\u8bc4\u5206\u4e13\u5bb6\u4eba\u6570",name:"performanceScorePeople",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bc4\u5206\u4e13\u5bb6\u4eba\u6570!"}],children:(0,w.jsx)(b.Z,{min:0,style:{width:200},placeholder:"\u8bf7\u8f93\u5165\u8bc4\u5206\u4e13\u5bb6\u4eba\u6570"})})]})})},I=k;var P=t(9548),z=t(33909),E=t(72709),N=t(80129),O=t(17778);function R(e){return(0,E.ZP)(`${O.tW}/wingvate/wind-vane-backend/drama/operate/updateDramaPerformanceScore?${(0,N.stringify)(e)}`)}var q=t(96625);const F=20,T="expert",A=(e,r)=>{var t,s;const c=(null===e||void 0===e||null===(t=e.location)||void 0===t||null===(s=t.query)||void 0===s?void 0:s.dramaId)||void 0,p=(0,v.useRef)(),h=(0,v.useRef)(),x={pagination:{pageSize:F,current:1},query:{subjectId:c,commentUserRank:T,checkStatus:void 0,rootId:0},sort:{key:"createTime",type:"desc"}},S=(0,v.useState)(!1),b=(0,l.Z)(S,2),Z=b[0],C=b[1],k=(0,v.useState)(x),E=(0,l.Z)(k,2),N=E[0],O=E[1],A=(0,v.useState)({}),V=(0,l.Z)(A,2),$=V[0],D=V[1],H=(0,z.Hm)(N),L=H.commontList,M=H.pagination,W=H.isValidating,_=H.mutate,U=H.CommontCount,G=((0,v.useMemo)((()=>(null===L||void 0===L?void 0:d()(L).call(L,(e=>null===e||void 0===e?void 0:e.subjectId)))||[]),[L]),(0,z.eL)(L)),J=G.productionGroupDetail,K=(G.detailLoading,()=>{C(!1)}),B=(0,v.useCallback)((async e=>{try{const r=await R({dramaId:(null===$||void 0===$?void 0:$.key)||c,...e});200===(null===r||void 0===r?void 0:r.code)&&(i.default.success("\u64cd\u4f5c\u6210\u529f\uff01"),null===p||void 0===p||p.current.refreshDetail(),K())}catch(r){console.log("error",r)}}),[c,$,p]),Q=(0,v.useCallback)((e=>(0,w.jsx)(m.rU,{to:`/commont-manage/expert-comment-detail?dramaId=${(null===$||void 0===$?void 0:$.key)||c}`,children:(0,w.jsx)(a.Z,{type:"primary",children:"\u5f55\u5165\u4e13\u4e1a\u8bc4\u8bba"})})),[null===$||void 0===$?void 0:$.key,c]),X=(0,v.useCallback)((e=>{h.current.query(),D(e)}),[]),Y=(0,v.useMemo)((()=>[{name:"title",label:"\u4f5c\u54c1\u540d\u79f0",renderCom:(0,w.jsx)(f.Z,{onChange:X,style:{width:200}}),span:8},{name:"checkStatus",span:5,label:"\u72b6\u6001",renderCom:"select",comProps:{options:q.jW}},{name:"sort",span:5,label:"\u6392\u5e8f\u5b57\u6bb5",renderCom:"select",comProps:{options:q.cS}}]),[X]),ee=(0,v.useCallback)((e=>{var r;const t=e.pagination,n=e.query;O({pagination:t,query:{subjectId:(null===n||void 0===n||null===(r=n.title)||void 0===r?void 0:r.key)||c,commentUserRank:T,checkStatus:Number(null===n||void 0===n?void 0:n.checkStatus),rootId:0},sort:{key:(null===n||void 0===n?void 0:u()(n))||"createTime",type:"desc"}})}),[c]),re=(0,v.useCallback)(((e,r)=>{O((t=>({...t,pagination:{current:e,pageSize:r}})))}),[]),te=(0,v.useMemo)((()=>!c),[c]);return(0,v.useEffect)((()=>{te&&Y.pop()}),[Y,te]),(0,w.jsxs)("div",{className:y().ExpertCommentManageWrap,children:[Z?(0,w.jsx)(I,{visible:Z,handleHidden:K,handleSubmit:B}):"",(0,w.jsx)(P.Z,{notQueryWhilestart:!0,formItem:Y,query:ee,loading:W,ref:h,defaultPageSize:F,children:(0,w.jsx)(n.Z,{tip:"\u52a0\u8f7d\u4e2d...",spinning:W,children:(0,w.jsxs)("div",{className:y().ExpertCommentContent,children:[null!==$&&void 0!==$&&$.key||c?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(j.Z,{productionId:(null===$||void 0===$?void 0:$.key)||c,btnRender:Q,ref:p}),(0,w.jsx)("br",{})]}):null,null===L||void 0===L?void 0:d()(L).call(L,((e,r)=>(0,w.jsx)(g.Z,{showExpertIdentity:!0,common:e,refresh:_,CommontCount:U,showProductionName:!0,productionGroupDetail:J,moreRender:(0,w.jsx)(m.rU,{to:`/commont-manage/expert-comment-detail?dramaId=${null===e||void 0===e?void 0:e.subjectId}&commentId=${null===e||void 0===e?void 0:e.id}`,children:(0,w.jsx)(a.Z,{type:"primary",size:"small",children:"\u4fee\u6539"})}),hiddenAddPraise:te},r))),(0,w.jsx)("div",{className:y().footerPage,children:(0,w.jsx)(o.Z,{current:Number((null===M||void 0===M?void 0:M.current)||1),pageSize:Number((null===M||void 0===M?void 0:M.pageSize)||10),total:Number((null===M||void 0===M?void 0:M.total)||0),showTotal:e=>`\u603b\u8ba1 ${e} \u6761`,showQuickJumper:!0,onChange:re})})]})})})]})},V=(0,p.IX)(A,[h.uU.SYSTEM,h.uU.EXPERT])},2948:(e,r,t)=>{t(4115);var n=t(35703);e.exports=n("Array").sort},69355:(e,r,t)=>{var n=t(2948),o=Array.prototype;e.exports=function(e){var r=e.sort;return e===o||e instanceof Array&&r===o.sort?n:r}},62774:(e,r,t)=>{var n=t(13348),o=String.prototype;e.exports=function(e){var r=e.trim;return"string"===typeof e||e===o||e instanceof String&&r===o.trim?n:r}},13348:(e,r,t)=>{t(57398);var n=t(35703);e.exports=n("String").trim},72858:(e,r,t)=>{var n=t(69355);e.exports=n},75425:(e,r,t)=>{var n=t(62774);e.exports=n},61388:e=>{var r=Math.floor,t=function(e,a){var i=e.length,l=r(i/2);return i<8?n(e,a):o(t(e.slice(0,l),a),t(e.slice(l),a),a)},n=function(e,r){var t,n,o=e.length,a=1;while(a<o){n=a,t=e[a];while(n&&r(e[n-1],t)>0)e[n]=e[--n];n!==a++&&(e[n]=t)}return e},o=function(e,r,t){var n=e.length,o=r.length,a=0,i=0,l=[];while(a<n||i<o)a<n&&i<o?l.push(t(e[a],r[i])<=0?e[a++]:r[i++]):l.push(a<n?e[a++]:r[i++]);return l};e.exports=t},34342:(e,r,t)=>{var n=t(2861),o=n.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},81046:(e,r,t)=>{var n=t(2861);e.exports=/MSIE|Trident/.test(n)},18938:(e,r,t)=>{var n=t(2861),o=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},93093:(e,r,t)=>{var n=t(95981),o=t(73483),a="\u200b\x85\u180e";e.exports=function(e){return n((function(){return!!o[e]()||a[e]()!=a||o[e].name!==e}))}},4115:(e,r,t)=>{"use strict";var n=t(76887),o=t(33916),a=t(89678),i=t(43057),l=t(95981),s=t(61388),d=t(34194),c=t(34342),u=t(81046),v=t(53385),m=t(18938),p=[],h=p.sort,f=l((function(){p.sort(void 0)})),g=l((function(){p.sort(null)})),x=d("sort"),y=!l((function(){if(v)return v<70;if(!(c&&c>3)){if(u)return!0;if(m)return m<603;var e,r,t,n,o="";for(e=65;e<76;e++){switch(r=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(n=0;n<47;n++)p.push({k:r+n,v:t})}for(p.sort((function(e,r){return r.v-e.v})),n=0;n<p.length;n++)r=p[n].k.charAt(0),o.charAt(o.length-1)!==r&&(o+=r);return"DGBEFHACIJK"!==o}})),j=f||!g||!x||!y,S=function(e){return function(r,t){return void 0===t?-1:void 0===r?1:void 0!==e?+e(r,t)||0:String(r)>String(t)?1:-1}};n({target:"Array",proto:!0,forced:j},{sort:function(e){void 0!==e&&o(e);var r=a(this);if(y)return void 0===e?h.call(r):h.call(r,e);var t,n,l=[],d=i(r.length);for(n=0;n<d;n++)n in r&&l.push(r[n]);l=s(l,S(e)),t=l.length,n=0;while(n<t)r[n]=l[n++];while(n<d)delete r[n++];return r}})},57398:(e,r,t)=>{"use strict";var n=t(76887),o=t(74853).trim,a=t(93093);n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})}}]);
//# sourceMappingURL=p__CommontManage__ExpertCommentManage.f5b98199.async.js.map