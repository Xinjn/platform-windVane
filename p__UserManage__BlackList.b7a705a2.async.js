(globalThis["webpackChunkwindvane"]=globalThis["webpackChunkwindvane"]||[]).push([[2140],{59104:(e,t,n)=>{e.exports=n(75425)},78289:e=>{e.exports={header:"_1pnNnm",actions:"_23Utz2",body:"_3euxaN"}},9548:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});n(15594);var r=n(50386),s=(n(57663),n(71577)),i=n(69417),a=n(20594),o=n(89356),l=n.n(o),c=n(67294),d=(n(13062),n(71230)),u=(n(89032),n(15746)),p=(n(14965),n(3436)),v=(n(43358),n(44477)),m=(n(47673),n(59193)),h=(n(9715),n(69733)),y=n(28834),f=n.n(y),x=n(59104),g=n.n(x),j=n(50047),Z=n.n(j),b=n(30381),S=n.n(b),k=n(85893);function w(e){var t;const n={...e};return f()(t=l()({...n})).call(t,(e=>{var t;"string"===typeof n[e]&&(n[e]=g()(t=n[e]).call(t))})),n}const C=(e,t)=>{var n;const r=h.Z.useForm(),s=(0,a.Z)(r,1),i=s[0];async function o(){const e=await i.validateFields();return w(e)}(0,c.useImperativeHandle)(t,(()=>({resetFrom:i.resetFields,getValues:o})));const l=(0,c.useCallback)((({renderCom:t,comProps:n={},label:r})=>{var s,i,a;if((0,c.isValidElement)(t))return t;switch(t){case"input":return(0,k.jsx)(m.Z,{placeholder:null!==(s=null===n||void 0===n?void 0:n.placeholder)&&void 0!==s?s:`\u8bf7\u8f93\u5165${r}`,onPressEnter:()=>e.onPressEnter&&e.onPressEnter()});case"passwordInput":return(0,k.jsx)(m.Z.Password,{placeholder:null!==(i=null===n||void 0===n?void 0:n.placeholder)&&void 0!==i?i:`\u8bf7\u8f93\u5165${r}`,onPressEnter:()=>e.onPressEnter&&e.onPressEnter()});case"select":return(0,k.jsx)(v.Z,{allowClear:!0,placeholder:`\u8bf7\u9009\u62e9${r}`,onChange:()=>e.onPressEnter&&e.onPressEnter(),...n,children:null===n||void 0===n||null===(a=n.options)||void 0===a?void 0:Z()(a).call(a,(e=>(0,k.jsx)(v.Z.Option,{value:e.value,children:e.label},e.value)))});case"rangePicker":return(0,k.jsx)(p.Z.RangePicker,{showTime:!0,style:{width:"100%"},ranges:{"\u4eca\u5929":[S()().startOf("day"),S()().endOf("day")],"\u6628\u5929":[S()().startOf("day").subtract(1,"day"),S()().endOf("day").subtract(1,"day")],"\u672c\u5468":[S()().startOf("week"),S()().endOf("week")],"\u672c\u6708":[S()().startOf("month"),S()().endOf("month")]},...n});case"datePicker":return(0,k.jsx)(p.Z,{style:{width:"100%"},...n});default:return(0,k.jsx)(m.Z,{})}}),[e.onPressEnter]);return(0,k.jsx)(h.Z,{form:i,initialValues:e.initialValues,children:(0,k.jsx)(d.Z,{gutter:24,children:Z()(n=e.items).call(n,(t=>{var n;return(0,k.jsx)(u.Z,{span:null!==(n=t.span)&&void 0!==n?n:8,children:(0,k.jsx)(h.Z.Item,{name:t.name,label:t.label,...e.formItemLayout,...t.itemProps,children:l(t)})},t.name)}))})})},I=(0,c.forwardRef)(C);var T=n(78289),z=n.n(T),P=n(26052);const R={labelCol:{span:6},wrapperCol:{span:18}},E=(e,t)=>{var n;const o=e.formItem,d=void 0===o?[]:o,u=e.columns,p=e.rowKey,v=void 0===p?"key":p,m=e.initialValues,h=void 0===m?{}:m,y=e.plusAction,f=e.query,x=e.list,g=void 0===x?[]:x,j=e.total,Z=void 0===j?0:j,b=e.loading,S=e.defaultPageSize,w=e.pageSizeOptions,C=void 0===w?["10","20","50","100"]:w,T=e.notQueryWhilestart,E=(0,c.useRef)(null),O=void 0!==e.formRef?e.formRef:E,L=null!==S&&void 0!==S?S:Number(C[0]),N={current:1,pageSize:L},$=(0,c.useState)(N),F=(0,a.Z)($,2),V=F[0],_=F[1],q=(0,c.useState)({}),U=(0,a.Z)(q,2),H=U[0],M=U[1],Y=async(e,t)=>{try{var n;const r=await(null===(n=O.current)||void 0===n?void 0:n.getValues()),s=V.current,a=V.pageSize,o=t||H,c=(0,P.jt)({...r,current:s,pageSize:a,...e});_({current:c.current,pageSize:c.pageSize}),void 0!==o&&0!==l()(o).length&&void 0!==o.order&&(c.sorter=o);const d=c.current,u=c.pageSize,p=(c.sorter,(0,i.Z)(c,["current","pageSize","sorter"])),v={pagination:{current:d,pageSize:u},query:p};c.sorter&&(v.sort={type:c.sorter.order,key:c.sorter.field}),f(v),t&&M(t)}catch(r){console.error(r)}};function K(){var e;null===(e=O.current)||void 0===e||e.resetFrom(),Y({current:1})}(0,c.useImperativeHandle)(t,(()=>({query:Y}))),(0,c.useEffect)((()=>{!T&&Y({...N,...h})}),[]);const Q=(e,t)=>{t!==V.pageSize?Y({current:1,pageSize:t}):Y({current:e,pageSize:t})},W=(e,t,n)=>{const r=n.field,s=n.order;!r||r===(null!==H&&void 0!==H?H:{}).field&&s===(null!==H&&void 0!==H?H:{}).order||Y({},{field:r,order:s})};return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:z().header,children:[(0,k.jsx)(I,{ref:O,items:d,initialValues:h,onPressEnter:Y,formItemLayout:e.formItemLayout||R}),(0,k.jsxs)("div",{className:z().actions,children:[y||(0,k.jsx)("div",{}),d.length>0&&(0,k.jsxs)("div",{children:[(0,k.jsx)(s.Z,{onClick:K,style:{marginRight:"10px"},children:"\u91cd\u7f6e"},"reset"),(0,k.jsx)(s.Z,{onClick:()=>Y({current:1}),type:"primary",children:"\u67e5\u8be2"},"query")]})]})]}),(0,k.jsx)("div",{className:z().body,children:null!==(n=e.children)&&void 0!==n?n:(0,k.jsx)(r.Z,{bordered:!0,size:"small",dataSource:g,columns:u,rowKey:v,pagination:{total:Z,showTotal:e=>`\u5171${e}\u6761\u6570\u636e`,current:V.current,pageSize:V.pageSize,onChange:Q,showSizeChanger:!0,pageSizeOptions:C},loading:b,onChange:W})})]})},O=(0,c.forwardRef)(E)},18598:(e,t,n)=>{"use strict";n.d(t,{vk:()=>j,bw:()=>Z,ZG:()=>b,a4:()=>S,J0:()=>w,f0:()=>I,ab:()=>C,R6:()=>k});n(71194);var r=n(50146),s=(n(77883),n(68470)),i=(n(13062),n(71230)),a=(n(89032),n(15746)),o=n(20594),l=(n(62350),n(75443)),c=(n(57663),n(71577)),d=(n(34792),n(78042)),u=n(54579),p=n.n(u),v=n(21052),m=n.n(v),h=n(67294),y=n(33909),f=n(99086),x=n(93606),g=n(85893);function j(){return(0,g.jsx)("span",{style:{color:"#333",verticalAlign:"middle"},children:"\u4e0a\u7ebf"})}function Z(){return(0,g.jsx)("span",{style:{color:"red",verticalAlign:"middle"},children:"\u4e0b\u7ebf"})}function b(e){const t=e.production,n=e.refresh,r=e.style,s=(0,h.useMemo)((()=>1===(null===t||void 0===t?void 0:t.onlineStatus)),[t]),i=(0,h.useCallback)((async()=>{try{const e=await(0,y.pf)({dramaId:null===t||void 0===t?void 0:t.dramaId,onlineStatus:s?0:1});200===(null===e||void 0===e?void 0:e.code)&&(d.default.success("\u64cd\u4f5c\u6210\u529f\uff01"),n&&n())}catch(e){}}),[s,t,n]);return(0,g.jsx)(l.Z,{placement:"topRight",title:`\u786e\u8ba4 ${s?"\u4e0b\u7ebf":"\u4e0a\u7ebf"} \u8be5\u4f5c\u54c1\u5417`,onConfirm:i,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:s?(0,g.jsx)(c.Z,{danger:!0,style:r,children:"\u4e0b\u7ebf"}):(0,g.jsx)(c.Z,{type:"primary",style:r,children:"\u4e0a\u7ebf"})})}function S(e){const t=e.commont,n=e.refresh,r=e.style,s=e.subjectType,i=void 0===s?"default":s,a=(0,h.useMemo)((()=>1===(null===t||void 0===t?void 0:t.checkStatus)),[t]),o=(0,h.useCallback)((async()=>{try{const e=await(0,y.Hy)({commentId:null===t||void 0===t?void 0:t.id,subjectId:null===t||void 0===t?void 0:t.subjectId,checkStatus:a?2:1,subjectType:i});200===(null===e||void 0===e?void 0:e.code)&&(d.default.success("\u64cd\u4f5c\u6210\u529f\uff01"),n&&n())}catch(e){console.log("error",e)}}),[a,t,n]);return(0,g.jsx)(l.Z,{placement:"topRight",title:`\u786e\u8ba4 ${a?"\u4e0b\u7ebf":"\u4e0a\u7ebf"} \u8be5\u8bc4\u8bba\u5417`,onConfirm:o,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:a?(0,g.jsx)(c.Z,{danger:!0,style:r,children:"\u4e0b\u7ebf"}):(0,g.jsx)(c.Z,{type:"primary",style:r,children:"\u4e0a\u7ebf"})})}function k(e){const t=e.notGoodComment,n=e.useName,u=e.currentScore,v=void 0===u?0:u,f=e.currentLevel,j=void 0===f?"lv.1":f,Z=e.commentId,b=e.subjectId,S=e.subjectType,k=void 0===S?"":S,w=e.refresh,C=(0,h.useState)(!1),I=(0,o.Z)(C,2),T=I[0],z=I[1],P=(0,h.useState)(v),R=(0,o.Z)(P,2),E=R[0],O=R[1],L=(0,h.useState)(j),N=(0,o.Z)(L,2),$=N[0],F=N[1],V=(0,h.useRef)(0),_=async()=>{try{await(0,y.cw)({id:Z,subjectId:b,isHighQualityStatus:!1,subjectType:k})}catch(e){d.default.error("\u8bc4\u4f18\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}w()},q=()=>{z(!1)},U=(0,h.useCallback)((async()=>{p()((async()=>{try{await(0,y.tm)({id:Z,subjectId:b,isHighQualityStatus:!0,rate:V.current,subjectType:k}),d.default.success("\u64cd\u4f5c\u6210\u529f")}catch(e){d.default.error("\u8bc4\u4f18\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}q(),w()}),0)}),[]),H=(0,h.useCallback)((e=>{const t=m()(v+e);F(t<=300?"lv.1":t<=900?"lv.2":t<=1900?"lv.3":t<=3100?"lv.4":"lv.5"),O(t),V.current=t}),[]),M=(0,h.useCallback)((0,x.D)(H,600,!1),[]);return(0,g.jsxs)("div",{children:[t?(0,g.jsx)(l.Z,{placement:"topLeft",title:"\u786e\u8ba4\u8be5\u8bc4\u8bba\u4e3a\u4f18\u8d28\u5417\uff1f",onConfirm:U,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,g.jsx)(c.Z,{danger:!0,children:"\u4f18\u8d28"})}):(0,g.jsx)(l.Z,{placement:"topRight",title:"\u786e\u8ba4\u53d6\u6d88\u8be5\u8bc4\u8bba\u7684\u4f18\u8d28\u5417\uff1f",onConfirm:_,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,g.jsx)(c.Z,{danger:!0,children:"\u53d6\u6d88\u4f18\u8d28"})}),(0,g.jsxs)(r.Z,{title:`\u8bbe\u7f6e${n}\u7684\u8bc4\u8bba\u4e3a\u4f18\u8d28`,visible:T,onOk:U,onCancel:q,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:[(0,g.jsxs)(i.Z,{children:[(0,g.jsx)(a.Z,{span:6,children:"\u5f53\u524d\u79ef\u5206\uff1a"}),(0,g.jsx)(a.Z,{span:8,children:v})]}),(0,g.jsxs)(i.Z,{children:[(0,g.jsx)(a.Z,{span:6,children:"\u589e\u52a0\u4f18\u8d28\u79ef\u5206\uff1a"}),(0,g.jsx)(a.Z,{span:8,children:(0,g.jsx)(s.Z,{min:1,onChange:M,style:{width:"200px"}})})]}),(0,g.jsxs)(i.Z,{children:[(0,g.jsx)(a.Z,{span:6,children:"\u9884\u8ba1\u79ef\u5206\uff1a"}),(0,g.jsx)(a.Z,{span:8,children:E})]}),(0,g.jsxs)(i.Z,{children:[(0,g.jsx)(a.Z,{span:6,children:"\u9884\u8ba1\u7b49\u7ea7\uff1a"}),(0,g.jsx)(a.Z,{span:8,children:$})]})]})]})}function w(e){const t=e.status,n=e.style;e.isExpert;return 1===t?(0,g.jsx)("span",{style:n,children:"\u6b63\u5e38"}):(0,g.jsx)("span",{style:{color:"red",...n},children:"\u5c01\u7981"})}function C(e){const t=e.user,n=e.refresh,r=e.style,s=e.isEnter,i=(0,h.useCallback)((async()=>{try{var e;let i={};var r;if(i=s?await(0,f.ER)({typeContent:"\u9ed1\u540d\u5355",businessId:"com_wind_vane",description:null===t||void 0===t?void 0:t.nickName,category:"userId",content:null===t||void 0===t?void 0:t.userId}):await(0,f.ZK)({idList:[t.id]}),200===(null===(e=i)||void 0===e?void 0:e.code))d.default.success("\u64cd\u4f5c\u6210\u529f\uff01"),n&&n();else d.default.error((null===(r=i)||void 0===r?void 0:r.message)||"\u670d\u52a1\u5668\u51fa\u95ee\u9898\u5566")}catch(i){}}),[s,t,n]);return(0,g.jsx)(l.Z,{placement:"topRight",title:`\u786e\u8ba4\u5c06\u8be5\u7528\u6237 ${s?"\u79fb\u5165":"\u79fb\u51fa"} \u9ed1\u540d\u5355\u5417`,onConfirm:i,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:s?(0,g.jsx)(c.Z,{danger:!0,style:r,children:"\u79fb\u5165\u9ed1\u540d\u5355"}):(0,g.jsx)(c.Z,{type:"primary",style:r,children:"\u79fb\u51fa\u9ed1\u540d\u5355"})})}function I(e){const t=e.isCol,n=e.style,r=e.subjectId,s=(0,y.zR)(r),i=s.adjustGrade,a=(s.isValidating,(0,h.useMemo)((()=>{switch(null===i||void 0===i?void 0:i.status){case 0:return(0,g.jsx)("span",{style:n,children:"\u8c03\u63a7\u5b8c\u6210"});case 1:return(0,g.jsx)("span",{style:{color:"#1890ff",...n},children:"\u8c03\u63a7\u4e2d"});default:return(0,g.jsx)("span",{style:n,children:"\u672a\u8c03\u63a7"})}}),[null===i||void 0===i?void 0:i.status]));return(0,g.jsxs)(g.Fragment,{children:[a,t?(null===i||void 0===i?void 0:i.opUser)&&(0,g.jsxs)("p",{style:{color:"#999"},children:[(null===i||void 0===i?void 0:i.opUser)||"","\u6700\u65b0\u8c03\u63a7"]}):(null===i||void 0===i?void 0:i.opUser)&&(0,g.jsxs)("span",{style:{marginLeft:8},children:["(",(null===i||void 0===i?void 0:i.opUser)||"","\u6700\u65b0\u8c03\u63a7)"]})]})}},40156:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(20594),s=n(67294),i=n(9548),a=n(59867),o=n(7084),l=n(2390),c=n(99086),d=n(18598),u=n(85893);const p=10,v={pagination:{pageSize:p,current:1},query:{businessId:c.YF,category:"userId",typeContent:"\u9ed1\u540d\u5355"},sort:{type:"desc",key:"createTime"}},m=()=>{const e=(0,s.useRef)(),t=(0,s.useRef)(),n=(0,s.useState)(v),a=(0,r.Z)(n,2),o=a[0],p=a[1],m=(0,c.fY)(o),h=m.blackList,y=m.pagination,f=m.isValidating,x=m.mutate;function g(e){const t=e.pagination,n=e.query;p((e=>({...e,pagination:t,query:{...n,businessId:c.YF,category:"userId",typeContent:"\u9ed1\u540d\u5355"}})))}const j=[{title:"\u7528\u6237\u540d",dataIndex:"description",render:(e,t)=>(0,u.jsx)(l.rU,{to:`/user-manage/user/${null===t||void 0===t?void 0:t.content}`,children:e})},{title:"\u64cd\u4f5c",render:(e,t)=>(0,u.jsx)(d.ab,{user:t,refresh:x})}],Z=[{name:"description",label:"\u7528\u6237\u540d",span:8,renderCom:"input"},{name:"content",span:8,label:"ID",renderCom:"input"}];return(0,u.jsx)(s.Fragment,{children:(0,u.jsx)(i.Z,{notQueryWhilestart:!0,formItem:Z,columns:j,rowKey:"content",formRef:e,ref:t,query:g,list:h,total:(null===y||void 0===y?void 0:y.total)||0,loading:f})})},h=(0,a.IX)(m,[o.uU.SYSTEM,o.uU.COMMENT])},99086:(e,t,n)=>{"use strict";n.d(t,{YF:()=>i,ER:()=>a,ZK:()=>o,fY:()=>l});var r=n(72709),s=n(17778);const i="com_wind_vane";function a(e){return(0,r.ZP)(`${s.tW}/blackList/api/picus-namelist/addNameList`,{method:"POST",body:e})}function o(e){return(0,r.ZP)(`${s.tW}/blackList/api/picus-namelist/removeNameList`,{method:"POST",body:e})}function l(e){var t,n;const r={code:200,level:200,msg:"success",data:{pagination:{current:1,total:1,pageSize:10,countPage:1},sort:{type:"desc",key:"createTime"},list:[{typeContent:"\u9ed1\u540d\u5355",createTime:"2022-04-25 10:44:09",businessId:"com_wind_vane",description:"Honeycomb",updateTime:"2022-04-25 10:44:09",id:882941,category:"userId",deadline:"2122-04-25 10:44:09",content:"6903959929825005666",operator:"maoliang",status:1}]}},s=!1,i=()=>{};return{blackList:(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.list)||[],pagination:(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.pagination)||{},isValidating:s,mutate:i}}},93606:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var r=n(54579),s=n.n(r);function i(e,t,n){let r;return function(){n&&!r&&e.apply(this,arguments),r&&clearTimeout(r),r=s()((()=>e.apply(this,arguments)),t)}}},62774:(e,t,n)=>{var r=n(13348),s=String.prototype;e.exports=function(e){var t=e.trim;return"string"===typeof e||e===s||e instanceof String&&t===s.trim?r:t}},13348:(e,t,n)=>{n(57398);var r=n(35703);e.exports=r("String").trim},75425:(e,t,n)=>{var r=n(62774);e.exports=r},93093:(e,t,n)=>{var r=n(95981),s=n(73483),i="\u200b\x85\u180e";e.exports=function(e){return r((function(){return!!s[e]()||i[e]()!=i||s[e].name!==e}))}},57398:(e,t,n)=>{"use strict";var r=n(76887),s=n(74853).trim,i=n(93093);r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})}}]);
//# sourceMappingURL=p__UserManage__BlackList.b7a705a2.async.js.map