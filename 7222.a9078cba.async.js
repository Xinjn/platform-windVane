(globalThis["webpackChunkwindvane"]=globalThis["webpackChunkwindvane"]||[]).push([[7222],{17778:(e,n,t)=>{"use strict";t.d(n,{tW:()=>r,j$:()=>i,ZP:()=>l});var a=t(11968);const o={appname:"\u98ce\u5411\u6807",namespace:"windvane",alias:"windvane",debug:!0,port:3e3,domain:".ifeng.com",logs:{level:"debug"},cdnCacheTime:120,linkLoginUrl:"/platform/user/login",authority:"manager_wingvane",basePath:".",publicPath:"/platform-windVane/",configToken:"prodToken",proxy:{"/platform/windvane/userRole":{target:"http://auth-server.cpdt.ifengidc.com",changeOrigin:!0,key:"/platform/windvane",value:""},"/platform/windvane/wingvate":{target:"http://picus.ifeng.com/api",changeOrigin:!0,key:"/platform/windvane/wingvate",value:""},"/platform/windvane/Cmpp":{target:"http://g.cmpp.ifeng.com",changeOrigin:!0,key:"/platform/windvane",value:""},"/platform/windvane/comment":{target:"http://comment-base-admin.ifengidc.com",changeOrigin:!0,key:"/platform/windvane/comment",value:""},"/platform/windvane/blackList":{target:"http://galio.ifeng.com",changeOrigin:!0,key:"/platform/windvane/blackList",value:""},"/platform/windvane/ucms":{target:"https://ucms.ifeng.com",changeOrigin:!0,key:"/platform/windvane/ucms",value:""},"/platform/windvane/fxb":{target:"https://local.datacenter.ifengidc.com",changeOrigin:!0,key:"/platform/windvane/fxb",value:""}}},r=`${o.basePath}`;function i(){const e=o.configToken,n=(o.basePath,o.linkLoginUrl,a.Z.get(e),{data:{code:0,message:"success",data:{displayName:"\u8f9b\u8fe6\u5357",group:"\u4ea7\u54c1\u7814\u53d1\u90e8-\u5e73\u53f0\u7814\u53d1\u4e2d\u5fc3-\u524d\u7aef\u7ec4",username:"xinjn",role:["manager_system_wingvane","manager_timeline","manager_meta","manager_meta_swan"]},error:void 0,isValidating:!1,mutate:()=>{}}});return n}const l=r},59867:(e,n,t)=>{"use strict";t.d(n,{Io:()=>Z,IX:()=>F});var a=t(67294),o=(t(57106),t(80002)),r=t(78363),i=t.n(r),l=t(70814),c=t.n(l),s=t(44721),d=t.n(s),m=t(69798),u=t.n(m);let p="NULL";const g=e=>n=>(n?("function"===typeof n&&(p=n()),("[object String]"===Object.prototype.toString.call(n)||i()(n))&&(p=n)):p="NULL",e),v=e=>g(e);t(20228);var f=t(11382),h=t(69417),w=t(65741),y=t(24889),k=t.n(y),b=t(85893);const T=()=>403,O=e=>{if(!e)return!1;const n=k()(e);return n===a.Component||n===Function.prototype||O(n)},C=e=>{if(O(e)){const n=e;return e=>(0,b.jsx)(n,{...e})}return a.isValidElement(e)?n=>a.cloneElement(e,n):()=>e},x=(e,n)=>{let t=!1;if(n&&(t=()=>n),!e)throw new Error("authority is required");return function(n){const a=R(e,n,t||T);return C(a)}},S=x;class j extends a.Component{constructor(...e){super(...e),this.state={component:()=>null},this.shouldComponentUpdate=(e,n)=>{const t=this.state.component;return(0,w.Z)(e,this.props)||this.setRenderComponent(e),n.component!==t},this.checkIsInstantiation=e=>{if(O(e)){const n=e;return e=>(0,b.jsx)(n,{...e})}return a.isValidElement(e)?n=>a.cloneElement(e,n):()=>e}}componentDidMount(){this.setRenderComponent(this.props)}setRenderComponent(e){const n=this.checkIsInstantiation(e.ok),t=this.checkIsInstantiation(e.error);e.promise.then((()=>(this.setState({component:n}),!0))).catch((()=>{this.setState({component:t})}))}render(){const e=this.state.component,n=this.props,t=(n.ok,n.error,n.promise,(0,h.Z)(n,["ok","error","promise"]));return e?(0,b.jsx)(e,{...t}):(0,b.jsx)("div",{style:{width:"100%",height:"100%",margin:"auto",paddingTop:50,textAlign:"center"},children:(0,b.jsx)(f.Z,{size:"large"})})}}const E=(e,n,t,a)=>{if(!e)return t;if(i()(e)){if(i()(n)){if(c()(n).call(n,(n=>d()(e).call(e,n))))return t}else if(d()(e).call(e,n))return t;return a}if("string"===typeof e){if(i()(n)){if(c()(n).call(n,(n=>e===n)))return t}else if(e===n)return t;return a}if(e instanceof u())return(0,b.jsx)(j,{ok:t,error:a,promise:e});if("function"===typeof e)try{const o=e(n);return o instanceof u()?(0,b.jsx)(j,{ok:t,error:a,promise:o}):o?t:a}catch(o){throw o}throw new Error("unsupported parameters")};function I(e,n,t){return E(e,p,n,t)}const R=I,L=({children:e,authority:n,noMatch:t=(0,b.jsx)(o.ZP,{status:403,title:"403",subTitle:"Sorry, you are not authorized to access this page."})})=>{const a="undefined"===typeof e?null:e,r=R(n,a,t);return(0,b.jsx)(b.Fragment,{children:r})},P=L;P.Secured=S,P.check=R;const U=v(P),$=U;var _=t(7084);let N=$((0,_.Cz)());const Z=()=>{N=$((0,_.Cz)())};window.reloadAuthorized=Z;const F=(e,n)=>{const t=t=>(0,b.jsx)(N,{authority:n,children:(0,b.jsx)(e,{...t})});return t}},7084:(e,n,t)=>{"use strict";t.d(n,{Cz:()=>i,LX:()=>l,uU:()=>c});var a=t(42825),o=t.n(a),r=t(59867);function i(){return JSON.parse(localStorage.getItem("authority")||"[]")}function l(e){localStorage.setItem("authority",o()(e)),(0,r.Io)()}let c;(function(e){e["SYSTEM"]="manager_system_wingvane",e["WORKS"]="manager_works_wingvane",e["COMMENT"]="manager_comment_wingvane",e["EXPERT"]="manager_expert_wingvane"})(c||(c={}))},96625:(e,n,t)=>{"use strict";t.d(n,{as:()=>y,no:()=>k,jW:()=>T,aZ:()=>C,HX:()=>x,$o:()=>j,FN:()=>I,OS:()=>R,u6:()=>L,a3:()=>P,Ry:()=>U,$h:()=>$,AF:()=>_,cS:()=>Z,lz:()=>F,o5:()=>z,Wz:()=>M,Fm:()=>V,f9:()=>D,tj:()=>W});var a,o,r,i,l,c,s,d,m,u,p,g,v=t(50047),f=t.n(v),h=t(64150),w=t.n(h);const y={"tv-play":"\u7535\u89c6\u5267",movie:"\u7535\u5f71",variety:"\u7efc\u827a"},k=f()(a=w()(y)).call(a,(([e,n])=>({value:e,label:n}))),b={0:"\u5f85\u5ba1\u6838",1:"\u4e0a\u7ebf",2:"\u4e0b\u7ebf"},T=f()(o=w()(b)).call(o,(([e,n])=>({value:e,label:n}))),O={110:"\u5c01\u7981",1:"\u6b63\u5e38"},C=(f()(r=w()(O)).call(r,(([e,n])=>({value:e,label:n}))),{1:"lv1",2:"lv2",3:"lv3",4:"lv4",5:"lv5"}),x=f()(i=w()(C)).call(i,(([e,n])=>({value:e,label:n}))),S={0:"\u975e\u4f18\u8d28",1:"\u4f18\u8d28"},j=f()(l=w()(S)).call(l,(([e,n])=>({value:e,label:n}))),E={0:"\u4e0b\u7ebf",1:"\u4e0a\u7ebf"},I=f()(c=w()(E)).call(c,(([e,n])=>({value:e,label:n}))),R={0:"\u4e0b\u7ebf","-1":"\u5ba1\u6838\u4e0b\u7ebf",1:"\u5ba1\u6838\u4e0a\u7ebf",2:"\u8fd0\u8425\u4e0a\u7ebf","-2":"\u5ba1\u6838\u4e0b\u7ebf"},L=f()(s=w()({0:"\u4e0b\u7ebf",1:"\u4e0a\u7ebf"})).call(s,(([e,n])=>({value:e,label:n}))),P={0:"\u5f85\u5904\u7406",2:"\u4e0d\u5904\u7406",1:"\u4e0b\u7ebf"},U={0:"\u653f\u6cbb\u76f8\u5173",1:"\u8272\u60c5\u4f4e\u4fd7",2:"\u8fdd\u6cd5\u8fdd\u89c4",3:"\u8fb1\u9a82\u653b\u51fb",4:"\u5f15\u6218",5:"\u4e0e\u4f5c\u54c1\u6216\u8ba8\u8bba\u533a\u4e3b\u9898\u65e0\u5173",6:"\u5f71\u54cd\u8bc4\u5206\u516c\u6b63\u6027",7:"\u6cc4\u9732\u4ed6\u4eba\u9690\u79c1",8:"\u5e7f\u544a",9:"\u5176\u4ed6"},$={0:"\u5f85\u5ba1\u6838",1:"\u5ba1\u6838\u4e0a\u7ebf",2:"\u5ba1\u6838\u4e0b\u7ebf"},_="wxae1b8c979eebd164",N={createTime:"\u521b\u5efa\u65f6\u95f4",likeCount:"\u70b9\u8d5e\u6570"},Z=f()(d=w()(N)).call(d,(([e,n])=>({value:e,label:n}))),F={1:"\u5b98\u65b9",2:"\u7528\u6237"},z=f()(m=w()(F)).call(m,(([e,n])=>({value:e,label:n}))),M={1:"\u516c\u5f00",2:"\u79c1\u5bc6"},V=f()(u=w()(M)).call(u,(([e,n])=>({value:e,label:n}))),A={MOVIE:"movie",LISTCONTENT:"listContent"},D=(e="movie")=>e===A.LISTCONTENT,q={0:"\u5f85\u5ba1\u6838",44:"\u5ba1\u6838\u4e0d\u901a\u8fc7",100:"\u5ba1\u6838\u901a\u8fc7"},H=(f()(p=w()(q)).call(p,(([e,n])=>({value:e,label:n}))),{default:"\u4f5c\u54c1",listContent:"\u7247\u5355"}),W=f()(g=w()(H)).call(g,(([e,n])=>({value:e,label:n})))},11968:(e,n,t)=>{"use strict";t.d(n,{Z:()=>s});var a=t(28834),o=t.n(a);const r=36e5;function i(e){let n="";const t=document.cookie.replace(/\s+/g,""),a=t.split(";"),r={};return o()(a).call(a,(e=>{const n=e.split("="),t=n[0],a=n[1];r[t]=a})),e&&(n=r[e]),n}function l(e,n,t={}){let a=t.expires;if(!isNaN(a)){const e=a;a=new Date,a.setTime(a.getTime()+e*r)}let o=t.path;null==o&&(o="/");const i=t.domain;document.cookie=[encodeURIComponent(e),"=",encodeURIComponent(n),a?";expires="+a.toUTCString():"",";path="+o,i?";domain="+i:"",t.secure?";secure":""].join("")}function c(e,n={}){null!=e&&(n.expires=null,l(e,"",n))}const s={set:l,get:i,remove:c}},72709:(e,n,t)=>{"use strict";t.d(n,{ZP:()=>Y});t(34792);var a,o=t(78042),r=(t(74379),t(38648)),i=t(69417),l=t(93273),c=t.n(l),s=t(50047),d=t.n(s),m=t(64150),u=t.n(m),p=t(98882),g=t.n(p),v=t(89356),f=t.n(v),h=t(51614),w=t.n(h),y=t(44721),k=t.n(y),b=t(42825),T=t.n(b),O=t(28834),C=t.n(O),x=t(54579),S=t.n(x),j=t(69798),E=t.n(j),I=t(9669),R=t.n(I),L=t(55877),P=t(11968),U=t(65096),$=t.n(U),_=t(96625);const N=new($()),Z={appname:"\u98ce\u5411\u6807",namespace:"windvane",alias:"windvane",debug:!0,port:3e3,domain:".ifeng.com",logs:{level:"debug"},cdnCacheTime:120,linkLoginUrl:"/platform/user/login",authority:"manager_wingvane",basePath:".",publicPath:"/platform-windVane/",configToken:"prodToken",proxy:{"/platform/windvane/userRole":{target:"http://auth-server.cpdt.ifengidc.com",changeOrigin:!0,key:"/platform/windvane",value:""},"/platform/windvane/wingvate":{target:"http://picus.ifeng.com/api",changeOrigin:!0,key:"/platform/windvane/wingvate",value:""},"/platform/windvane/Cmpp":{target:"http://g.cmpp.ifeng.com",changeOrigin:!0,key:"/platform/windvane",value:""},"/platform/windvane/comment":{target:"http://comment-base-admin.ifengidc.com",changeOrigin:!0,key:"/platform/windvane/comment",value:""},"/platform/windvane/blackList":{target:"http://galio.ifeng.com",changeOrigin:!0,key:"/platform/windvane/blackList",value:""},"/platform/windvane/ucms":{target:"https://ucms.ifeng.com",changeOrigin:!0,key:"/platform/windvane/ucms",value:""},"/platform/windvane/fxb":{target:"https://local.datacenter.ifengidc.com",changeOrigin:!0,key:"/platform/windvane/fxb",value:""}}},F=Z.configToken,z=Z.domain,M=Z.projectVerson,V=Z.basePath,A=Z.proxy,D=P.Z.get(F),q=c()(d()(a=u()(A)).call(a,(([e,n])=>{var t,a;let o=(null===n||void 0===n?void 0:n.target.replace(/\/$/,""))+e;return o=null===(t=o)||void 0===t?void 0:t.replace(n.key,n.value||""),null!==n&&void 0!==n&&null!==(a=n.headers)&&void 0!==a&&a.HOST&&(o=o.replace(/(\d+\.){3}\d+/,n.headers.HOST)),[e,o]}))),H={200:"\u670d\u52a1\u5668\u6210\u529f\u8fd4\u56de\u8bf7\u6c42\u7684\u6570\u636e\u3002",201:"\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u6210\u529f\u3002",202:"\u4e00\u4e2a\u8bf7\u6c42\u5df2\u7ecf\u8fdb\u5165\u540e\u53f0\u6392\u961f\uff08\u5f02\u6b65\u4efb\u52a1\uff09\u3002",204:"\u5220\u9664\u6570\u636e\u6210\u529f\u3002",400:"\u53d1\u51fa\u7684\u8bf7\u6c42\u6709\u9519\u8bef\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u7684\u64cd\u4f5c\u3002",401:"\u7528\u6237\u6ca1\u6709\u6743\u9650\uff08\u4ee4\u724c\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u9519\u8bef\uff09\u3002",403:"\u7528\u6237\u5f97\u5230\u6388\u6743\uff0c\u4f46\u662f\u8bbf\u95ee\u662f\u88ab\u7981\u6b62\u7684\u3002",404:"\u53d1\u51fa\u7684\u8bf7\u6c42\u9488\u5bf9\u7684\u662f\u4e0d\u5b58\u5728\u7684\u8bb0\u5f55\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u64cd\u4f5c\u3002",406:"\u8bf7\u6c42\u7684\u683c\u5f0f\u4e0d\u53ef\u5f97\u3002",410:"\u8bf7\u6c42\u7684\u8d44\u6e90\u88ab\u6c38\u4e45\u5220\u9664\uff0c\u4e14\u4e0d\u4f1a\u518d\u5f97\u5230\u7684\u3002",422:"\u5f53\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53d1\u751f\u4e00\u4e2a\u9a8c\u8bc1\u9519\u8bef\u3002",500:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u3002",502:"\u7f51\u5173\u9519\u8bef\u3002",503:"\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u670d\u52a1\u5668\u6682\u65f6\u8fc7\u8f7d\u6216\u7ef4\u62a4\u3002",504:"\u7f51\u5173\u8d85\u65f6\u3002"},W=e=>{var n;const t=g()(n=f()(q)).call(n,(n=>w()(e).call(e,n)))||"",a=q[t]||t,o=e.replace(t,a);return`${o}${k()(o).call(o,"?")?"&":"?"}version=${M}`},X=["Request aborted"];function G({err:e,url:n,title:t}){if(!k()(X).call(X,null===e||void 0===e?void 0:e.message))try{R()({url:`${V}/api/warn/schema/save`,method:"post",responseType:"json",headers:{"content-type":"application/json"},data:{namespace:"platform",appname:"wind-vave",url:location.href,title:t,type:"api",message:T()(e),error:[],data:{sourceUrl:W(n),operator:localStorage.username}},timeout:6e5})}catch(a){console.error(a)}}function J(e,n,t){var a;const o=e.status<200||e.status>300,r=null===(a=e.data)||void 0===a?void 0:a.code,i=!n&&0!==r&&200!==r&&r!==t;if(!o&&!i)return e;const l=e.data,c=o?e.status:null===l||void 0===l?void 0:l.code,s=o?null===l||void 0===l?void 0:l.message:(null===l||void 0===l?void 0:l.msg)||(null===l||void 0===l?void 0:l.message),d=new Error(s||H[c]);throw d.status=c,d.response=e,d}const B=(e,n,t)=>{if("object"===typeof n){const o=N.validate(e,n),r=null===t||void 0===t?void 0:t.url;var a;if(!o)null===(a=N.errors)||void 0===a||C()(a).call(a,(e=>{const a={message:`${e.keyword} OF ${e.dataPath} ${e.message} FROM '${r}'`,data:n,option:null===t||void 0===t?void 0:t.body},o=` JSON SCHEMA ERROR : ${T()(a,null,2)} `;console.error(o),G({err:a,url:r,title:"schema \u9519\u8bef"})}))}};async function K(e,n={}){const t=n.withoutError,a=n.schema,l=n.body,c=n.withoutCheckCode,s=n.successCode,d=(0,i.Z)(n,["withoutError","schema","body","withoutCheckCode","successCode"]);try{var m,u,p,g;const n={method:null!==(m=null===d||void 0===d?void 0:d.method)&&void 0!==m?m:"GET",headers:{authorization:`Bearer ${D}`,commentAppId:_.AF,versionInfo:T()({url:encodeURIComponent(W(e)),id:(0,L.v4)()}),...(null===d||void 0===d?void 0:d.headers)||{}},data:k()(u=["POST","PUT"]).call(u,(null===d||void 0===d?void 0:d.method)||"GET")?{body:l}:l,responseType:null!==(p=null===d||void 0===d?void 0:d.responseType)&&void 0!==p?p:"json",validateStatus:()=>!0,timeout:6e5};d.method&&k()(g=["POST","PUT","DELETE"]).call(g,d.method)&&l&&l instanceof FormData&&(n.transformRequest=e=>e);const t=await R()({url:e,...n});J(t,c,s),a&&B(a,t.data,{url:e,body:l});const o=t.data,i=o.code,v=o.message;return 200===i||k()(e).call(e,"userRole")||k()(e).call(e,"upload")||k()(e).call(e,"getFxbData")||r.default.error({message:v}),t.data}catch(h){console.log("request error");const e=h.status;var v,f;if(401!==e&&-2!==e||(r.default.destroy(),r.default.error({message:H["401"]}),P.Z.remove(F,{domain:z}),S()((()=>{window.location.href=`${{appname:"\u98ce\u5411\u6807",namespace:"windvane",alias:"windvane",debug:!0,port:3e3,domain:".ifeng.com",logs:{level:"debug"},cdnCacheTime:120,linkLoginUrl:"/platform/user/login",authority:"manager_wingvane",basePath:".",publicPath:"/platform-windVane/",configToken:"prodToken",proxy:{"/platform/windvane/userRole":{target:"http://auth-server.cpdt.ifengidc.com",changeOrigin:!0,key:"/platform/windvane",value:""},"/platform/windvane/wingvate":{target:"http://picus.ifeng.com/api",changeOrigin:!0,key:"/platform/windvane/wingvate",value:""},"/platform/windvane/Cmpp":{target:"http://g.cmpp.ifeng.com",changeOrigin:!0,key:"/platform/windvane",value:""},"/platform/windvane/comment":{target:"http://comment-base-admin.ifengidc.com",changeOrigin:!0,key:"/platform/windvane/comment",value:""},"/platform/windvane/blackList":{target:"http://galio.ifeng.com",changeOrigin:!0,key:"/platform/windvane/blackList",value:""},"/platform/windvane/ucms":{target:"https://ucms.ifeng.com",changeOrigin:!0,key:"/platform/windvane/ucms",value:""},"/platform/windvane/fxb":{target:"https://local.datacenter.ifengidc.com",changeOrigin:!0,key:"/platform/windvane/fxb",value:""}}}.linkLoginUrl}?redirect=${encodeURIComponent(window.location.href)}`}),1500)),!t)return o.default.destroy(),o.default.error((null===h||void 0===h||null===(v=h.response)||void 0===v||null===(f=v.data)||void 0===f?void 0:f.msg)||h.message),E().reject(h)}}const Y=K}}]);
//# sourceMappingURL=7222.a9078cba.async.js.map