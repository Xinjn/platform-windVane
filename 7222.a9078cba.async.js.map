{"version":3,"sources":["webpack://windvane/./src/services/login.ts","webpack://windvane/./src/components/Authorized/renderAuthorize.ts","webpack://windvane/./src/components/Authorized/Secured.tsx","webpack://windvane/./src/components/Authorized/PromiseRender.tsx","webpack://windvane/./src/components/Authorized/CheckPermissions.tsx","webpack://windvane/./src/components/Authorized/Authorized.tsx","webpack://windvane/./src/components/Authorized/index.tsx","webpack://windvane/./src/utils/Authorized.tsx","webpack://windvane/./src/utils/authority.ts","webpack://windvane/./src/utils/constant.js","webpack://windvane/./src/utils/cookie.js","webpack://windvane/./src/utils/request.ts"],"names":["processConfig","process","requestBasePath","basePath","useUserRole","configToken","userRole","linkLoginUrl","cookie","data","code","message","displayName","group","username","role","error","undefined","isValidating","mutate","CURRENT","renderAuthorize","Authorized","currentAuthority","Object","prototype","toString","call","Exception403","isComponentClass","component","proto","React","Function","checkIsInstantiation","target","Target","props","authorize","authority","classError","Error","CheckPermissions","PromiseRender","state","shouldComponentUpdate","nextProps","nextState","this","isEqual","setRenderComponent","componentDidMount","ok","promise","then","setState","catch","render","Component","rest","style","width","height","margin","paddingTop","textAlign","size","checkPermissions","Exception","item","bool","check","children","noMatch","status","title","subTitle","childrenRender","dom","Secured","RenderAuthorize","getAuthority","reloadAuthorized","window","withAuthorized","AuthElement","wrapeedElement","JSON","parse","localStorage","getItem","setAuthority","setItem","Role","ProductionClass","movie","variety","ProductionClassMaps","value","label","CommentStatus","0","1","2","CommentStatusMaps","UserStatus","110","UserLevel","3","4","5","UserLevelMaps","isGoodComment","isGoodCommentMaps","ProductionStatus","ProductionStatusMaps","FilmStatus","FilmStatusMaps","REPORT_DEAL_STATUS","REPORT_TYPE","6","7","8","9","REPORT_CHECK_STATUS","APP_ID","SortOptions","createTime","likeCount","SortOptionsMaps","FilmTypeOptions","FilmTypeOptionsMaps","VisiableOptions","VisiableOptionsMaps","docType","MOVIE","LISTCONTENT","isListContent","type","auditStatus","44","100","subjectType","subjectTypeMaps","HOUR_TIME","getCookie","name","result","trimCookie","document","replace","cookieArr","split","cookieObj","eachArr","key","setCookie","options","expires","isNaN","hours","Date","setTime","getTime","path","domain","encodeURIComponent","toUTCString","secure","join","remove","set","get","ajv","Ajv","projectVerson","proxy","token","proxyMap","proxyUrl","config","realurl","headers","HOST","codeMessage","200","201","202","204","400","401","403","404","406","410","422","500","502","503","504","transformPathToUrl","prePath","realPath","url","whitelistMessage","updateError","err","axios","method","responseType","namespace","appname","location","href","sourceUrl","operator","timeout","console","checkStatus","response","withoutCheckCode","successCode","isResponseError","dataCode","isDataError","errorStatus","errorText","msg","checkSchema","schema","requestOption","valid","validate","errors","errorObj","keyword","dataPath","option","body","errorMessage","async","request","requestOptions","withoutError","requestConfig","authorization","commentAppId","versionInfo","id","uuidv4","validateStatus","FormData","transformRequest","dataMessage","log"],"mappings":"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","file":"7222.a9078cba.async.js","sourcesContent":["import useSWR from '@/hooks/useSWR';\nimport request from '@/utils/request';\nimport cookie from '@/utils/cookie.js';\nimport { UserInfo, ResponseData } from '@/types/types';\n\n\nconst processConfig = process['CONFIG'];\n\nexport const requestBasePath = `${ processConfig.basePath }`;\n\n// 获取用户信息\nexport function useUserRole() {\n  const { configToken, basePath, linkLoginUrl } = processConfig;\n  const token = cookie.get(configToken);\n\n  // if (!token) {\n  //   window.location.href = `${ linkLoginUrl }?url=${ encodeURIComponent(location.pathname) }`;\n  // }\n\n  // const fetcher = (url: string) => request<ResponseData<UserInfo>>(url, {\n  //   method: 'get',\n  //   headers: {\n  //     authorization: `Bearer ${ token }`,\n  //     Accept: 'application/json',\n  //     'Content-Type': 'application/json; charset=utf-8'\n  //   }\n  // });\n\n  // return useSWR<ResponseData<UserInfo> | undefined>(`${ basePath }/userRole`, fetcher);\n\n\n  // Mock:返回用户权限数据\n  // return useSWR('/api/userRole', fetcher);\n\n\n  const userRole = {\n    data:{\n      code: 0,\n      message: \"success\",\n      data: {\n        displayName: \"辛迦南\",\n        group: \"产品研发部-平台研发中心-前端组\",\n        username: \"xinjn\",\n        role:['manager_system_wingvane',\"manager_timeline\",\"manager_meta\",\"manager_meta_swan\"]\n      },\n      error: undefined,\n      isValidating: false,\n      mutate:()=>{}\n    }\n  }\n\n  return userRole\n}\n\n\nexport default requestBasePath;\n","/* eslint-disable eslint-comments/disable-enable-pair */\n/* eslint-disable import/no-mutable-exports */\nlet CURRENT: string | string[] = 'NULL';\n\ntype CurrentAuthorityType = string | string[] | (() => typeof CURRENT);\n/**\n * use  authority or getAuthority\n * @param {string|()=>String} currentAuthority\n */\nconst renderAuthorize = <T>(Authorized: T): ((currentAuthority: CurrentAuthorityType) => T) => (\n  currentAuthority: CurrentAuthorityType,\n): T => {\n  if (currentAuthority) {\n    if (typeof currentAuthority === 'function') {\n      CURRENT = currentAuthority();\n    }\n    if (\n      Object.prototype.toString.call(currentAuthority) === '[object String]' ||\n      Array.isArray(currentAuthority)\n    ) {\n      CURRENT = currentAuthority as string[];\n    }\n  } else {\n    CURRENT = 'NULL';\n  }\n  return Authorized;\n};\n\nexport { CURRENT };\nexport default <T>(Authorized: T) => renderAuthorize<T>(Authorized);\n","import * as React from 'react';\nimport CheckPermissions from './CheckPermissions';\n\n/**\n * 默认不能访问任何页面\n * default is \"NULL\"\n */\nconst Exception403 = () => 403;\n\nexport const isComponentClass = (component: React.ComponentClass | React.ReactNode): boolean => {\n  if (!component) return false;\n  const proto = Object.getPrototypeOf(component);\n  if (proto === React.Component || proto === Function.prototype) return true;\n  return isComponentClass(proto);\n};\n\n// Determine whether the incoming component has been instantiated\n// AuthorizedRoute is already instantiated\n// Authorized  render is already instantiated, children is no instantiated\n// Secured is not instantiated\nconst checkIsInstantiation = (target: React.ComponentClass | React.ReactNode) => {\n  if (isComponentClass(target)) {\n    const Target = target as React.ComponentClass;\n    return (props: any) => <Target {...props} />;\n  }\n  if (React.isValidElement(target)) {\n    return (props: any) => React.cloneElement(target, props);\n  }\n  return () => target;\n};\n\n/**\n * 用于判断是否拥有权限访问此 view 权限\n * authority 支持传入 string, () => boolean | Promise\n * e.g. 'user' 只有 user 用户能访问\n * e.g. 'user,admin' user 和 admin 都能访问\n * e.g. ()=>boolean 返回true能访问,返回false不能访问\n * e.g. Promise  then 能访问   catch不能访问\n * e.g. authority support incoming string, () => boolean | Promise\n * e.g. 'user' only user user can access\n * e.g. 'user, admin' user and admin can access\n * e.g. () => boolean true to be able to visit, return false can not be accessed\n * e.g. Promise then can not access the visit to catch\n * @param {string | function | Promise} authority\n * @param {ReactNode} error 非必需参数\n */\nconst authorize = (authority: string, error?: React.ReactNode) => {\n  /**\n   * conversion into a class\n   * 防止传入字符串时找不到staticContext造成报错\n   * String parameters can cause staticContext not found error\n   */\n  let classError: boolean | React.FunctionComponent = false;\n  if (error) {\n    classError = (() => error) as React.FunctionComponent;\n  }\n  if (!authority) {\n    throw new Error('authority is required');\n  }\n  return function decideAuthority(target: React.ComponentClass | React.ReactNode) {\n    const component = CheckPermissions(authority, target, classError || Exception403);\n    return checkIsInstantiation(component);\n  };\n};\n\nexport default authorize;\n","import * as React from 'react';\nimport { Spin } from 'antd';\nimport isEqual from 'lodash-es/isEqual';\nimport { isComponentClass } from './Secured';\n// eslint-disable-next-line import/no-cycle\n\ninterface PromiseRenderProps<T, K> {\n  ok: T;\n  error: K;\n  promise: Promise<boolean>;\n}\n\ninterface PromiseRenderState {\n  component: React.ComponentClass | React.FunctionComponent;\n}\n\nexport default class PromiseRender<T, K> extends React.Component<\n  PromiseRenderProps<T, K>,\n  PromiseRenderState\n> {\n  state: PromiseRenderState = {\n    component: () => null,\n  };\n\n  componentDidMount() {\n    this.setRenderComponent(this.props);\n  }\n\n  shouldComponentUpdate = (nextProps: PromiseRenderProps<T, K>, nextState: PromiseRenderState) => {\n    const { component } = this.state;\n    if (!isEqual(nextProps, this.props)) {\n      this.setRenderComponent(nextProps);\n    }\n    if (nextState.component !== component) return true;\n    return false;\n  };\n\n  // set render Component : ok or error\n  setRenderComponent(props: PromiseRenderProps<T, K>) {\n    const ok = this.checkIsInstantiation(props.ok);\n    const error = this.checkIsInstantiation(props.error);\n    props.promise\n      .then(() => {\n        this.setState({\n          component: ok,\n        });\n        return true;\n      })\n      .catch(() => {\n        this.setState({\n          component: error,\n        });\n      });\n  }\n\n  // Determine whether the incoming component has been instantiated\n  // AuthorizedRoute is already instantiated\n  // Authorized  render is already instantiated, children is no instantiated\n  // Secured is not instantiated\n  checkIsInstantiation = (\n    target: React.ReactNode | React.ComponentClass,\n  ): React.FunctionComponent => {\n    if (isComponentClass(target)) {\n      const Target = target as React.ComponentClass;\n      return (props: any) => <Target {...props} />;\n    }\n    if (React.isValidElement(target)) {\n      return (props: any) => React.cloneElement(target, props);\n    }\n    return () => target as React.ReactNode & null;\n  };\n\n  render() {\n    const { component: Component } = this.state;\n    const { ok, error, promise, ...rest } = this.props;\n\n    return Component ? (\n      <Component {...rest} />\n    ) : (\n      <div\n        style={{\n          width: '100%',\n          height: '100%',\n          margin: 'auto',\n          paddingTop: 50,\n          textAlign: 'center',\n        }}\n      >\n        <Spin size=\"large\" />\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { CURRENT } from './renderAuthorize';\n// eslint-disable-next-line import/no-cycle\nimport PromiseRender from './PromiseRender';\n\nexport type IAuthorityType =\n  | undefined\n  | string\n  | string[]\n  | Promise<boolean>\n  | ((currentAuthority: string | string[]) => IAuthorityType);\n\n/**\n * 通用权限检查方法\n * Common check permissions method\n * @param { 权限判定 | Permission judgment } authority\n * @param { 你的权限 | Your permission description } currentAuthority\n * @param { 通过的组件 | Passing components } target\n * @param { 未通过的组件 | no pass components } Exception\n */\nconst checkPermissions = <T, K>(\n  authority: IAuthorityType,\n  currentAuthority: string | string[],\n  target: T,\n  Exception: K,\n): T | K | React.ReactNode => {\n  // 没有判定权限.默认查看所有\n  // Retirement authority, return target;\n  if (!authority) {\n    return target;\n  }\n  // 数组处理\n  if (Array.isArray(authority)) {\n    if (Array.isArray(currentAuthority)) {\n      if (currentAuthority.some(item => authority.includes(item))) {\n        return target;\n      }\n    } else if (authority.includes(currentAuthority)) {\n      return target;\n    }\n    return Exception;\n  }\n  // string 处理\n  if (typeof authority === 'string') {\n    if (Array.isArray(currentAuthority)) {\n      if (currentAuthority.some(item => authority === item)) {\n        return target;\n      }\n    } else if (authority === currentAuthority) {\n      return target;\n    }\n    return Exception;\n  }\n  // Promise 处理\n  if (authority instanceof Promise) {\n    return <PromiseRender<T, K> ok={target} error={Exception} promise={authority} />;\n  }\n  // Function 处理\n  if (typeof authority === 'function') {\n    try {\n      const bool = authority(currentAuthority);\n      // 函数执行后返回值是 Promise\n      if (bool instanceof Promise) {\n        return <PromiseRender<T, K> ok={target} error={Exception} promise={bool} />;\n      }\n      if (bool) {\n        return target;\n      }\n      return Exception;\n    } catch (error) {\n      throw error;\n    }\n  }\n  throw new Error('unsupported parameters');\n};\n\nexport { checkPermissions };\n\nfunction check<T, K>(authority: IAuthorityType, target: T, Exception: K): T | K | React.ReactNode {\n  return checkPermissions<T, K>(authority, CURRENT, target, Exception);\n}\n\nexport default check;\n","import * as React from 'react';\nimport { Result } from 'antd';\nimport check, { IAuthorityType } from './CheckPermissions';\n\nimport AuthorizedRoute from './AuthorizedRoute';\nimport Secured from './Secured';\n\ninterface AuthorizedProps {\n  authority: IAuthorityType;\n  noMatch?: React.ReactNode;\n}\n\ntype IAuthorizedType = React.FunctionComponent<AuthorizedProps> & {\n  Secured: typeof Secured;\n  check: typeof check;\n  AuthorizedRoute: typeof AuthorizedRoute;\n};\n\nconst Authorized: React.FunctionComponent<AuthorizedProps> = ({\n  children,\n  authority,\n  noMatch = (\n    <Result\n      status={403}\n      title=\"403\"\n      subTitle=\"Sorry, you are not authorized to access this page.\"\n    />\n  ),\n}) => {\n  const childrenRender: React.ReactNode = typeof children === 'undefined' ? null : children;\n  const dom = check(authority, childrenRender, noMatch);\n  return <>{dom}</>;\n};\n\nexport default Authorized as IAuthorizedType;\n","import Authorized from './Authorized';\nimport Secured from './Secured';\nimport check from './CheckPermissions';\nimport renderAuthorize from './renderAuthorize';\n\nAuthorized.Secured = Secured;\nAuthorized.check = check;\n\nconst RenderAuthorize = renderAuthorize(Authorized);\n\nexport default RenderAuthorize;\n","import React from 'react';\nimport RenderAuthorize from '@/components/Authorized';\nimport { getAuthority } from './authority';\nlet Authorized = RenderAuthorize(getAuthority());\n\n// Reload the rights component\nconst reloadAuthorized = (): void => {\n  Authorized = RenderAuthorize(getAuthority());\n};\n\n/**\n * hard code\n * block need it。\n */\n// @ts-ignore\nwindow.reloadAuthorized = reloadAuthorized;\n\nexport { reloadAuthorized };\nexport default Authorized;\n\nexport const withAuthorized = (AuthElement: any, authority: any) => {\n  const wrapeedElement = (props: any) => (\n    <Authorized authority={ authority }>\n      <AuthElement { ...props } />\n    </Authorized>\n  );\n\n  return wrapeedElement;\n};\n","import { reloadAuthorized } from './Authorized';\n\n\n// use localStorage to store the authority info, which might be sent from server in actual project.\nexport function getAuthority(): string[] {\n  return JSON.parse(localStorage.getItem('authority') || \"[]\")\n}\n\n\nexport function setAuthority(authority: string[] ): void {\n  localStorage.setItem('authority', JSON.stringify(authority));\n  // auto reload\n  reloadAuthorized();\n}\n\n\nexport enum Role {\n  SYSTEM = 'manager_system_wingvane', // 风向标系统管理员\n  WORKS = 'manager_works_wingvane', // 风向标作品管理员\n  COMMENT = 'manager_comment_wingvane', // 风向标评论审核员\n  EXPERT = 'manager_expert_wingvane' // 风向标专家账号管理员\n}","// 作品品类\nexport const ProductionClass = {\n  'tv-play': '电视剧',\n  movie: '电影',\n  variety: '综艺',\n};\nexport const ProductionClassMaps = Object.entries(\n  ProductionClass\n).map(([value, label]) => ({ value, label }));\n\n// 评论状态\nexport const CommentStatus = {\n  0: '待审核',\n  1: '上线',\n  2: '下线',\n};\nexport const CommentStatusMaps = Object.entries(\n  CommentStatus\n).map(([value, label]) => ({ value, label }));\n\n// 用户状态\nexport const UserStatus = {\n  110: '封禁',\n  1: '正常',\n};\nexport const UserStatusMaps = Object.entries(\n  UserStatus\n).map(([value, label]) => ({ value, label }));\n\n// todo等级\nexport const UserLevel = {\n  1: 'lv1',\n  2: 'lv2',\n  3: 'lv3',\n  4: 'lv4',\n  5: 'lv5',\n};\nexport const UserLevelMaps = Object.entries(\n  UserLevel\n).map(([value, label]) => ({ value, label }));\n// todo 优质状态\nexport const isGoodComment = {\n  0: '非优质',\n  1: '优质',\n};\nexport const isGoodCommentMaps = Object.entries(\n  isGoodComment\n).map(([value, label]) => ({ value, label }));\n// 类型\nexport const commentType = {};\n\n// 作品状态\nexport const ProductionStatus = {\n  0: '下线',\n  1: '上线',\n};\nexport const ProductionStatusMaps = Object.entries(\n  ProductionStatus\n).map(([value, label]) => ({ value, label }));\n\nexport const FilmStatus = {\n  0: '下线',\n  '-1': '审核下线',\n  1: '审核上线',\n  2: '运营上线',\n  '-2': '审核下线',\n};\nexport const FilmStatusMaps = Object.entries({\n  '0': '下线',\n  '1': '上线',\n}).map(([value, label]) => ({ value, label }));\n\n// 举报类型\nexport const REPORT_DEAL_STATUS = {\n  0: '待处理',\n  2: '不处理',\n  1: '下线',\n};\n\n// 举报类型\nexport const REPORT_TYPE = {\n  0: '政治相关',\n  1: '色情低俗',\n  2: '违法违规',\n  3: '辱骂攻击',\n  4: '引战',\n  5: '与作品或讨论区主题无关',\n  6: '影响评分公正性',\n  7: '泄露他人隐私',\n  8: '广告',\n  9: '其他',\n};\n\n// 举报数据的评论状态\nexport const REPORT_CHECK_STATUS = {\n  0: '待审核',\n  1: '审核上线',\n  2: '审核下线',\n};\n\nexport const APP_ID = 'wxae1b8c979eebd164';\n\n// 排序\nexport const SortOptions = {\n  createTime: '创建时间',\n  likeCount: '点赞数',\n};\nexport const SortOptionsMaps = Object.entries(\n  SortOptions\n).map(([value, label]) => ({ value, label }));\n\n// 片单类型\nexport const FilmTypeOptions = {\n  1: '官方',\n  2: '用户',\n};\nexport const FilmTypeOptionsMaps = Object.entries(\n  FilmTypeOptions\n).map(([value, label]) => ({ value, label }));\n\n// 隐私设置\nexport const VisiableOptions = {\n  1: '公开',\n  2: '私密',\n};\nexport const VisiableOptionsMaps = Object.entries(\n  VisiableOptions\n).map(([value, label]) => ({ value, label }));\n\nexport const docType = {\n  MOVIE: 'movie', // 作品\n  LISTCONTENT: 'listContent', // 片单\n};\n\nexport const isListContent = (type = 'movie') => type === docType.LISTCONTENT;\n\nexport const auditStatus = {\n  0: '待审核',\n  44: '审核不通过',\n  100: '审核通过',\n};\n\nexport const AuditStatusMaps = Object.entries(\n  auditStatus\n).map(([value, label]) => ({ value, label }));\n\nexport const subjectType = {\n  'default': '作品',\n  'listContent': '片单',\n};\n\nexport const subjectTypeMaps = Object.entries(\n  subjectType\n).map(([value, label]) => ({ value, label }));\n","/* eslint-disable*/\nconst HOUR_TIME = 60 * 60 * 1000;\n\nfunction getCookie(name) {\n  let result = '';\n  // 去掉空格\n  const trimCookie = document.cookie.replace(/\\s+/g, '');\n  // 拆分成数组\n  const cookieArr = trimCookie.split(';');\n  // 组装成对象\n  const cookieObj = {};\n  cookieArr.forEach(item => {\n    const eachArr = item.split('=');\n    const key = eachArr[0];\n    const value = eachArr[1];\n    cookieObj[key] = value;\n  });\n  \n  if (name) {\n    result = cookieObj[name];\n  }\n\n  return result;\n}\n\n/**\n * 设置 cookie\n *\n * @inner\n * @param {string} name\n * @param {string} value\n * @param {Object=} options\n */\nfunction setCookie(name, value, options = {}) {\n  let expires = options.expires;\n\n  if (!isNaN(expires)) {\n    const hours = expires;\n    expires = new Date();\n    expires.setTime(expires.getTime() + hours * HOUR_TIME);\n  }\n\n  let path = options.path;\n  if (path == null) {\n    // 保证网站全局可用\n    path = '/';\n  }\n\n  const domain = options.domain;\n  document.cookie = [\n    encodeURIComponent(name),\n    '=',\n    encodeURIComponent(value),\n    expires ? ';expires=' + expires.toUTCString() : '',\n    ';path=' + path,\n    domain ? ';domain=' + domain : '',\n    options.secure ? ';secure' : '',\n  ].join('');\n}\n\nfunction remove(key, options = {}) {\n  if (key == null) {\n    return;\n  }\n  options.expires = null;\n\n  setCookie(key, '', options);\n}\n\nexport default {\n  set: setCookie,\n  get: getCookie,\n  remove: remove,\n};\n","/* request网络请求 */\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { notification, message } from 'antd';\nimport { v4 as uuidv4 } from 'uuid';\nimport cookie from '@/utils/cookie';\nimport Ajv, { ErrorObject } from 'ajv';\nimport { APP_ID } from '@/utils/constant.js';\nconst ajv = new Ajv();\n// @ts-ignore\nconst { configToken, domain, projectVerson, basePath, proxy } = process.CONFIG;\n\nexport const token = cookie.get(configToken);\nexport const getProxyUrl = (url: string) => `https://ucms.ifeng.com/platform/services/_api_/proxy?url=${ encodeURIComponent(url) }`;\n\ninterface ProxyConfig {\n  target: string;\n  value: string;\n  key: string;\n  headers?: { HOST: string};\n}\n\nconst proxyMap: any = Object.fromEntries(\n  Object.entries(proxy)\n    .map(([proxyUrl, config]: [string, ProxyConfig]) => {\n      let realurl = config?.target.replace(/\\/$/, '') + proxyUrl;\n\n      realurl = realurl?.replace(config.key, config.value || '');\n\n      if (config?.headers?.HOST) {\n        realurl = realurl.replace(/(\\d+\\.){3}\\d+/, config.headers.HOST);\n      }\n\n      return [proxyUrl, realurl];\n    })\n);\n\nconst codeMessage: { [key: number]: string } = {\n  200: '服务器成功返回请求的数据。',\n  201: '新建或修改数据成功。',\n  202: '一个请求已经进入后台排队（异步任务）。',\n  204: '删除数据成功。',\n  400: '发出的请求有错误，服务器没有进行新建或修改数据的操作。',\n  401: '用户没有权限（令牌、用户名、密码错误）。',\n  403: '用户得到授权，但是访问是被禁止的。',\n  404: '发出的请求针对的是不存在的记录，服务器没有进行操作。',\n  406: '请求的格式不可得。',\n  410: '请求的资源被永久删除，且不会再得到的。',\n  422: '当创建一个对象时，发生一个验证错误。',\n  500: '服务器发生错误，请检查服务器。',\n  502: '网关错误。',\n  503: '服务不可用，服务器暂时过载或维护。',\n  504: '网关超时。'\n};\n\ninterface ErrorMsg extends Error {\n  status?: number;\n  response?: AxiosResponse;\n}\n\n\nconst transformPathToUrl = (path: string) => {\n  const prePath: string = Object.keys(proxyMap).find((item: string) => path.startsWith(item)) || '';\n  const realPath = proxyMap[prePath] || prePath;\n  const url = path.replace(prePath, realPath);\n\n  return `${ url }${ url.includes('?') ? '&' : '?' }version=${ projectVerson }`;\n};\n\n\nconst whitelistMessage = ['Request aborted'];\n\nfunction updateError({ err, url, title }: { err: any; url: string; title: string}) {\n  if (whitelistMessage.includes(err?.message)) return ;\n  try {\n    axios({\n      url: `${ basePath }/api/warn/schema/save`,\n      method: 'post',\n      responseType: 'json',\n      headers: {\n        'content-type': 'application/json'\n      },\n      data: {\n        namespace: 'platform',\n        appname: 'wind-vave',\n        url: location.href,\n        title,\n        type: 'api',\n        message: JSON.stringify(err),\n        error: [],\n        data: {\n          sourceUrl: transformPathToUrl(url),\n          operator: localStorage.username,\n        }\n      },\n      timeout: 10 * 60 * 1000\n    });\n  } catch (error) {\n    console.error(error);\n  }\n\n}\n\nfunction checkStatus(response: AxiosResponse, withoutCheckCode?: boolean, successCode?: number): AxiosResponse | void {\n  const isResponseError = response.status < 200 || response.status > 300;\n  const dataCode = response.data?.code;\n  const isDataError = !withoutCheckCode && dataCode !== 0 && dataCode !== 200 && dataCode !== successCode;\n\n  if (!isResponseError && !isDataError) {\n    return response;\n  }\n\n  const { data }: AxiosResponse = response;\n  const errorStatus = isResponseError ? response.status : data?.code;\n\n  const errorText: any = isResponseError ? data?.message : (data?.msg || data?.message);\n  const error: ErrorMsg = new Error(errorText || codeMessage[errorStatus]);\n\n  error.status = errorStatus;\n  error.response = response;\n\n  throw error;\n}\n\n\n/**\n * @param { string } url: 请求地址\n * @param { object } option: 请求配置项\n * @param {bool} option.withoutError: 禁止抛错\n * @param {bool} option.withoutCheckCode: 禁止检查code\n */\nexport interface Options extends AxiosRequestConfig {\n  body?: any;\n  schema?: any;\n  successCode?: number;\n  withoutError?: boolean;\n  withoutCheckCode?: boolean;\n}\n\n\nconst checkSchema = (\n  schema: { [propsName: string]: any } | string | boolean,\n  data: any,\n  requestOption: {\n    url: string;\n    body: any;\n  }\n) => {\n  if (typeof data === 'object') {\n    const valid = ajv.validate(schema, data);\n    const path = requestOption?.url;\n\n    if (!valid) {\n      ajv.errors?.forEach((item: ErrorObject) => {\n        const errorObj = {\n          message: `${ item.keyword } OF ${ item.dataPath } ${ item.message } FROM '${ path }'`,\n          data,\n          option: requestOption?.body\n        };\n        const errorMessage = ` JSON SCHEMA ERROR : ${ JSON.stringify(errorObj, null, 2) } `;\n\n        console.error(errorMessage);\n        updateError({ err: errorObj, url: path, title: 'schema 错误', });\n      });\n    }\n  }\n};\n\n// eslint-disable-next-line consistent-return\nasync function request<T>(\n  url: string,\n  requestOptions: Options = {},\n): Promise<T | undefined> {\n  const { withoutError, schema, body, withoutCheckCode, successCode, ...options } = requestOptions;\n\n  try {\n    const requestConfig: AxiosRequestConfig = {\n      method: options?.method ?? 'GET',\n      headers: {\n        authorization: `Bearer ${ token }`,\n        commentAppId: APP_ID,\n        versionInfo: JSON.stringify({\n          url: encodeURIComponent(transformPathToUrl(url)),\n          id: uuidv4(),\n        }),\n        ...(options?.headers || {})\n      },\n      data: ['POST', 'PUT'].includes((options?.method || 'GET')) ? { body } : body,\n      responseType: options?.responseType ?? 'json',\n      validateStatus: (): boolean => true,\n      timeout: 10 * 60 * 1000\n    };\n\n    if (\n      options.method\n      && ['POST', 'PUT', 'DELETE'].includes(options.method)\n      && body && body instanceof FormData\n    ) {\n      requestConfig.transformRequest = (data: any) => data;\n    }\n    const response: AxiosResponse<any> = await axios({ url, ...requestConfig });\n\n    // updateError({ url, err: 'test' });\n\n    checkStatus(response, withoutCheckCode, successCode);\n\n    if (schema) {\n      checkSchema(schema, response.data, { url, body });\n    }\n\n    const { code, message: dataMessage } = response.data;\n    \n    // userRole、uploadImg 接口成功，code为0\n    if (code !== 200 && !url.includes('userRole') && !url.includes('upload') && !url.includes('getFxbData')) {\n      notification.error({\n        message: dataMessage\n      });\n    }\n    \n\n    return response.data;\n  } catch (err) {\n    console.log('request error');\n    \n    const { status }: ErrorMsg = err;\n\n    if (status === 401 || status === -2) {\n      notification.destroy();\n      notification.error({\n        message: codeMessage['401']\n      });\n      // token过期，清空当前环境token\n      cookie.remove(configToken, { domain });\n      setTimeout((): void => {\n\n        window.location.href = `${ process['CONFIG'].linkLoginUrl }?redirect=${ encodeURIComponent(window.location.href) }`;\n      }, 1500);\n    } else {\n      // updateError({ url, err, title: '接口错误' });\n    }\n    if (!withoutError) {\n      message.destroy();\n      message.error(err?.response?.data?.msg || err.message);\n\n      return Promise.reject(err);\n    }\n  }\n}\n\nexport default request;\n"],"sourceRoot":""}