{"version":3,"sources":["webpack://windvane/./node_modules/@babel/runtime-corejs3/core-js/instance/sort.js","webpack://windvane/./node_modules/@babel/runtime-corejs3/core-js/instance/trim.js","webpack://windvane/./src/components/QueryTable/index.less","webpack://windvane/./src/pages/CommontManage/ExpertCommentManage/index.less","webpack://windvane/./src/components/CommentProductionDetail.tsx","webpack://windvane/./src/components/DramaContentSearch/index.tsx","webpack://windvane/./src/components/DramaContentSearch/services.ts","webpack://windvane/./src/components/FormRender.tsx","webpack://windvane/./src/components/QueryTable/index.tsx","webpack://windvane/./src/pages/CommontManage/ExpertCommentManage/components/ExpertCommentSet.tsx","webpack://windvane/./src/pages/CommontManage/ExpertCommentManage/services.ts","webpack://windvane/./src/pages/CommontManage/ExpertCommentManage/index.tsx","webpack://windvane/./node_modules/core-js-pure/es/array/virtual/sort.js","webpack://windvane/./node_modules/core-js-pure/es/instance/sort.js","webpack://windvane/./node_modules/core-js-pure/es/instance/trim.js","webpack://windvane/./node_modules/core-js-pure/es/string/virtual/trim.js","webpack://windvane/./node_modules/core-js-pure/features/instance/sort.js","webpack://windvane/./node_modules/core-js-pure/features/instance/trim.js","webpack://windvane/./node_modules/core-js-pure/internals/array-sort.js","webpack://windvane/./node_modules/core-js-pure/internals/engine-ff-version.js","webpack://windvane/./node_modules/core-js-pure/internals/engine-is-ie-or-edge.js","webpack://windvane/./node_modules/core-js-pure/internals/engine-webkit-version.js","webpack://windvane/./node_modules/core-js-pure/internals/string-trim-forced.js","webpack://windvane/./node_modules/core-js-pure/modules/es.array.sort.js","webpack://windvane/./node_modules/core-js-pure/modules/es.string.trim.js"],"names":["module","exports","CommentProductionDetail","props","ref","productionId","btnRender","imgSpan","detailSpan","btnSpan","useGetProductionDetail","productionDetail","mutate","detailLoading","coverImage","useMemo","JSON","parse","useImperativeHandle","refreshDetail","span","length","className","style","src","title","fontSize","Number","publicScore","toFixed","performanceScore","subjectId","forwardRef","Option","timeout","fetch","value","callback","fake","searchDramaContent","onlineStatus","then","res","list","data","clearTimeout","DramaContentSearch","onChange","width","useState","setlist","handleSearch","inputVal","resList","handleChange","dramaId","totalItem","showSearch","labelInValue","placeholder","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","d","async","params","request","requestBasePath","method","body","query","sort","type","key","pagination","pageSize","current","trimString","objToTrim","fields","keyName","FormRender","form","getValues","formValue","validateFields","resetFrom","resetFields","getChildren","useCallback","renderCom","comProps","label","isValidElement","onPressEnter","allowClear","options","item","showTime","ranges","moment","startOf","endOf","subtract","initialValues","gutter","items","name","formItemLayout","itemProps","labelCol","wrapperCol","QueryTable","formItem","columns","rowKey","plusAction","total","loading","defaultPageSize","pageSizeOptions","notQueryWhilestart","defaultRef","useRef","formRef","undefined","defaultStep","defaultPaginetionInfo","paginationInfo","setpaginationInfo","sortColumns","setsortColumns","search","pageInfoParams","sorter","values","sendSorter","formatParams","getRequestParams","order","paramsCurrent","paramsPageSize","rest","requestParams","field","error","console","handleReset","useEffect","paginationOnChange","tableChange","filters","styles","onClick","marginRight","children","bordered","size","dataSource","showTotal","totalCount","showSizeChanger","layout","ExpertCommentSet","visible","handleHidden","handleSubmit","handleOk","getFieldsValue","catch","errorInfo","log","onOk","onCancel","rules","required","message","precision","min","max","importCommontGrandes","stringify","PAGESIZE","COMMENT_USER_RANK","ExpertCommentManage","location","detailRef","queryTable","initSearch","commentUserRank","checkStatus","rootId","expertCommentVisible","setExpertCommentVisible","searchParams","setSearchParams","selectProduction","setSelectProduction","useGetCommontList","commontList","isValidating","CommontCount","useGetProductionGroupDetail","productionGroupDetail","handleHiddenExpertComment","code","handleBtnRender","score","to","handleChangeSearch","CommentStatusMaps","SortOptionsMaps","page","handleChangePage","lastestParams","hiddenAddPraise","pop","tip","spinning","index","CommonItemWrap","showExpertIdentity","common","refresh","showProductionName","moreRender","id","showQuickJumper","withAuthorized","Role","entryVirtual","ArrayPrototype","Array","prototype","it","own","trim","StringPrototype","String","parent","floor","Math","mergeSort","array","comparefn","middle","insertionSort","merge","slice","element","j","i","left","right","llength","rlength","lindex","rindex","result","push","userAgent","firefox","match","UA","test","webkit","fails","whitespaces","non","METHOD_NAME","$","aFunction","toObject","toLength","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","nativeSort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","chr","fromCharCode","k","v","a","b","charAt","FORCED","getSortCompare","x","y","target","proto","forced","this","call","itemsLength","arrayLength","$trim","forcedStringTrimMethod"],"mappings":"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","file":"p__CommontManage__ExpertCommentManage.f5b98199.async.js","sourcesContent":["module.exports = require(\"core-js-pure/features/instance/sort\");","module.exports = require(\"core-js-pure/features/instance/trim\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"_1pnNnm\",\"actions\":\"_23Utz2\",\"body\":\"_3euxaN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ExpertCommentManageWrap\":\"_-iGKPR\",\"ExpertCommentHead\":\"_197oHg\",\"ExpertCommentContent\":\"_2RSadl\",\"borderBottom\":\"_4VNGE2\",\"footerPage\":\"_dEjhJI\"};","import React, { ReactElement, FC, useMemo, forwardRef, useImperativeHandle } from 'react';\nimport { Row, Col, Button } from 'antd';\nimport moment from 'moment';\nimport style from './index.less';\nimport { useGetProductionDetail } from '@/services/publicServices';\nimport { ProductionAdjustStatus } from '@/components/miniComponents';\n\nexport interface Props {\n  productionId: string;\n  btnRender?: (score: number) => any;\n  imgSpan?: number;\n  detailSpan?: number;\n  btnSpan?: number;\n}\n\n\nconst CommentProductionDetail: FC<Props> = (props: Props, ref: any) => {\n  const { productionId, btnRender, imgSpan, detailSpan, btnSpan } = props;\n  const { productionDetail, detailLoading, mutate } = useGetProductionDetail(productionId);\n  const coverImage = useMemo(() => {\n    return productionDetail?.coverImage && JSON.parse(productionDetail?.coverImage);\n  }, [productionDetail]);\n\n  useImperativeHandle(ref, () => ({\n    refreshDetail: mutate,\n    productionDetail,\n  }));\n\n  return (\n    <Row>\n      <Col span={ imgSpan ?? 4 }>\n        {coverImage?.length ? <img className={ style.productionImg } src={ coverImage[0] } /> : ''}\n      </Col>\n      <Col span={ detailSpan ?? 7 } className={ style.productionInfo }>\n        <h3>{productionDetail?.title}</h3>\n        <p style={{ fontSize: 16 }}>大众评分：<strong>{Number(productionDetail?.publicScore).toFixed(1)}</strong></p>\n        <p>专业评分：{Number(productionDetail?.performanceScore).toFixed(1)}</p>\n        <p>数据状态：<ProductionAdjustStatus subjectId={ productionId } /></p>\n      </Col>\n      <Col span={ btnSpan ?? 10 }>\n        {btnRender && btnRender(productionDetail?.performanceScore)}\n      </Col>\n    </Row>\n  );\n};\n\nexport default forwardRef(CommentProductionDetail);\n","import React, { FC, useState } from 'react';\nimport { Select, Spin, Empty } from 'antd';\nimport { searchDramaContent } from './services';\n\nconst { Option } = Select;\n\nlet timeout;\n\nfunction fetch(value: string, callback: any) {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n  function fake() {\n    searchDramaContent({ title: value, onlineStatus: '1' }).then((res: any) => {\n      const list = res?.data?.list || [];\n\n      callback(list);\n    });\n  }\n\n  timeout = setTimeout(fake, 300);\n}\n\ninterface Props {\n  value?: any;\n  onChange?: (time?: string) => void;\n  width?: number|string;\n}\n\nconst DramaContentSearch: FC<Props> = (props: any) => {\n  const { value, onChange, width } = props;\n  const [list, setlist] = useState<any[]>([]);\n\n  const handleSearch = (inputVal: string) => {\n    if (inputVal) {\n      fetch(inputVal, (resList: any[]) => setlist(resList));\n    } else {\n      setlist([]);\n    }\n  };\n\n  const handleChange = (inputVal: string) => {\n    const { value } = inputVal;\n    const { dramaId } = JSON.parse(value);\n\n    onChange({ ...inputVal, totalItem: value, value: dramaId });\n  };\n\n  return (\n    <Select showSearch={ true }\n      labelInValue={ true }\n      value={ value }\n      style={{ width: width || '100%' }}\n      placeholder=\"输入名称搜索（模糊搜索）\"\n      defaultActiveFirstOption={ true }\n      showArrow={ false }\n      filterOption={ false }\n      onSearch={ handleSearch }\n      onChange={ handleChange }\n      notFoundContent={ <Empty /> }\n    >\n      {list.map((d: any) => (<Option value={ JSON.stringify(d) } key={ d.dramaId }>{d.title}</Option>))}\n    </Select>\n  );\n};\n\nexport default DramaContentSearch;","import { Pagenation } from './../../types/types.d';\nimport request from '@/utils/request';\n\nimport { requestBasePath } from '@/services/login';\n\n\n// 获取搜索列表\nexport async function searchDramaContent(params: {title?: string; termTitle?: string; onlineStatus?: string; category?: string}) {\n  return await request(`${ requestBasePath }/wingvate/wind-vane-backend/drama/query/queryDramaContentList`, {\n    method: 'POST',\n    body: {\n      query: params,\n      sort: { type: 'desc', key: 'createTime' },\n      pagination: { pageSize: 100, current: 1 }\n    }\n  });\n}\n","import React, { ForwardRefRenderFunction, useImperativeHandle, MutableRefObject, forwardRef, useCallback, ReactElement, isValidElement } from 'react';\nimport { Form, Row, Col, Input, Select, DatePicker } from 'antd';\nimport moment from 'moment';\n\n\ntype SupportRenderItem = 'input' | 'passwordInput' | 'select' | 'rangePicker' | 'datePicker'\n\ninterface ColType {\n  span: number;\n}\n\ninterface FormItemLayout {\n  labelCol: ColType;\n  wrapperCol: ColType;\n}\nexport interface FormItem {\n  name: string;\n  label: string;\n  renderCom: SupportRenderItem | ReactElement;\n  comProps?: {\n    options?: SelectOptions[];\n    placeholder?: string;\n    [key: string]: any;\n  };\n  span?: number;\n  itemProps?: { };\n}\n\nexport interface SelectOptions {\n  label: string | number;\n  value: string | number;\n}\n\n\nexport interface Props {\n  ref: MutableRefObject<any>;\n  items: FormItem[];\n  onPressEnter?: () => any;\n  initialValues?: {[keyName: string]: any};\n  formItemLayout: FormItemLayout;\n}\n\nfunction trimString(objToTrim: {[k: string]: any}) {\n  const fields = { ...objToTrim };\n\n  Object.keys({ ...fields }).forEach((keyName: string) => {\n    if (typeof fields[keyName] === 'string') {\n      fields[keyName] = fields[keyName].trim();\n    }\n  });\n\n  return fields;\n}\n\nconst FormRender: ForwardRefRenderFunction<unknown, Props> = (props: Props, ref: MutableRefObject<any>) => {\n  const [form] = Form.useForm();\n\n  async function getValues() {\n    const formValue = await form.validateFields();\n\n    return trimString(formValue);\n  }\n\n  useImperativeHandle(ref, () => ({\n    resetFrom: form.resetFields,\n    getValues,\n  })\n  );\n\n  const getChildren = useCallback(({ renderCom, comProps = {}, label }: FormItem) => {\n\n    if (isValidElement(renderCom)) {\n      return renderCom;\n    }\n    switch (renderCom) {\n      case 'input':\n        return <Input placeholder={ comProps?.placeholder ?? `请输入${ label }` } onPressEnter={ () => props.onPressEnter && props.onPressEnter() } />;\n      case 'passwordInput':\n        return <Input.Password placeholder={ comProps?.placeholder ?? `请输入${ label }` } onPressEnter={ () => props.onPressEnter && props.onPressEnter() } />;\n      case 'select':\n        return (\n          <Select {\n            ...{\n              allowClear: true,\n              placeholder: `请选择${ label }`,\n              onChange: () => props.onPressEnter && props.onPressEnter(),\n              ...comProps\n            } }>\n            {\n              comProps?.options?.map((item: SelectOptions) => (\n                <Select.Option value={ item.value } key={ item.value }>{item.label}</Select.Option>\n              ))\n            }\n          </Select>\n        );\n      case 'rangePicker':\n        return (\n          <DatePicker.RangePicker showTime={ true } style={{ width: '100%' }}\n            ranges={{\n              '今天': [moment().startOf('day'), moment().endOf('day')],\n              '昨天': [moment().startOf('day').subtract(1, 'day'), moment().endOf('day').subtract(1, 'day')],\n              '本周': [moment().startOf('week'), moment().endOf('week')],\n              '本月': [moment().startOf('month'), moment().endOf('month')]\n            }}\n            { ... comProps }\n          />);\n      case 'datePicker':\n        return (\n          <DatePicker style={{ width: '100%' }}\n            { ... comProps }\n          />);\n      default:\n        return <Input />;\n    }\n  }, [props.onPressEnter]);\n\n\n  return (\n    <Form form={ form }\n      initialValues={ props.initialValues }\n    >\n      <Row gutter={ 24 }>\n        {\n          props.items.map((item: FormItem) => {\n            return (\n              <Col span={ item.span ?? 8 } key={ item.name }>\n                <Form.Item name={ item.name } label={ item.label } { ...props.formItemLayout } { ...item.itemProps }>\n                  {\n                    getChildren(item)\n                  }\n                </Form.Item>\n              </Col>\n            );\n          } )\n        }\n      </Row>\n    </Form>\n  );\n};\n\n\nexport default forwardRef(FormRender);\n","import React, { useEffect, useRef, useState, useImperativeHandle, ReactElement, ForwardRefRenderFunction, MutableRefObject, forwardRef } from 'react';\nimport { Button, Table } from 'antd';\nimport { ColumnsType } from 'antd/lib/table';\nimport FormRender, { FormItem } from '../FormRender';\nimport styles from './index.less';\nimport { getRequestParams } from '@/utils/functions';\nimport { ListQueryRequestBody } from '@/types/types';\n\nexport type PageInfo = { current?: number; pageSize?: number }\nexport type OnSearch = { searchParam: {[keyname: string]: any}; pageInfo: PageInfo }\n\ninterface ColType {\n  span: number;\n}\n\ninterface FormItemLayout {\n  labelCol: ColType;\n  wrapperCol: ColType;\n}\n\ninterface KeyValue {\n  [key: string]: any;\n}\ninterface SortColumns {\n  field?: string;                               // key\n  order?: undefined | string;                   // 排序方式\n}\n\ninterface Pagination {\n  current: number;\n  pageSize: number;\n}\n\nexport interface Props {\n  formItem?: FormItem[];                        // FormRender的查询项配置\n  columns?: ColumnsType;                        // Table Columns\n  children?: ReactElement | ReactElement[];     // 默认QueryTable展示Table，如果传入children，则展示children\n  plusAction?: ReactElement | ReactElement[];   // 出查询和重置以外的按钮\n  initialValues?: KeyValue;                     // FormRender初始化数据\n  formRef?: MutableRefObject<any>;              // FormRender的ref\n  rowKey: string;                               // Table rowKey\n  formItemLayout?: FormItemLayout;              // FormItem的labelCol和wrapperCol\n  query: (params: KeyValue) => void;            // 查询函数\n  list: KeyValue[];                             // Table dataSource数据\n  total: number;                                // Table total总数据条数\n  loading: boolean;                             // 请求loading状态\n  defaultPageSize?: number;                     // 初始pagesize\n  pageSizeOptions?: string[];                   // 每页多少条数据\n  notQueryWhilestart?: boolean;                 // 首页进入页面是否查询\n}\n\nconst formItemLayout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 }\n};\n\n\nconst QueryTable: ForwardRefRenderFunction<unknown, Props> = (\n  props: Props,\n  ref: MutableRefObject<any>,\n) => {\n  const {\n    formItem = [],\n    columns,\n    rowKey = 'key',\n    initialValues = {},\n    plusAction, query,\n    list = [],\n    total = 0,\n    loading,\n    defaultPageSize,\n    pageSizeOptions = ['10', '20', '50', '100'],\n    notQueryWhilestart\n  } = props;\n  const defaultRef = useRef<any>(null);\n  const formRef = props.formRef !== undefined ? props.formRef : defaultRef;\n  const defaultStep = defaultPageSize ?? Number(pageSizeOptions[0]); // 如果传值了，则取defaultPageSize, 否则取每页条数配置的第一项。\n  const defaultPaginetionInfo: Pagination = { current: 1, pageSize: defaultStep };\n  const [paginationInfo, setpaginationInfo] = useState(defaultPaginetionInfo);\n  const [sortColumns, setsortColumns] = useState<SortColumns | undefined>({}); // 排序\n  // 查询\n  const search = async (pageInfoParams?: PageInfo, sorter?: SortColumns) => {\n    try {\n      const values = await formRef.current?.getValues();\n      const { current, pageSize } = paginationInfo;\n      const sendSorter = sorter || sortColumns;\n\n      const formatParams: KeyValue = getRequestParams({\n        ...values,\n        ...{ current, pageSize },     // 如果当前请求没传页数和每页条数，则用上次的数据\n        ...pageInfoParams\n      });\n\n      setpaginationInfo({ current: formatParams.current, pageSize: formatParams.pageSize });\n      \n      // 判断排序参数是否传递给使用组件\n      // sorter: {\n      //  field: 'xxx',    // columns对应的dataIndex\n      //  order: 'ascend' | 'descend' }\n      if (!(sendSorter === undefined || Object.keys(sendSorter).length === 0 || sendSorter.order === undefined)) {\n        formatParams.sorter = sendSorter;\n      }\n      const { current: paramsCurrent, pageSize: paramsPageSize, sorter: sort, ...rest } = formatParams;\n      const requestParams: ListQueryRequestBody = {\n        pagination: { current: paramsCurrent, pageSize: paramsPageSize },\n        query: rest,\n      };\n\n      if (formatParams.sorter) {\n        requestParams.sort = {\n          type: formatParams.sorter.order,\n          key: formatParams.sorter.field\n        };\n      }\n\n      query(requestParams);\n      // 参数没传sorter时sorter为undefined，但页面的排序仍然为上次请求的状态，所以需加判断，sorter存在时再去设置\n      sorter && setsortColumns(sorter);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    query: search\n  }));\n\n  useEffect(() => {\n    !notQueryWhilestart && search({ ...defaultPaginetionInfo, ...initialValues });\n  }, []);\n\n\n  function handleReset() {\n    formRef.current?.resetFrom();\n    search({ current: 1 });\n  }\n\n  const paginationOnChange = (current: number, pageSize: number) => {\n    // 每页条数变化\n    if (pageSize !== paginationInfo.pageSize) {\n      search({ current: 1, pageSize });\n    } else {\n      search({ current, pageSize });\n    }\n  };\n\n  const tableChange = (pagination: any, filters: any, sorter: any) => {\n    const { field, order } = sorter;\n\n    if (field && (field !== (sortColumns ?? {}).field || order !== (sortColumns ?? {}).order)) {\n      search({}, { field, order });\n    }\n  };\n\n  return (\n    <div>\n      <div className={ styles.header }>\n        <FormRender ref={ formRef }\n          items={ formItem }\n          initialValues={ initialValues }\n          onPressEnter={ search }\n          formItemLayout={ props.formItemLayout || formItemLayout }\n        />\n        <div className={ styles.actions }>\n          {plusAction || <div />}\n          {formItem.length > 0 && (\n            <div>\n              <Button onClick={ handleReset } key=\"reset\" style={{ marginRight: '10px' }}>重置</Button>\n              <Button onClick={ () => search({ current: 1 }) } type=\"primary\" key=\"query\">查询</Button>\n            </div>\n          )}\n        </div>\n      </div>\n      <div className={ styles.body }>\n        {props.children ?? <Table bordered={ true }\n          size=\"small\"\n          dataSource={ list }\n          columns={ columns }\n          rowKey={ rowKey }\n          pagination={{\n            total,\n            showTotal: (totalCount: number) => `共${ totalCount }条数据`,\n            current: paginationInfo.current,\n            pageSize: paginationInfo.pageSize,\n            onChange: paginationOnChange,\n            showSizeChanger: true,\n            pageSizeOptions\n          }}\n          loading={ loading }\n          onChange={ tableChange }\n        />}\n      </div>\n    </div>\n  );\n  \n};\n\nexport default forwardRef(QueryTable);\n","import React, { FC, useCallback, useState, useRef, useMemo } from 'react';\nimport { Link } from 'umi';\nimport { Form, InputNumber, Modal, Typography } from 'antd';\nimport style from '../index.less';\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nconst ExpertCommentSet = (props: any) => {\n  const [form] = Form.useForm();\n  const { visible, handleHidden, handleSubmit } = props;\n  const { validateFields, getFieldsValue } = form;\n  \n  const handleOk = useCallback(() => {\n    validateFields()\n      .then((values: any) => {\n        handleSubmit(values);\n      })\n      .catch((errorInfo: any) => {\n        console.log('formError', errorInfo);\n      });\n  }, [validateFields]);\n\n\n  return (\n    <Modal title=\"专业评分录入\" visible={ visible } onOk={ handleOk } onCancel={ handleHidden }>\n      <Form { ...layout } form={ form } className={ style.initCountWrap }>\n        <Form.Item label=\"分数\"\n          name=\"performanceScore\"\n          rules={ [{ required: true, message: '请输入分数!' }] }\n        >\n          <InputNumber precision={ 1 } min={ 0 } max={ 10 } style={{ width: 200 }} placeholder=\"请输入分数\" />\n        </Form.Item>\n        <Form.Item label=\"评分专家人数\"\n          name=\"performanceScorePeople\"\n          rules={ [{ required: true, message: '请输入评分专家人数!' }] }\n        >\n          <InputNumber min={ 0 } style={{ width: 200 }} placeholder=\"请输入评分专家人数\" />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default ExpertCommentSet;\n","import useSWR from '@/hooks/useSWR';\nimport request from '@/utils/request';\nimport { stringify } from 'qs';\nimport { requestBasePath } from '@/services/login';\n\n// 导入作品专业评分 /wind-vane-backend/drama/operate/updateDramaPerformanceScore\nexport function importCommontGrandes(params: any) {\n  return request(`${ requestBasePath }/wingvate/wind-vane-backend/drama/operate/updateDramaPerformanceScore?${ stringify(params) }`);\n}","import React, { FC, useCallback, useState, useRef, useMemo, useEffect } from 'react';\nimport { Link } from 'umi';\nimport { Pagination, Button, Spin, message, Tooltip } from 'antd';\nimport { withAuthorized } from '@/utils/Authorized';\nimport { Role } from '@/utils/authority';\nimport DramaContentSearch from '@/components/DramaContentSearch';\nimport CommonItemWrap from '@/components/CommonItemWrap';\nimport style from './index.less';\nimport CommentProductionDetail from '@/components/CommentProductionDetail';\nimport ExpertCommentSet from './components/ExpertCommentSet';\nimport QueryTable, { OnSearch, Props as QueryTableProps } from '@/components/QueryTable';\n\nimport { useGetCommontList, useGetProductionGroupDetail } from '@/services/publicServices';\nimport { importCommontGrandes } from './services';\nimport { CommontItem } from '@/types/types';\nimport { CommentStatusMaps, SortOptionsMaps } from '@/utils/constant';\n\nconst PAGESIZE = 20;\nconst COMMENT_USER_RANK = 'expert'; // 专家评论\n\nconst ExpertCommentManage = (props: any, ref: any) => {\n\n  const productionId = props?.location?.query?.dramaId || undefined;\n  const detailRef = useRef();\n  const queryTable = useRef();\n\n  const initSearch = {\n    pagination: { pageSize: PAGESIZE, current: 1 },\n    query: {\n      subjectId: productionId,\n      commentUserRank: COMMENT_USER_RANK,\n      checkStatus: undefined,\n      rootId: 0\n    },\n    sort: {\n      key: 'createTime',\n      type: 'desc'\n    }\n  };\n\n  const [expertCommentVisible, setExpertCommentVisible] = useState(false);\n  const [searchParams, setSearchParams] = useState(initSearch);\n  const [selectProduction, setSelectProduction] = useState({});\n\n  const { commontList, pagination, isValidating, mutate, CommontCount } = useGetCommontList(searchParams);\n\n  const productionIds = useMemo(() => {\n    return commontList?.map((item: CommontItem) => item?.subjectId) || [];\n  }, [commontList]);\n  const { productionGroupDetail, detailLoading } = useGetProductionGroupDetail(commontList);\n\n\n  const handleShowExpertComment = () => {\n    setExpertCommentVisible(true);\n  };\n  const handleHiddenExpertComment = () => {\n    setExpertCommentVisible(false);\n  };\n\n  const handleSubmit = useCallback(async (params: any) => {\n    try {\n      const res = await importCommontGrandes({\n        dramaId: selectProduction?.key || productionId,\n        ...params,\n      });\n\n      if (res?.code === 200) {\n        message.success('操作成功！');\n        detailRef?.current.refreshDetail();\n        handleHiddenExpertComment();\n      }\n    } catch (error) {\n      console.log('error', error);\n    }\n  }, [productionId, selectProduction, detailRef]);\n\n  const handleBtnRender = useCallback((score: number) => {\n    return (\n      // <>\n      //   <Button onClick={ handleShowExpertComment }>录入专业评分</Button>\n      //   <br /> <br />\n      //   {Number(score || 0)\n      //     ? <Link to={ `/commont-manage/expert-comment-detail?dramaId=${ selectProduction?.key || productionId }` }><Button type=\"primary\">录入专业评论</Button></Link>\n      //     : (\n      //       <Tooltip placement=\"rightBottom\" title=\"请先录入专业评分\">\n      //         <Button disabled={ true }>录入专业评论</Button>\n      //       </Tooltip>\n      //     )\n      //   }\n      // </>\n      <Link to={ `/commont-manage/expert-comment-detail?dramaId=${ selectProduction?.key || productionId }` }><Button type=\"primary\">录入专业评论</Button></Link>\n    );\n  }, [selectProduction?.key, productionId]);\n\n\n  const handleChangeSearch = useCallback((params: any) => {\n    queryTable.current.query();\n    setSelectProduction(params);\n  }, []);\n\n  const formItem: QueryTableProps['formItem'] = useMemo(() => (\n    [\n      {\n        name: 'title',\n        label: '作品名称',\n        renderCom: <DramaContentSearch onChange={ handleChangeSearch } style={{ width: 200 }} />,\n        span: 8\n      },\n      {\n        name: 'checkStatus',\n        span: 5,\n        label: '状态',\n        renderCom: 'select',\n        comProps: {\n          options: CommentStatusMaps\n        }\n      },\n      {\n        name: 'sort',\n        span: 5,\n        label: '排序字段',\n        renderCom: 'select',\n        comProps: {\n          options: SortOptionsMaps\n        }\n      }\n    ]\n  ), [handleChangeSearch]);\n\n  const handleSearch = useCallback((params: any) => {\n    const { pagination: page, query } = params;\n\n    setSearchParams({\n      pagination: page,\n      query: {\n        subjectId: query?.title?.key || productionId,\n        commentUserRank: COMMENT_USER_RANK,\n        checkStatus: Number(query?.checkStatus),\n        rootId: 0\n      },\n      sort: {\n        key: query?.sort || 'createTime',\n        type: 'desc'\n      }\n    });\n  }, [productionId]);\n\n  const handleChangePage = useCallback((current: number, pageSize: number) => {\n    setSearchParams((lastestParams: any) => ({\n      ...lastestParams,\n      pagination: {\n        current,\n        pageSize\n      }\n    }));\n  }, []);\n\n  const hiddenAddPraise = useMemo(() => {\n    return !productionId;\n  }, [productionId]);\n\n  useEffect(() => {\n    if (hiddenAddPraise) {\n      formItem.pop();\n    }\n  }, [formItem, hiddenAddPraise]);\n\n  return (\n    <div className={ style.ExpertCommentManageWrap }>\n      {expertCommentVisible\n        ? (\n          <ExpertCommentSet visible={ expertCommentVisible }\n            handleHidden={ handleHiddenExpertComment }\n            handleSubmit={ handleSubmit }\n          />)\n        : ''}\n      <QueryTable notQueryWhilestart={ true }\n        formItem={ formItem }\n        query={ handleSearch }\n        loading={ isValidating }\n        ref={ queryTable }\n        defaultPageSize={ PAGESIZE }\n      >\n        <Spin tip=\"加载中...\" spinning={ isValidating }>\n          <div className={ style.ExpertCommentContent }>\n            {selectProduction?.key || productionId\n              ? (\n                <>\n                  <CommentProductionDetail productionId={ selectProduction?.key || productionId }\n                    btnRender={ handleBtnRender } ref={ detailRef }\n                  />\n                  <br />\n                </>\n              ) : null\n            }\n            {commontList?.map((item: any, index: number) => {\n              return (<CommonItemWrap showExpertIdentity={ true } key={ index } common={ item }\n                refresh={ mutate } CommontCount={ CommontCount } showProductionName={ true }\n                productionGroupDetail={ productionGroupDetail }\n                moreRender={\n                  <Link to={ `/commont-manage/expert-comment-detail?dramaId=${ item?.subjectId }&commentId=${ item?.id }` }>\n                    <Button type=\"primary\" size=\"small\">修改</Button>\n                  </Link>\n                }\n                hiddenAddPraise={ hiddenAddPraise }\n              />);\n            })}\n            <div className={ style.footerPage }>\n              <Pagination current={ Number(pagination?.current || 1) }\n                pageSize={ Number(pagination?.pageSize || 10) }\n                total={ Number(pagination?.total || 0) }\n                showTotal={ (total: number) => `总计 ${ total } 条` }\n                showQuickJumper={ true }\n                onChange={ handleChangePage }\n              />\n            </div>\n          </div>\n        </Spin>\n      </QueryTable>\n    </div>\n  );\n};\n\nexport default withAuthorized(ExpertCommentManage, [Role.SYSTEM, Role.EXPERT]);\n","require('../../../modules/es.array.sort');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').sort;\n","var sort = require('../array/virtual/sort');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.sort;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.sort) ? sort : own;\n};\n","var trim = require('../string/virtual/trim');\n\nvar StringPrototype = String.prototype;\n\nmodule.exports = function (it) {\n  var own = it.trim;\n  return typeof it === 'string' || it === StringPrototype\n    || (it instanceof String && own === StringPrototype.trim) ? trim : own;\n};\n","require('../../../modules/es.string.trim');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('String').trim;\n","var parent = require('../../es/instance/sort');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/trim');\n\nmodule.exports = parent;\n","// TODO: use something more complex like timsort?\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    mergeSort(array.slice(0, middle), comparefn),\n    mergeSort(array.slice(middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n  var result = [];\n\n  while (lindex < llength || rindex < rlength) {\n    if (lindex < llength && rindex < rlength) {\n      result.push(comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]);\n    } else {\n      result.push(lindex < llength ? left[lindex++] : right[rindex++]);\n    }\n  } return result;\n};\n\nmodule.exports = mergeSort;\n","var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return String(x) > String(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aFunction(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort.call(array) : nativeSort.call(array, comparefn);\n\n    var items = [];\n    var arrayLength = toLength(array.length);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) items.push(array[index]);\n    }\n\n    items = internalSort(items, getSortCompare(comparefn));\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n"],"sourceRoot":""}