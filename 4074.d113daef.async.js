(globalThis["webpackChunkwindvane"]=globalThis["webpackChunkwindvane"]||[]).push([[4074],{8135:e=>{e.exports={chunkTitle:"_2pr8FO",chunkTitleText:"_EHsePZ",commonItem:"_3LVpDJ",productionImg:"_35t7Sc",productionInfo:"_3eCvkM",productionInfoText:"_qHn3fA",expertIdentity:"_1Iwkzp",userCommontHead:"_3NP8X5",userCommontInfoW:"_245GOa",userCommontInfo:"_3V2svW",ChildCommontListWrap:"_Y_2DaH",footerPage:"_HdL8xY",showChild:"_pZexIE",showChildText:"_1ut6DW",commontPre:"_3tC4Kh",AddPraiseNum:"_2PTttn",AddPraiseNumBtn:"_21QG_I",pourCommont:"_1nhAUO",goodComment:"_16yqxu"}},64074:(e,n,s)=>{"use strict";s.d(n,{Z:()=>$});var t=s(20594),i=s(67294),o=(s(20228),s(11382)),l=(s(14781),s(9366)),d=s(50047),c=s.n(d),r=(s(49111),s(19650)),a=(s(96433),s(30043)),u=(s(94233),s(51890)),v=s(95683),m=s.n(v),h=s(12088),p=s.n(h),j=s(89366),x=s(2390),y=s(30381),f=s.n(y),b=s(33909),C=s(18598),g=s(8135),I=s.n(g),k=(s(77883),s(68470)),Z=(s(34792),s(78042)),T=s(49101),w=s(85893);const N=e=>{const n=e.common,s=e.refresh,o=(0,i.useState)(),l=(0,t.Z)(o,2),d=l[0],c=l[1],r=(0,i.useCallback)((async()=>{try{const e=await(0,b.Um)({id:null===n||void 0===n?void 0:n.id,subjectId:null===n||void 0===n?void 0:n.subjectId,likeCount:d});200===(null===e||void 0===e?void 0:e.code)&&(Z.default.success("\u64cd\u4f5c\u6210\u529f\uff01"),s&&s(),c(void 0))}catch(e){Z.default.error(null===e||void 0===e?void 0:e.message)}}),[d,n,s]);return(0,w.jsxs)("div",{children:[(0,w.jsxs)("span",{children:["\u70b9\u8d5e\u6570\uff1a",(null===n||void 0===n?void 0:n.likeCount)||0," "]}),(0,w.jsx)(k.Z,{className:I().AddPraiseNum,precision:0,value:d,onChange:c,addonAfter:(0,w.jsx)(T.Z,{className:I().AddPraiseNumBtn,onClick:r})})]})},S=N;var _=s(96625);const U={verticalAlign:"middle"},H={display:"flex",justifyContent:"space-between"},P=e=>{var n,s;const t=e.common,o=e.showBlackBtn,l=e.showProductionName,d=e.showExpertIdentity,c=e.moreRender,v=e.hiddenUser,h=e.refresh,y=e.productionGroupDetail,g=e.CommontCount,k=e.extra,Z=e.hiddenrRate,T=(e.isHighQuality,e.commontUser),N=(e.hiddenAddPraise,(0,i.useCallback)((e=>{switch(e){case 0:return(0,w.jsx)("span",{children:"\u5f85\u5ba1\u6838"});case 1:return(0,w.jsx)(C.vk,{style:U});case 2:return(0,w.jsx)(C.bw,{style:U})}}),[])),P=(0,b.pU)(d||o?null===t||void 0===t?void 0:t.commentUserId:void 0),L=P.userInfo,R=P.refreshUser,M=(0,i.useMemo)((()=>{var e;const n=T||L;return(null===n||void 0===n||null===(e=n.roleTypes)||void 0===e?void 0:m()(e).call(e,"expert"))>=0?"expert":"common"}),[T,L]),D=(0,i.useMemo)((()=>4===(null===t||void 0===t?void 0:t.commentSource)),[t]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:I().commonItem,children:[(0,w.jsxs)(r.Z,{size:15,children:[v?null:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.C,{style:U,src:null===t||void 0===t?void 0:t.commentUserImgSrc,icon:(0,w.jsx)(j.Z,{})}),(0,w.jsx)(x.rU,{style:U,to:`/user-manage/user/${null===t||void 0===t?void 0:t.commentUserId}`,children:null===t||void 0===t?void 0:t.commentUserName})]}),d?(0,w.jsx)("span",{className:I().expertIdentity,title:(null===L||void 0===L?void 0:L.userDescription)||"",children:(null===L||void 0===L?void 0:L.userDescription)||""}):null,(0,w.jsx)("span",{children:_.aZ[(null===L||void 0===L?void 0:L.userLevel)||1]}),Z?"":"listContent"!==(null===t||void 0===t?void 0:t.subjectType)?(0,w.jsx)(a.Z,{style:U,disabled:!0,allowHalf:!0,value:(null===t||void 0===t?void 0:t.id)&&g[(null===t||void 0===t?void 0:t.commentUserId)+String(null===t||void 0===t?void 0:t.subjectId)]&&5*g[(null===t||void 0===t?void 0:t.commentUserId)+String(null===t||void 0===t?void 0:t.subjectId)]/10}):"",(0,w.jsx)("span",{style:U,children:f()(null===t||void 0===t?void 0:t.createTime).format("YYYY/MM/DD HH:mm")}),(0,w.jsxs)("span",{children:[N(null===t||void 0===t?void 0:t.checkStatus),null!==t&&void 0!==t&&t.checkUserId?` ( \u64cd\u4f5c\u4eba:${null===t||void 0===t?void 0:t.checkUserId}\uff0c  \u64cd\u4f5c\u65f6\u95f4:${f()(null===t||void 0===t?void 0:t.checkFinshTime).format("YYYY/MM/DD HH:mm")} )`:null]}),o?(0,w.jsx)(C.ab,{user:L,refresh:R,isEnter:!0}):null,c,(0,w.jsx)(S,{common:t,refresh:h}),D?(0,w.jsx)("span",{className:I().pourCommont,children:"\u704c"}):void 0,1==(null===t||void 0===t?void 0:t.isHighQuality)&&(0,w.jsx)("span",{className:I().goodComment,children:"\u4f18"})]}),(0,w.jsx)("pre",{className:I().commontPre,children:null===t||void 0===t?void 0:t.comment}),(0,w.jsxs)("div",{style:H,children:[(0,w.jsx)("div",{children:l?(0,_.f9)(null===t||void 0===t?void 0:t.subjectType)?(0,w.jsxs)("span",{children:["\u300a",y[null===t||void 0===t?void 0:t.subjectId]&&(null===(n=y[null===t||void 0===t?void 0:t.subjectId])||void 0===n?void 0:n.title)||(null===t||void 0===t?void 0:t.subjectName),"\u300b"]}):(0,w.jsxs)(x.rU,{to:`/commont-manage/production/${null===t||void 0===t?void 0:t.subjectId}?commentUserRank=${M}`,children:["\u300a",y[null===t||void 0===t?void 0:t.subjectId]&&(null===(s=y[null===t||void 0===t?void 0:t.subjectId])||void 0===s?void 0:s.title)||(null===t||void 0===t?void 0:t.subjectName),"\u300b"]}):null}),(0,w.jsxs)("div",{style:p()({},H,{width:"200px"}),children:[(0,w.jsx)(C.R6,{useName:t.commentUserName||"",notGoodComment:0==(null===t||void 0===t?void 0:t.isHighQuality),commentId:null===t||void 0===t?void 0:t.id,subjectId:null===t||void 0===t?void 0:t.subjectId,subjectType:null===t||void 0===t?void 0:t.subjectType,refresh:h}),(0,w.jsx)("div",{children:0===(null===t||void 0===t?void 0:t.checkStatus)?null:(0,w.jsx)(C.a4,{commont:t,refresh:h})})]})]})]}),k]})},L=P,R=10,M=e=>{const n=e.subjectId,s=e.rootId,d=e.handleHiddenChild,r=(e.showChildCommont,(0,i.useMemo)((()=>({pagination:{pageSize:R,current:1},query:{subjectId:n,rootId:s}})),[s,n])),a=(0,i.useState)(r),u=(0,t.Z)(a,2),v=u[0],m=u[1],h=(0,b.Hm)(v),p=h.commontList,j=h.pagination,x=h.isValidating,y=h.mutate,f=h.CommontCount,C=(0,i.useCallback)((e=>{m((n=>({...n,pagination:{pageSize:R,current:e}})))}),[]);return(0,w.jsx)("div",{className:I().ChildCommontListWrap,children:(0,w.jsx)(o.Z,{tip:"\u52a0\u8f7d\u4e2d...",spinning:x,children:(0,w.jsxs)("div",{className:I().CommontList,children:[null===p||void 0===p?void 0:c()(p).call(p,((e,n)=>(0,w.jsx)(L,{showBlackBtn:!0,hiddenrRate:!0,common:e,CommontCount:f,refresh:y},n))),(0,w.jsxs)("div",{className:I().footerPage,children:[(0,w.jsx)("a",{onClick:d,children:"\u70b9\u51fb\u6536\u8d77\u5b50\u8bc4\u8bba"}),(0,w.jsx)(l.Z,{size:"small",total:Number(null===j||void 0===j?void 0:j.total),showTotal:e=>`\u603b\u8ba1 ${e} \u6761`,pageSize:Number((null===j||void 0===j?void 0:j.pageSize)||R),current:Number(null===j||void 0===j?void 0:j.current),showQuickJumper:!0,onChange:C})]})]})})})},D=M,Y=e=>{const n=e.common,s=(0,i.useState)(!1),o=(0,t.Z)(s,2),l=o[0],d=o[1];(0,i.useEffect)((()=>{d(!1)}),[n]);const c=(0,i.useCallback)((()=>{d(!0)}),[]),r=(0,i.useCallback)((()=>{d(!1)}),[]),a=(0,i.useMemo)((()=>(null===n||void 0===n?void 0:n.commentCount)>0),[n]),u=(0,i.useMemo)((()=>l?(0,w.jsx)(D,{subjectId:null===n||void 0===n?void 0:n.subjectId,rootId:null===n||void 0===n?void 0:n.id,handleHiddenChild:r}):(0,w.jsx)("p",{className:I().showChild,children:(0,w.jsx)("span",{onClick:c,className:I().showChildText,children:"\u70b9\u51fb\u67e5\u770b\u5b50\u8bc4\u8bba"})})),[n,r,c,l]);return(0,w.jsx)(L,{...e,extra:a?u:null})},$=Y},18598:(e,n,s)=>{"use strict";s.d(n,{vk:()=>b,bw:()=>C,ZG:()=>g,a4:()=>I,J0:()=>Z,f0:()=>w,ab:()=>T,R6:()=>k});s(71194);var t=s(50146),i=(s(77883),s(68470)),o=(s(13062),s(71230)),l=(s(89032),s(15746)),d=s(20594),c=(s(62350),s(75443)),r=(s(57663),s(71577)),a=(s(34792),s(78042)),u=s(54579),v=s.n(u),m=s(21052),h=s.n(m),p=s(67294),j=s(33909),x=s(99086),y=s(93606),f=s(85893);function b(){return(0,f.jsx)("span",{style:{color:"#333",verticalAlign:"middle"},children:"\u4e0a\u7ebf"})}function C(){return(0,f.jsx)("span",{style:{color:"red",verticalAlign:"middle"},children:"\u4e0b\u7ebf"})}function g(e){const n=e.production,s=e.refresh,t=e.style,i=(0,p.useMemo)((()=>1===(null===n||void 0===n?void 0:n.onlineStatus)),[n]),o=(0,p.useCallback)((async()=>{try{const e=await(0,j.pf)({dramaId:null===n||void 0===n?void 0:n.dramaId,onlineStatus:i?0:1});200===(null===e||void 0===e?void 0:e.code)&&(a.default.success("\u64cd\u4f5c\u6210\u529f\uff01"),s&&s())}catch(e){}}),[i,n,s]);return(0,f.jsx)(c.Z,{placement:"topRight",title:`\u786e\u8ba4 ${i?"\u4e0b\u7ebf":"\u4e0a\u7ebf"} \u8be5\u4f5c\u54c1\u5417`,onConfirm:o,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:i?(0,f.jsx)(r.Z,{danger:!0,style:t,children:"\u4e0b\u7ebf"}):(0,f.jsx)(r.Z,{type:"primary",style:t,children:"\u4e0a\u7ebf"})})}function I(e){const n=e.commont,s=e.refresh,t=e.style,i=e.subjectType,o=void 0===i?"default":i,l=(0,p.useMemo)((()=>1===(null===n||void 0===n?void 0:n.checkStatus)),[n]),d=(0,p.useCallback)((async()=>{try{const e=await(0,j.Hy)({commentId:null===n||void 0===n?void 0:n.id,subjectId:null===n||void 0===n?void 0:n.subjectId,checkStatus:l?2:1,subjectType:o});200===(null===e||void 0===e?void 0:e.code)&&(a.default.success("\u64cd\u4f5c\u6210\u529f\uff01"),s&&s())}catch(e){console.log("error",e)}}),[l,n,s]);return(0,f.jsx)(c.Z,{placement:"topRight",title:`\u786e\u8ba4 ${l?"\u4e0b\u7ebf":"\u4e0a\u7ebf"} \u8be5\u8bc4\u8bba\u5417`,onConfirm:d,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:l?(0,f.jsx)(r.Z,{danger:!0,style:t,children:"\u4e0b\u7ebf"}):(0,f.jsx)(r.Z,{type:"primary",style:t,children:"\u4e0a\u7ebf"})})}function k(e){const n=e.notGoodComment,s=e.useName,u=e.currentScore,m=void 0===u?0:u,x=e.currentLevel,b=void 0===x?"lv.1":x,C=e.commentId,g=e.subjectId,I=e.subjectType,k=void 0===I?"":I,Z=e.refresh,T=(0,p.useState)(!1),w=(0,d.Z)(T,2),N=w[0],S=w[1],_=(0,p.useState)(m),U=(0,d.Z)(_,2),H=U[0],P=U[1],L=(0,p.useState)(b),R=(0,d.Z)(L,2),M=R[0],D=R[1],Y=(0,p.useRef)(0),$=async()=>{try{await(0,j.cw)({id:C,subjectId:g,isHighQualityStatus:!1,subjectType:k})}catch(e){a.default.error("\u8bc4\u4f18\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}Z()},A=()=>{S(!1)},z=(0,p.useCallback)((async()=>{v()((async()=>{try{await(0,j.tm)({id:C,subjectId:g,isHighQualityStatus:!0,rate:Y.current,subjectType:k}),a.default.success("\u64cd\u4f5c\u6210\u529f")}catch(e){a.default.error("\u8bc4\u4f18\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}A(),Z()}),0)}),[]),E=(0,p.useCallback)((e=>{const n=h()(m+e);D(n<=300?"lv.1":n<=900?"lv.2":n<=1900?"lv.3":n<=3100?"lv.4":"lv.5"),P(n),Y.current=n}),[]),G=(0,p.useCallback)((0,y.D)(E,600,!1),[]);return(0,f.jsxs)("div",{children:[n?(0,f.jsx)(c.Z,{placement:"topLeft",title:"\u786e\u8ba4\u8be5\u8bc4\u8bba\u4e3a\u4f18\u8d28\u5417\uff1f",onConfirm:z,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,f.jsx)(r.Z,{danger:!0,children:"\u4f18\u8d28"})}):(0,f.jsx)(c.Z,{placement:"topRight",title:"\u786e\u8ba4\u53d6\u6d88\u8be5\u8bc4\u8bba\u7684\u4f18\u8d28\u5417\uff1f",onConfirm:$,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,f.jsx)(r.Z,{danger:!0,children:"\u53d6\u6d88\u4f18\u8d28"})}),(0,f.jsxs)(t.Z,{title:`\u8bbe\u7f6e${s}\u7684\u8bc4\u8bba\u4e3a\u4f18\u8d28`,visible:N,onOk:z,onCancel:A,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:[(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(l.Z,{span:6,children:"\u5f53\u524d\u79ef\u5206\uff1a"}),(0,f.jsx)(l.Z,{span:8,children:m})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(l.Z,{span:6,children:"\u589e\u52a0\u4f18\u8d28\u79ef\u5206\uff1a"}),(0,f.jsx)(l.Z,{span:8,children:(0,f.jsx)(i.Z,{min:1,onChange:G,style:{width:"200px"}})})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(l.Z,{span:6,children:"\u9884\u8ba1\u79ef\u5206\uff1a"}),(0,f.jsx)(l.Z,{span:8,children:H})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(l.Z,{span:6,children:"\u9884\u8ba1\u7b49\u7ea7\uff1a"}),(0,f.jsx)(l.Z,{span:8,children:M})]})]})]})}function Z(e){const n=e.status,s=e.style;e.isExpert;return 1===n?(0,f.jsx)("span",{style:s,children:"\u6b63\u5e38"}):(0,f.jsx)("span",{style:{color:"red",...s},children:"\u5c01\u7981"})}function T(e){const n=e.user,s=e.refresh,t=e.style,i=e.isEnter,o=(0,p.useCallback)((async()=>{try{var e;let o={};var t;if(o=i?await(0,x.ER)({typeContent:"\u9ed1\u540d\u5355",businessId:"com_wind_vane",description:null===n||void 0===n?void 0:n.nickName,category:"userId",content:null===n||void 0===n?void 0:n.userId}):await(0,x.ZK)({idList:[n.id]}),200===(null===(e=o)||void 0===e?void 0:e.code))a.default.success("\u64cd\u4f5c\u6210\u529f\uff01"),s&&s();else a.default.error((null===(t=o)||void 0===t?void 0:t.message)||"\u670d\u52a1\u5668\u51fa\u95ee\u9898\u5566")}catch(o){}}),[i,n,s]);return(0,f.jsx)(c.Z,{placement:"topRight",title:`\u786e\u8ba4\u5c06\u8be5\u7528\u6237 ${i?"\u79fb\u5165":"\u79fb\u51fa"} \u9ed1\u540d\u5355\u5417`,onConfirm:o,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:i?(0,f.jsx)(r.Z,{danger:!0,style:t,children:"\u79fb\u5165\u9ed1\u540d\u5355"}):(0,f.jsx)(r.Z,{type:"primary",style:t,children:"\u79fb\u51fa\u9ed1\u540d\u5355"})})}function w(e){const n=e.isCol,s=e.style,t=e.subjectId,i=(0,j.zR)(t),o=i.adjustGrade,l=(i.isValidating,(0,p.useMemo)((()=>{switch(null===o||void 0===o?void 0:o.status){case 0:return(0,f.jsx)("span",{style:s,children:"\u8c03\u63a7\u5b8c\u6210"});case 1:return(0,f.jsx)("span",{style:{color:"#1890ff",...s},children:"\u8c03\u63a7\u4e2d"});default:return(0,f.jsx)("span",{style:s,children:"\u672a\u8c03\u63a7"})}}),[null===o||void 0===o?void 0:o.status]));return(0,f.jsxs)(f.Fragment,{children:[l,n?(null===o||void 0===o?void 0:o.opUser)&&(0,f.jsxs)("p",{style:{color:"#999"},children:[(null===o||void 0===o?void 0:o.opUser)||"","\u6700\u65b0\u8c03\u63a7"]}):(null===o||void 0===o?void 0:o.opUser)&&(0,f.jsxs)("span",{style:{marginLeft:8},children:["(",(null===o||void 0===o?void 0:o.opUser)||"","\u6700\u65b0\u8c03\u63a7)"]})]})}},99086:(e,n,s)=>{"use strict";s.d(n,{YF:()=>o,ER:()=>l,ZK:()=>d,fY:()=>c});var t=s(72709),i=s(17778);const o="com_wind_vane";function l(e){return(0,t.ZP)(`${i.tW}/blackList/api/picus-namelist/addNameList`,{method:"POST",body:e})}function d(e){return(0,t.ZP)(`${i.tW}/blackList/api/picus-namelist/removeNameList`,{method:"POST",body:e})}function c(e){var n,s;const t={code:200,level:200,msg:"success",data:{pagination:{current:1,total:1,pageSize:10,countPage:1},sort:{type:"desc",key:"createTime"},list:[{typeContent:"\u9ed1\u540d\u5355",createTime:"2022-04-25 10:44:09",businessId:"com_wind_vane",description:"Honeycomb",updateTime:"2022-04-25 10:44:09",id:882941,category:"userId",deadline:"2122-04-25 10:44:09",content:"6903959929825005666",operator:"maoliang",status:1}]}},i=!1,o=()=>{};return{blackList:(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.list)||[],pagination:(null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.pagination)||{},isValidating:i,mutate:o}}},93606:(e,n,s)=>{"use strict";s.d(n,{D:()=>o});var t=s(54579),i=s.n(t);function o(e,n,s){let t;return function(){s&&!t&&e.apply(this,arguments),t&&clearTimeout(t),t=i()((()=>e.apply(this,arguments)),n)}}}}]);
//# sourceMappingURL=4074.d113daef.async.js.map